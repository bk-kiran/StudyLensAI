{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\n"],"names":[],"mappings":"AAAA,kBAAkB,GAClB;;;;;;;CAOC;;;;AAED;AAAA;;AAUO,MAAM,MAAM,yJAAA,CAAA,SAAM;AAClB,MAAM,WAAW,yJAAA,CAAA,SAAM","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS;AAaT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf;MARS","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28auth%29/complete-reset/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { useMutation, useAction } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { useAuthActions } from \"@convex-dev/auth/react\";\nimport { toast } from \"sonner\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Loader2 } from \"lucide-react\";\n\nexport default function CompleteResetPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const email = searchParams.get(\"email\");\n  const password = searchParams.get(\"password\");\n\n  const [status, setStatus] = useState<\"checking\" | \"creating\" | \"transferring\" | \"done\" | \"error\">(\"checking\");\n  const { signIn, signOut } = useAuthActions();\n  const checkPending = useMutation(api.passwordResetMutations.completePendingReset);\n  const updatePassword = useAction(api.passwordReset.updatePasswordForExistingUser);\n  const transferAccount = useAction(api.passwordReset.transferAuthAccountAfterSignUp);\n\n  useEffect(() => {\n    if (!email || !password) {\n      router.push(\"/signin\");\n      return;\n    }\n\n    const completeReset = async () => {\n      try {\n        setStatus(\"checking\");\n        \n        // Check if there's a pending reset\n        const result = await checkPending({ email });\n        \n        if (!result.hasPending) {\n          toast.error(\"Reset session expired. Please try again.\");\n          router.push(\"/forgot-password\");\n          return;\n        }\n\n        setStatus(\"creating\");\n        \n        // Update password - this will either update existing authAccount or prepare for transfer\n        const updateResult = await updatePassword({\n          email: email,\n          newPassword: password,\n        });\n\n        const existingUserId = updateResult.userId;\n\n        // If we updated an existing authAccount, just sign in\n        if (updateResult.updatedExisting) {\n          console.log(\"AuthAccount already exists, signing in directly\");\n          \n          // Sign in with the updated password\n          await signIn(\"password\", {\n            email: email,\n            password: password,\n            flow: \"signIn\",\n          });\n        } else {\n          // No existing authAccount - need to create one via signUp and transfer\n          console.log(\"No existing authAccount, creating via signUp and transferring\");\n          \n          // Use signUp to create authAccount with correct format (creates new user temporarily)\n          await signIn(\"password\", {\n            email: email,\n            password: password,\n            flow: \"signUp\", // Use signUp to create authAccount with correct format\n          });\n\n          // Wait for auth to complete\n          await new Promise(resolve => setTimeout(resolve, 1500));\n\n          // Now transfer the authAccount from the new user to the existing user\n          setStatus(\"transferring\");\n          const transferResult = await transferAccount({\n            email: email,\n            existingUserId: existingUserId,\n          });\n\n          console.log(\"Transfer result:\", transferResult);\n\n          // Verify transfer worked - check that authAccount exists for existing user\n          console.log(\"Verifying transfer completed for user:\", existingUserId);\n          \n          // Sign out to clear the session for the deleted new user\n          await signOut();\n          \n          // Wait a bit for sign out to complete\n          await new Promise(resolve => setTimeout(resolve, 1500));\n\n          // Sign in again with the existing user (now the authAccount is linked to existing user)\n          // Use signIn (not signUp) since the account now exists for the existing user\n          try {\n            await signIn(\"password\", {\n              email: email,\n              password: password,\n              flow: \"signIn\",\n            });\n          } catch (signInError: any) {\n            console.error(\"Sign in error after transfer:\", signInError);\n            // If signIn fails, the authAccount might not be properly linked\n            // Try one more time after a delay\n            await new Promise(resolve => setTimeout(resolve, 1000));\n            await signIn(\"password\", {\n              email: email,\n              password: password,\n              flow: \"signIn\",\n            });\n          }\n        }\n\n        setStatus(\"done\");\n        toast.success(\"Password reset successfully!\");\n        \n        setTimeout(() => {\n          router.push(\"/courses\");\n        }, 1000);\n\n      } catch (error: any) {\n        console.error(\"Complete reset error:\", error);\n        setStatus(\"error\");\n        toast.error(error.message || \"Failed to complete reset\");\n        setTimeout(() => {\n          router.push(\"/forgot-password\");\n        }, 2000);\n      }\n    };\n\n    completeReset();\n  }, [email, password, router, signIn, checkPending, updatePassword]);\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-muted/50\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader>\n          <CardTitle>Completing Password Reset</CardTitle>\n          <CardDescription>\n            {status === \"checking\" && \"Verifying reset request...\"}\n            {status === \"creating\" && \"Creating your new password...\"}\n            {status === \"transferring\" && \"Linking to your account...\"}\n            {status === \"done\" && \"Success! Redirecting...\"}\n            {status === \"error\" && \"Something went wrong...\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"flex justify-center py-8\">\n          <Loader2 className=\"h-12 w-12 animate-spin text-primary\" />\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}