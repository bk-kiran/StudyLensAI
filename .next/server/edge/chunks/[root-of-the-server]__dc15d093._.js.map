{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import {\n  convexAuthNextjsMiddleware,\n  createRouteMatcher,\n  nextjsMiddlewareRedirect,\n} from \"@convex-dev/auth/nextjs/server\";\n\nconst isSignInPage = createRouteMatcher([\"/signin\"]);\nconst isVerifyEmailPage = createRouteMatcher([\"/verify-email\"]); // Add this\nconst isProtectedRoute = createRouteMatcher([\"/courses(.*)\"]);\n\nexport default convexAuthNextjsMiddleware(\n  async (request, { convexAuth }) => {\n    // Allow verify-email page for authenticated users\n    if (isVerifyEmailPage(request)) {\n      return; // Don't redirect, allow access\n    }\n    \n    if (isSignInPage(request) && (await convexAuth.isAuthenticated())) {\n      return nextjsMiddlewareRedirect(request, \"/courses\");\n    }\n    if (isProtectedRoute(request) && !(await convexAuth.isAuthenticated())) {\n      return nextjsMiddlewareRedirect(request, \"/signin\");\n    }\n  },\n  {\n    cookieConfig: { maxAge: 60 * 60 * 24 * 30 },\n  }\n);\n\nexport const config = {\n  // The following matcher runs middleware on all routes\n  // except static assets.\n  matcher: [\"/((?!.*\\\\..*|_next).*)\", \"/\", \"/(api|trpc)(.*)\"],\n};\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAMA,MAAM,eAAe,CAAA,GAAA,2LAAA,CAAA,qBAAkB,AAAD,EAAE;IAAC;CAAU;AACnD,MAAM,oBAAoB,CAAA,GAAA,2LAAA,CAAA,qBAAkB,AAAD,EAAE;IAAC;CAAgB,GAAG,WAAW;AAC5E,MAAM,mBAAmB,CAAA,GAAA,2LAAA,CAAA,qBAAkB,AAAD,EAAE;IAAC;CAAe;uCAE7C,CAAA,GAAA,oMAAA,CAAA,6BAA0B,AAAD,EACtC,OAAO,SAAS,EAAE,UAAU,EAAE;IAC5B,kDAAkD;IAClD,IAAI,kBAAkB,UAAU;QAC9B,QAAQ,+BAA+B;IACzC;IAEA,IAAI,aAAa,YAAa,MAAM,WAAW,eAAe,IAAK;QACjE,OAAO,CAAA,GAAA,oMAAA,CAAA,2BAAwB,AAAD,EAAE,SAAS;IAC3C;IACA,IAAI,iBAAiB,YAAY,CAAE,MAAM,WAAW,eAAe,IAAK;QACtE,OAAO,CAAA,GAAA,oMAAA,CAAA,2BAAwB,AAAD,EAAE,SAAS;IAC3C;AACF,GACA;IACE,cAAc;QAAE,QAAQ,KAAK,KAAK,KAAK;IAAG;AAC5C;AAGK,MAAM,SAAS;IACpB,sDAAsD;IACtD,wBAAwB;IACxB,SAAS;QAAC;QAA0B;QAAK;KAAkB;AAC7D"}}]
}