{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,kKAAA,CAAA,OAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,kKAAA,CAAA,UAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,kKAAA,CAAA,SAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,kKAAA,CAAA,QAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8OAAC,kKAAA,CAAA,UAAuB;QACtB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAuB;gBACtB,aAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8OAAC,kKAAA,CAAA,QAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8OAAC,gMAAA,CAAA,QAAK;;;;;0CACN,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,kKAAA,CAAA,QAAqB;QACpB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,kKAAA,CAAA,cAA2B;QAC1B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,ucACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/convex/_generated/api.js"],"sourcesContent":["/* eslint-disable */\n/**\n * Generated `api` utility.\n *\n * THIS CODE IS AUTOMATICALLY GENERATED.\n *\n * To regenerate, run `npx convex dev`.\n * @module\n */\n\nimport { anyApi } from \"convex/server\";\n\n/**\n * A utility for referencing Convex functions in your app's API.\n *\n * Usage:\n * ```js\n * const myFunctionReference = api.myModule.myFunction;\n * ```\n */\nexport const api = anyApi;\nexport const internal = anyApi;\n"],"names":[],"mappings":"AAAA,kBAAkB,GAClB;;;;;;;CAOC;;;;AAED;AAAA;;AAUO,MAAM,MAAM,sJAAA,CAAA,SAAM;AAClB,MAAM,WAAW,sJAAA,CAAA,SAAM","debugId":null}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/create-course-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { toast } from \"sonner\";\n\ninterface CreateCourseDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst EMOJIS = [\"üìö\", \"üíª\", \"üß™\", \"üìä\", \"üé®\", \"üìù\", \"üî¨\", \"üìê\", \"üåç\", \"üí°\", \"‚ö°\", \"üéØ\", \"üöÄ\", \"üéì\", \"üìñ\", \"üîç\"];\nconst COLORS = [\n  { name: \"Blue\", value: \"#3b82f6\" },\n  { name: \"Purple\", value: \"#8b5cf6\" },\n  { name: \"Pink\", value: \"#ec4899\" },\n  { name: \"Red\", value: \"#ef4444\" },\n  { name: \"Orange\", value: \"#f97316\" },\n  { name: \"Yellow\", value: \"#eab308\" },\n  { name: \"Green\", value: \"#22c55e\" },\n  { name: \"Teal\", value: \"#14b8a6\" },\n  { name: \"Cyan\", value: \"#06b6d4\" },\n  { name: \"Indigo\", value: \"#6366f1\" },\n];\n\nexport function CreateCourseDialog({\n  open,\n  onOpenChange,\n}: CreateCourseDialogProps) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [emoji, setEmoji] = useState<string>(\"\");\n  const [color, setColor] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const createCourse = useMutation(api.courses.createCourse);\n\n  const handleSubmit = async () => {\n    if (!name.trim()) return;\n\n    setIsLoading(true);\n    try {\n      await createCourse({\n        name: name.trim(),\n        description: description.trim(),\n        emoji: emoji || undefined,\n        color: color || undefined,\n      });\n      toast.success(\"Course created successfully\");\n      setName(\"\");\n      setDescription(\"\");\n      setEmoji(\"\");\n      setColor(\"\");\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Create course error:\", error);\n      toast.error(\"Failed to create course\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Create New Course</DialogTitle>\n          <DialogDescription>\n            Add a new course to organize your study materials.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Course Name\n            </label>\n            <Input\n              placeholder=\"e.g., Computer Science 250\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              disabled={isLoading}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Description\n            </label>\n            <Textarea\n              placeholder=\"Brief description of the course\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              disabled={isLoading}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Emoji (Optional)\n            </label>\n            <div className=\"flex flex-wrap gap-2 p-3 border rounded-lg bg-muted/50\">\n              {EMOJIS.map((e) => (\n                <button\n                  key={e}\n                  type=\"button\"\n                  onClick={() => setEmoji(e)}\n                  className={`text-2xl p-2 rounded-lg transition-all hover:scale-110 ${\n                    emoji === e\n                      ? \"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2\"\n                      : \"hover:bg-muted\"\n                  }`}\n                  disabled={isLoading}\n                >\n                  {e}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Color (Optional)\n            </label>\n            <div className=\"flex flex-wrap gap-2 p-3 border rounded-lg bg-muted/50\">\n              {COLORS.map((c) => (\n                <button\n                  key={c.value}\n                  type=\"button\"\n                  onClick={() => setColor(c.value)}\n                  className={`w-10 h-10 rounded-full transition-all hover:scale-110 ${\n                    color === c.value\n                      ? \"ring-2 ring-offset-2 ring-foreground scale-110\"\n                      : \"hover:ring-2 hover:ring-offset-2 hover:ring-muted-foreground/50\"\n                  }`}\n                  style={{ backgroundColor: c.value }}\n                  disabled={isLoading}\n                  title={c.name}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isLoading}\n          >\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={!name.trim() || isLoading}>\n            {isLoading ? \"Creating...\" : \"Create Course\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 670, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 695, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  )\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  )\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  )\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn(\"text-lg font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: \"outline\" }), className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,8OAAC,2KAAA,CAAA,OAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,8OAAC,2KAAA,CAAA,UAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;AAEA,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,8OAAC,2KAAA,CAAA,SAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC,2KAAA,CAAA,UAA4B;QAC3B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,2KAAA,CAAA,UAA4B;gBAC3B,aAAU;gBACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8OAAC,2KAAA,CAAA,QAA0B;QACzB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8OAAC,2KAAA,CAAA,cAAgC;QAC/B,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,2KAAA,CAAA,SAA2B;QAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,KAAK;QAC/B,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,2KAAA,CAAA,SAA2B;QAC1B,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,CAAA,GAAA,kIAAA,CAAA,iBAAc,AAAD,EAAE;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 855, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/confirm-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onConfirm: () => void;\n  title: string;\n  description: string;\n  confirmText?: string;\n  cancelText?: string;\n  destructive?: boolean;\n}\n\nexport function ConfirmDialog({\n  open,\n  onOpenChange,\n  onConfirm,\n  title,\n  description,\n  confirmText = \"Confirm\",\n  cancelText = \"Cancel\",\n  destructive = false,\n}: ConfirmDialogProps) {\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{title}</AlertDialogTitle>\n          <AlertDialogDescription>{description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel>{cancelText}</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={onConfirm}\n            className={destructive ? \"bg-destructive text-destructive-foreground hover:bg-destructive/90\" : \"\"}\n          >\n            {confirmText}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAwBO,SAAS,cAAc,EAC5B,IAAI,EACJ,YAAY,EACZ,SAAS,EACT,KAAK,EACL,WAAW,EACX,cAAc,SAAS,EACvB,aAAa,QAAQ,EACrB,cAAc,KAAK,EACA;IACnB,qBACE,8OAAC,2IAAA,CAAA,cAAW;QAAC,MAAM;QAAM,cAAc;kBACrC,cAAA,8OAAC,2IAAA,CAAA,qBAAkB;;8BACjB,8OAAC,2IAAA,CAAA,oBAAiB;;sCAChB,8OAAC,2IAAA,CAAA,mBAAgB;sCAAE;;;;;;sCACnB,8OAAC,2IAAA,CAAA,yBAAsB;sCAAE;;;;;;;;;;;;8BAE3B,8OAAC,2IAAA,CAAA,oBAAiB;;sCAChB,8OAAC,2IAAA,CAAA,oBAAiB;sCAAE;;;;;;sCACpB,8OAAC,2IAAA,CAAA,oBAAiB;4BAChB,SAAS;4BACT,WAAW,cAAc,uEAAuE;sCAE/F;;;;;;;;;;;;;;;;;;;;;;;AAMb","debugId":null}},
    {"offset": {"line": 933, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/edit-course-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { toast } from \"sonner\";\nimport { Course } from \"./courses-page\";\n\ninterface EditCourseDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  course: Course | null;\n}\n\nconst EMOJIS = [\"üìö\", \"üíª\", \"üß™\", \"üìä\", \"üé®\", \"üìù\", \"üî¨\", \"üìê\", \"üåç\", \"üí°\", \"‚ö°\", \"üéØ\", \"üöÄ\", \"üéì\", \"üìñ\", \"üîç\"];\nconst COLORS = [\n  { name: \"Blue\", value: \"#3b82f6\" },\n  { name: \"Purple\", value: \"#8b5cf6\" },\n  { name: \"Pink\", value: \"#ec4899\" },\n  { name: \"Red\", value: \"#ef4444\" },\n  { name: \"Orange\", value: \"#f97316\" },\n  { name: \"Yellow\", value: \"#eab308\" },\n  { name: \"Green\", value: \"#22c55e\" },\n  { name: \"Teal\", value: \"#14b8a6\" },\n  { name: \"Cyan\", value: \"#06b6d4\" },\n  { name: \"Indigo\", value: \"#6366f1\" },\n];\n\nexport function EditCourseDialog({\n  open,\n  onOpenChange,\n  course,\n}: EditCourseDialogProps) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [emoji, setEmoji] = useState<string>(\"\");\n  const [color, setColor] = useState<string>(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const updateCourse = useMutation(api.courses.updateCourse);\n\n  // Update form fields when course changes\n  useEffect(() => {\n    if (course) {\n      setName(course.name);\n      setDescription(course.description || \"\");\n      setEmoji(course.emoji || \"\");\n      setColor(course.color || \"\");\n    }\n  }, [course]);\n\n  const handleSubmit = async () => {\n    if (!name.trim() || !course) return;\n\n    setIsLoading(true);\n    try {\n      await updateCourse({\n        id: course._id as any,\n        name: name.trim(),\n        description: description.trim(),\n        emoji: emoji || undefined,\n        color: color || undefined,\n      });\n      toast.success(\"Course updated successfully\");\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Update course error:\", error);\n      toast.error(\"Failed to update course\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle>Edit Course</DialogTitle>\n          <DialogDescription>\n            Update the course name and description.\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Course Name\n            </label>\n            <Input\n              placeholder=\"e.g., Computer Science 250\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              disabled={isLoading}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Description\n            </label>\n            <Textarea\n              placeholder=\"Brief description of the course\"\n              value={description}\n              onChange={(e) => setDescription(e.target.value)}\n              rows={3}\n              disabled={isLoading}\n            />\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Emoji (Optional)\n            </label>\n            <div className=\"flex flex-wrap gap-2 p-3 border rounded-lg bg-muted/50\">\n              {EMOJIS.map((e) => (\n                <button\n                  key={e}\n                  type=\"button\"\n                  onClick={() => setEmoji(e)}\n                  className={`text-2xl p-2 rounded-lg transition-all hover:scale-110 ${\n                    emoji === e\n                      ? \"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2\"\n                      : \"hover:bg-muted\"\n                  }`}\n                  disabled={isLoading}\n                >\n                  {e}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Color (Optional)\n            </label>\n            <div className=\"flex flex-wrap gap-2 p-3 border rounded-lg bg-muted/50\">\n              {COLORS.map((c) => (\n                <button\n                  key={c.value}\n                  type=\"button\"\n                  onClick={() => setColor(c.value)}\n                  className={`w-10 h-10 rounded-full transition-all hover:scale-110 ${\n                    color === c.value\n                      ? \"ring-2 ring-offset-2 ring-foreground scale-110\"\n                      : \"hover:ring-2 hover:ring-offset-2 hover:ring-muted-foreground/50\"\n                  }`}\n                  style={{ backgroundColor: c.value }}\n                  disabled={isLoading}\n                  title={c.name}\n                />\n              ))}\n            </div>\n          </div>\n        </div>\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={isLoading}\n          >\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={!name.trim() || isLoading}>\n            {isLoading ? \"Updating...\" : \"Update Course\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1260, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/courses-list.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Plus, FileText, Trash2, BookOpen, ArrowRight } from \"lucide-react\";\nimport { CreateCourseDialog } from \"./create-course-dialog\";\nimport { Course } from \"./courses-page\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { toast } from \"sonner\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ConfirmDialog } from \"@/components/confirm-dialog\";\nimport { Pencil } from \"lucide-react\";\nimport { EditCourseDialog } from \"./edit-course-dialog\";\n\ninterface CoursesListProps {\n  onSelectCourse: (course: Course) => void;\n}\n\nexport function CoursesList({ onSelectCourse }: CoursesListProps) {\n  const courses = useQuery(api.courses.getCourses);\n  const deleteCourse = useMutation(api.courses.deleteCourse);\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = useState(false);\n  const [courseToDelete, setCourseToDelete] = useState<string | null>(null);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [courseToEdit, setCourseToEdit] = useState<Course | null>(null);\n\n  const handleDeleteClick = (courseId: string, e: React.MouseEvent) => {\n    e.stopPropagation();\n    setCourseToDelete(courseId);\n    setConfirmDeleteOpen(true);\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!courseToDelete) return;\n\n    setDeletingId(courseToDelete);\n    setConfirmDeleteOpen(false);\n    \n    try {\n      await deleteCourse({ id: courseToDelete as any });\n      toast.success(\"Course deleted successfully\");\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n      toast.error(\"Failed to delete course\");\n    } finally {\n      setDeletingId(null);\n      setCourseToDelete(null);\n    }\n  };\n\n  const handleEditClick = (course: Course, e: React.MouseEvent) => {\n    e.stopPropagation();\n    setCourseToEdit(course);\n    setEditDialogOpen(true);\n  };\n\n\n  if (courses === undefined) {\n    return <LoadingSkeleton />;\n  }\n\n  // If courses is null (error case), show empty state\n  if (courses === null) {\n    return (\n      <div className=\"container xl:max-w-6xl mx-auto\">\n        <div className=\"text-center py-10\">\n          <p className=\"text-muted-foreground\">\n            Unable to load courses. Please try again.\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container xl:max-w-6xl mx-auto py-8\">\n      <div className=\"flex justify-between items-center mb-10\">\n        <div>\n          <h1 className=\"text-4xl font-bold mb-2 bg-gradient-to-r from-foreground to-foreground/70 bg-clip-text text-transparent\">\n            My Courses\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Organize and manage your coursework\n          </p>\n        </div>\n        <Button onClick={() => setCreateDialogOpen(true)} size=\"lg\" className=\"gap-2\">\n          <Plus className=\"h-5 w-5\" />\n          Create Course\n        </Button>\n      </div>\n\n      {courses.length === 0 ? (\n        <div className=\"text-center py-20\">\n          <div className=\"w-24 h-24 mx-auto mb-6 rounded-full bg-primary/10 flex items-center justify-center\">\n            <BookOpen className=\"h-12 w-12 text-primary/60\" />\n          </div>\n          <h3 className=\"text-xl font-semibold mb-2\">No courses yet</h3>\n          <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n            Get started by creating your first course. Organize your studies and upload materials to begin learning with AI.\n          </p>\n          <Button onClick={() => setCreateDialogOpen(true)} size=\"lg\" className=\"gap-2\">\n            <Plus className=\"h-5 w-5\" />\n            Create Your First Course\n          </Button>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {courses.map((course) => {\n            const courseColor = course.color || \"#3b82f6\";\n            const courseEmoji = course.emoji || \"üìö\";\n            \n            return (\n              <Card\n                key={course._id}\n                className=\"cursor-pointer group hover:shadow-xl transition-all duration-300 border-2 overflow-hidden relative\"\n                style={{\n                  borderColor: course.color ? `${courseColor}40` : undefined,\n                }}\n                onClick={() => onSelectCourse(course as Course)}\n              >\n                {/* Gradient accent */}\n                <div \n                  className=\"absolute top-0 left-0 right-0 h-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  style={{\n                    background: `linear-gradient(to right, ${courseColor}, ${courseColor}80, transparent)`,\n                  }}\n                />\n                \n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"flex items-start justify-between gap-2\">\n                    <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                      <span className=\"text-2xl flex-shrink-0\">{courseEmoji}</span>\n                      <span className=\"text-lg font-semibold transition-colors line-clamp-1 group-hover:opacity-80\">\n                        {course.name}\n                      </span>\n                    </div>\n                    <div className=\"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity\" onClick={(e) => e.stopPropagation()}>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8\"\n                        onClick={(e) => handleEditClick(course as Course, e)}\n                      >\n                        <Pencil className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"h-8 w-8 hover:bg-destructive/10\"\n                        onClick={(e) => handleDeleteClick(course._id, e)}\n                        disabled={deletingId === course._id}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\n                      </Button>\n                    </div>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <p className=\"text-sm text-muted-foreground line-clamp-2 min-h-[2.5rem]\">\n                    {course.description || \"No description provided\"}\n                  </p>\n                  <div className=\"flex items-center justify-between pt-2 border-t\">\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                      <FileText className=\"h-4 w-4\" />\n                      <span className=\"font-medium\">\n                        {course.fileCount} file{course.fileCount !== 1 ? \"s\" : \"\"}\n                      </span>\n                    </div>\n                    <ArrowRight className=\"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-all\" />\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n\n      <CreateCourseDialog\n        open={createDialogOpen}\n        onOpenChange={setCreateDialogOpen}\n      />\n\n      <ConfirmDialog\n        open={confirmDeleteOpen}\n        onOpenChange={setConfirmDeleteOpen}\n        onConfirm={handleConfirmDelete}\n        title=\"Delete Course\"\n        description=\"Are you sure you want to delete this course? All files will be permanently removed. This action cannot be undone.\"\n        confirmText=\"Delete Course\"\n        cancelText=\"Cancel\"\n        destructive={true}\n      />\n\n      <EditCourseDialog\n        open={editDialogOpen}\n        onOpenChange={setEditDialogOpen}\n        course={courseToEdit}\n      />\n    </div>\n  );\n}\n\n\n\nfunction LoadingSkeleton() {\n  return (\n    <div className=\"container xl:max-w-6xl mx-auto\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <Skeleton className=\"h-8 w-32\" />\n        <Skeleton className=\"h-9 w-36\" />\n      </div>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4\">\n        {[...Array(6)].map((_, i) => (\n          <Skeleton key={i} className=\"h-40 w-full rounded-xl\" />\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1750, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/lib/pdfParser.ts"],"sourcesContent":["import * as pdfjsLib from \"pdfjs-dist\";\nimport type { PDFDocumentProxy, TextItem } from \"pdfjs-dist/types/src/display/api\";\n\n// Initialize worker only on client side\nif (typeof window !== \"undefined\") {\n  // Use local worker file from public directory (most reliable)\n  // Falls back to CDN if local file is not available\n  pdfjsLib.GlobalWorkerOptions.workerSrc = `/pdf.worker.min.mjs`;\n}\n\ninterface TextContent {\n  items: Array<TextItem | { str: string }>;\n}\n\nexport async function extractTextFromPDF(file: File): Promise<string> {\n  const arrayBuffer = await file.arrayBuffer();\n  const pdf: PDFDocumentProxy = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;\n  let text = \"\";\n\n  for (let i = 1; i <= pdf.numPages; i++) {\n    const page = await pdf.getPage(i);\n    const content = await page.getTextContent() as unknown as TextContent;\n    text += content.items.map((item) => {\n      if ('str' in item) {\n        return item.str;\n      }\n      return '';\n    }).join(\" \") + \"\\n\\n\";\n  }\n  return text;\n}\n"],"names":[],"mappings":";;;AAAA;;AAGA,wCAAwC;AACxC,uCAAmC;;AAInC;AAMO,eAAe,mBAAmB,IAAU;IACjD,MAAM,cAAc,MAAM,KAAK,WAAW;IAC1C,MAAM,MAAwB,MAAM,CAAA,GAAA,8IAAA,CAAA,cAAoB,AAAD,EAAE;QAAE,MAAM;IAAY,GAAG,OAAO;IACvF,IAAI,OAAO;IAEX,IAAK,IAAI,IAAI,GAAG,KAAK,IAAI,QAAQ,EAAE,IAAK;QACtC,MAAM,OAAO,MAAM,IAAI,OAAO,CAAC;QAC/B,MAAM,UAAU,MAAM,KAAK,cAAc;QACzC,QAAQ,QAAQ,KAAK,CAAC,GAAG,CAAC,CAAC;YACzB,IAAI,SAAS,MAAM;gBACjB,OAAO,KAAK,GAAG;YACjB;YACA,OAAO;QACT,GAAG,IAAI,CAAC,OAAO;IACjB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1783, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/upload-file-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { useMutation, useAction } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { toast } from \"sonner\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\nimport { extractTextFromPDF } from \"@/lib/pdfParser\";\n\ninterface UploadFileDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  courseName: string;\n  courseId: Id<\"courses\">;\n}\n\nexport function UploadFileDialog({\n  open,\n  onOpenChange,\n  courseName,\n  courseId,\n}: UploadFileDialogProps) {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n\n  const generateUploadUrl = useMutation(api.files.generateUploadUrl);\n  const createFile = useAction(api.fileActions.createFile);\n\n  const handleSubmit = async () => {\n    if (!selectedFile) return;\n\n    setIsUploading(true);\n    try {\n      // 1. Get upload URL\n      const uploadUrl = await generateUploadUrl();\n\n      // 2. Upload file to Convex storage\n      const result = await fetch(uploadUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": selectedFile.type },\n        body: selectedFile,\n      });\n\n      const { storageId } = await result.json();\n\n      // 3. Extract text from PDF for embeddings\n      const extractedText = await extractTextFromPDF(selectedFile);\n\n      // 4. Atomically create file (metadata) and embeddings in Convex\n      await createFile({\n        name: selectedFile.name,\n        courseId,\n        storageId,\n        fileContent: extractedText,\n      });\n\n      toast.success(\"File uploaded and embeddings are being processed!\");\n      setSelectedFile(null);\n      onOpenChange(false);\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      toast.error(\"Failed to upload file\");\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleClose = () => {\n    if (!isUploading) {\n      setSelectedFile(null);\n      onOpenChange(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Upload PDF</DialogTitle>\n          <DialogDescription>\n            Upload a PDF file to {courseName}\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Select PDF File\n            </label>\n            <Input\n              type=\"file\"\n              accept=\".pdf\"\n              onChange={(e) => setSelectedFile(e.target.files?.[0] || null)}\n              disabled={isUploading}\n            />\n            {selectedFile && (\n              <p className=\"text-sm text-muted-foreground mt-2\">\n                Selected: {selectedFile.name}\n              </p>\n            )}\n          </div>\n        </div>\n        <DialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={handleClose}\n            disabled={isUploading}\n          >\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={!selectedFile || isUploading}>\n            {isUploading ? \"Uploading...\" : \"Upload\"}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAQA;AACA;AAAA;AACA;AACA;AAEA;AAjBA;;;;;;;;;;AA0BO,SAAS,iBAAiB,EAC/B,IAAI,EACJ,YAAY,EACZ,UAAU,EACV,QAAQ,EACc;IACtB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,oBAAoB,CAAA,GAAA,wJAAA,CAAA,cAAW,AAAD,EAAE,2HAAA,CAAA,MAAG,CAAC,KAAK,CAAC,iBAAiB;IACjE,MAAM,aAAa,CAAA,GAAA,wJAAA,CAAA,YAAS,AAAD,EAAE,2HAAA,CAAA,MAAG,CAAC,WAAW,CAAC,UAAU;IAEvD,MAAM,eAAe;QACnB,IAAI,CAAC,cAAc;QAEnB,eAAe;QACf,IAAI;YACF,oBAAoB;YACpB,MAAM,YAAY,MAAM;YAExB,mCAAmC;YACnC,MAAM,SAAS,MAAM,MAAM,WAAW;gBACpC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB,aAAa,IAAI;gBAAC;gBAC7C,MAAM;YACR;YAEA,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,OAAO,IAAI;YAEvC,0CAA0C;YAC1C,MAAM,gBAAgB,MAAM,CAAA,GAAA,uHAAA,CAAA,qBAAkB,AAAD,EAAE;YAE/C,gEAAgE;YAChE,MAAM,WAAW;gBACf,MAAM,aAAa,IAAI;gBACvB;gBACA;gBACA,aAAa;YACf;YAEA,wIAAA,CAAA,QAAK,CAAC,OAAO,CAAC;YACd,gBAAgB;YAChB,aAAa;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,wIAAA,CAAA,QAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,aAAa;YAChB,gBAAgB;YAChB,aAAa;QACf;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8OAAC,kIAAA,CAAA,gBAAa;;8BACZ,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,cAAW;sCAAC;;;;;;sCACb,8OAAC,kIAAA,CAAA,oBAAiB;;gCAAC;gCACK;;;;;;;;;;;;;8BAG1B,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;;0CACC,8OAAC;gCAAM,WAAU;0CAAiC;;;;;;0CAGlD,8OAAC,iIAAA,CAAA,QAAK;gCACJ,MAAK;gCACL,QAAO;gCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;gCACxD,UAAU;;;;;;4BAEX,8BACC,8OAAC;gCAAE,WAAU;;oCAAqC;oCACrC,aAAa,IAAI;;;;;;;;;;;;;;;;;;8BAKpC,8OAAC,kIAAA,CAAA,eAAY;;sCACX,8OAAC,kIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,SAAS;4BACT,UAAU;sCACX;;;;;;sCAGD,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAS;4BAAc,UAAU,CAAC,gBAAgB;sCACvD,cAAc,iBAAiB;;;;;;;;;;;;;;;;;;;;;;;AAM5C","debugId":null}},
    {"offset": {"line": 2056, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/markdown.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport ReactMarkdown from \"react-markdown\";\n\ninterface MarkdownProps {\n  children: string;\n}\n\n// Aggressive text formatter to break up dense blocks\nfunction formatTextAggressively(text: string): string {\n  let formatted = text;\n  \n  // Step 1: Convert numbered sections to headings (e.g., \"1. Title\" -> \"## Title\")\n  formatted = formatted.replace(/^(\\d+)\\.\\s+([A-Z][^\\n]{10,100})$/gm, '## $2');\n  \n  // Step 2: Convert lettered subsections to subheadings (e.g., \"a. Subtitle\" -> \"### Subtitle\")\n  formatted = formatted.replace(/^([a-z])\\.\\s+([A-Z][^\\n]{5,80})$/gm, '### $2');\n  \n  // Step 3: Add double line breaks before lists\n  formatted = formatted.replace(/([.!?])\\s*\\n\\s*(\\d+[.)]\\s)/g, '$1\\n\\n$2');\n  formatted = formatted.replace(/([.!?])\\s*\\n\\s*([-*‚Ä¢]\\s)/g, '$1\\n\\n$2');\n  \n  // Step 4: Ensure headings have proper spacing\n  formatted = formatted.replace(/(#{1,6}\\s+.+)\\n([^\\n#\\s-*‚Ä¢\\d])/g, '$1\\n\\n$2');\n  \n  // Step 5: Break up long paragraphs - split on sentence boundaries\n  const lines = formatted.split('\\n');\n  const processedLines: string[] = [];\n  \n  for (const line of lines) {\n    // Skip if it's already a heading, list item, or code block\n    if (line.trim().match(/^(#{1,6}|[-*‚Ä¢]\\s|\\d+[.)]\\s|[a-z]\\.\\s|```|`)/)) {\n      processedLines.push(line);\n      continue;\n    }\n    \n    // If line is very long (> 250 chars) and has multiple sentences, try to break it\n    if (line.length > 250) {\n      // Count sentences (period/exclamation/question followed by space and capital letter)\n      const sentenceMatches = line.match(/[.!?]\\s+[A-Z]/g);\n      const sentenceCount = sentenceMatches ? sentenceMatches.length : 0;\n      \n      if (sentenceCount >= 2) {\n        // Split on sentence boundaries but keep the punctuation with the sentence\n        const parts: string[] = [];\n        let lastIndex = 0;\n        \n        // Find all sentence boundaries\n        const regex = /([.!?]\\s+)(?=[A-Z])/g;\n        let match;\n        while ((match = regex.exec(line)) !== null) {\n          parts.push(line.substring(lastIndex, match.index + match[1].length));\n          lastIndex = match.index + match[1].length;\n        }\n        if (lastIndex < line.length) {\n          parts.push(line.substring(lastIndex));\n        }\n        \n        // Group sentences into paragraphs (max 2-3 sentences per paragraph)\n        let currentParagraph = '';\n        let sentencesInParagraph = 0;\n        \n        for (const part of parts) {\n          currentParagraph += part;\n          if (part.match(/[.!?]\\s*$/)) {\n            sentencesInParagraph++;\n          }\n          \n          // Break paragraph if it has 2-3 sentences or is getting long\n          if (sentencesInParagraph >= 2 && currentParagraph.length > 150) {\n            if (currentParagraph.trim()) {\n              processedLines.push(currentParagraph.trim());\n            }\n            currentParagraph = '';\n            sentencesInParagraph = 0;\n          }\n        }\n        \n        if (currentParagraph.trim()) {\n          processedLines.push(currentParagraph.trim());\n        }\n        continue;\n      }\n    }\n    \n    processedLines.push(line);\n  }\n  \n  // Step 6: Ensure paragraphs are separated by double line breaks\n  formatted = processedLines.join('\\n');\n  formatted = formatted.replace(/([.!?])\\s*\\n\\s*([A-Z][a-z])/g, (match, punct, next) => {\n    // Only if not already double-spaced\n    const index = formatted.indexOf(match);\n    const before = formatted.substring(Math.max(0, index - 3), index);\n    if (!before.endsWith('\\n\\n') && !before.match(/(#{1,6}|[-*‚Ä¢]|\\d+[.)]|[a-z]\\.)$/)) {\n      return `${punct}\\n\\n${next}`;\n    }\n    return match;\n  });\n  \n  // Step 7: Ensure code blocks have proper spacing (but don't auto-wrap - let AI handle it)\n  // Just ensure existing code blocks have spacing\n  formatted = formatted.replace(/([^\\n])\\n```/g, '$1\\n\\n```');\n  formatted = formatted.replace(/```\\n([^\\n])/g, '```\\n\\n$1');\n  \n  return formatted;\n}\n\nexport default function Markdown({ children }: MarkdownProps) {\n  // Pre-process text to ensure proper paragraph breaks\n  const processedText = typeof children === 'string' \n    ? formatTextAggressively(children)\n    : children;\n\n  return (\n    <div className=\"prose prose-sm dark:prose-invert max-w-none prose-headings:scroll-mt-4 break-words space-y-2\">\n      <ReactMarkdown\n        components={{\n          // Paragraphs with MUCH more spacing for readability\n          p: ({ children }) => {\n            const text = String(children);\n            const isLong = text.length > 300;\n            return (\n              <div className={`mb-8 last:mb-0 ${isLong ? 'pb-2' : ''}`}>\n                <p className=\"leading-8 text-foreground/90 text-[15px] break-words max-w-full\">\n                  {children}\n                </p>\n                {isLong && <div className=\"h-3\" />}\n              </div>\n            );\n          },\n          // Headings with better hierarchy and spacing\n          h1: ({ children }) => (\n            <h1 className=\"text-2xl font-bold mb-6 mt-10 first:mt-0 text-foreground border-b border-border/50 pb-3 pt-2\">\n              {children}\n            </h1>\n          ),\n          h2: ({ children }) => (\n            <h2 className=\"text-xl font-semibold mb-5 mt-8 first:mt-0 text-foreground pt-1\">\n              {children}\n            </h2>\n          ),\n          h3: ({ children }) => (\n            <h3 className=\"text-lg font-semibold mb-4 mt-7 first:mt-0 text-foreground pt-1\">\n              {children}\n            </h3>\n          ),\n          h4: ({ children }) => (\n            <h4 className=\"text-base font-semibold mb-4 mt-6 first:mt-0 text-foreground\">\n              {children}\n            </h4>\n          ),\n          // Lists with better spacing and visual clarity\n          ul: ({ children }) => (\n            <ul className=\"mb-7 ml-6 list-disc space-y-3.5 text-foreground/90 marker:text-primary/60\">\n              {children}\n            </ul>\n          ),\n          ol: ({ children }) => (\n            <ol className=\"mb-7 ml-6 list-decimal space-y-3.5 text-foreground/90 marker:font-semibold marker:text-primary/60\">\n              {children}\n            </ol>\n          ),\n          li: ({ children }) => (\n            <li className=\"leading-7 text-[15px] pl-2.5 mb-1.5\">\n              {children}\n            </li>\n          ),\n          // Enhanced code blocks with better styling\n          code: ({ className, children, ...props }) => {\n            const isInline = !className;\n            return isInline ? (\n              <code\n                className=\"px-2 py-0.5 rounded-md bg-muted/80 text-[13px] font-mono text-primary border border-border/50 font-medium\"\n                {...props}\n              >\n                {children}\n              </code>\n            ) : (\n              <code\n                className=\"block p-0 rounded-lg bg-transparent text-sm font-mono overflow-x-auto mb-5 text-foreground\"\n                {...props}\n              >\n                {children}\n              </code>\n            );\n          },\n          pre: ({ children }) => (\n            <pre className=\"mb-5 overflow-x-auto rounded-lg bg-muted/60 p-4 border border-border/50 shadow-sm\">\n              {children}\n            </pre>\n          ),\n          // Enhanced blockquotes with better visual distinction\n          blockquote: ({ children }) => (\n            <blockquote className=\"border-l-4 border-primary/60 pl-5 py-2 my-5 italic text-foreground/80 bg-muted/30 rounded-r-lg\">\n              {children}\n            </blockquote>\n          ),\n          // Links with better visibility\n          a: ({ href, children }) => {\n            const isInternalLink =\n              href?.startsWith(process.env.NEXT_PUBLIC_BASE_URL!) ||\n              href?.startsWith(\"/\");\n            if (isInternalLink) {\n              return (\n                <Link\n                  href={href || \"#\"}\n                  className=\"text-primary hover:text-primary/80 hover:underline font-medium transition-colors underline-offset-2\"\n                >\n                  {children}\n                </Link>\n              );\n            }\n            return (\n              <a\n                href={href || \"#\"}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-primary hover:text-primary/80 hover:underline font-medium transition-colors underline-offset-2\"\n              >\n                {children}\n              </a>\n            );\n          },\n          // Enhanced horizontal rules with more spacing\n          hr: () => <hr className=\"my-10 border-0 border-t-2 border-border/40\" />,\n          // Strong and emphasis with better visual weight\n          strong: ({ children }) => (\n            <strong className=\"font-semibold text-foreground\">{children}</strong>\n          ),\n          em: ({ children }) => (\n            <em className=\"italic text-foreground/90\">{children}</em>\n          ),\n          // Enhanced tables with better styling\n          table: ({ children }) => (\n            <div className=\"overflow-x-auto my-5 rounded-lg border border-border/50 shadow-sm\">\n              <table className=\"min-w-full border-collapse\">\n                {children}\n              </table>\n            </div>\n          ),\n          thead: ({ children }) => (\n            <thead className=\"bg-muted/50\">{children}</thead>\n          ),\n          tbody: ({ children }) => <tbody className=\"divide-y divide-border/50\">{children}</tbody>,\n          tr: ({ children }) => (\n            <tr className=\"hover:bg-muted/30 transition-colors\">{children}</tr>\n          ),\n          th: ({ children }) => (\n            <th className=\"border-b border-border/50 px-4 py-3 text-left font-semibold text-foreground text-sm\">\n              {children}\n            </th>\n          ),\n          td: ({ children }) => (\n            <td className=\"px-4 py-3 text-foreground/90 text-sm\">\n              {children}\n            </td>\n          ),\n        }}\n      >\n        {processedText}\n      </ReactMarkdown>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2405, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/course-ai-chat-box.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Bot, Send, Sparkles, Trash, ChevronDown, BookOpen, HelpCircle, Lightbulb, ListChecks, FileQuestion } from \"lucide-react\";\nimport { useChat } from \"@ai-sdk/react\";\nimport { useAuthToken } from \"@convex-dev/auth/react\";\nimport { DefaultChatTransport } from \"ai\";\nimport Markdown from \"@/components/markdown\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ntype GenerateMode = \"practice-questions\" | \"summary\" | \"key-concepts\" | \"study-guide\" | \"flashcards\" | \"explain\" | null;\n\ninterface CourseAIChatBoxProps {\n  courseName: string;\n  courseId: Id<\"courses\">;\n  generateMode: GenerateMode;\n  onModeChange: (mode: GenerateMode) => void;\n}\n\nconst MODE_PROMPTS: Record<NonNullable<GenerateMode>, string> = {\n  \"practice-questions\": \"Generate practice questions based on the course materials\",\n  \"summary\": \"Create a comprehensive summary of the course materials\",\n  \"key-concepts\": \"Extract and explain the key concepts from the course materials\",\n  \"study-guide\": \"Create a detailed study guide covering all important topics\",\n  \"flashcards\": \"Generate flashcards with questions and answers from the materials\",\n  \"explain\": \"Explain a specific concept in detail\",\n};\n\nconst AUTO_GENERATE_PROMPTS: Record<NonNullable<GenerateMode>, string> = {\n  \"practice-questions\": \"Generate practice questions based on all the course materials. Create questions that test understanding of key concepts, vary in difficulty (easy, medium, hard), and include both multiple-choice and open-ended questions. Provide answers and explanations.\",\n  \"summary\": \"Create a comprehensive summary of all the course materials. Organize the summary by topics, highlight key points, and ensure it covers all important concepts from the materials.\",\n  \"key-concepts\": \"Extract and explain the key concepts from all the course materials. List each concept clearly, provide definitions, and explain their importance and relationships.\",\n  \"study-guide\": \"Create a detailed study guide covering all important topics from all the course materials. Organize it by chapters or themes, include key points, definitions, and important examples.\",\n  \"flashcards\": \"Generate flashcards with questions and answers from all the course materials. Format them clearly with the question on one side and the answer on the other. Cover a variety of topics.\",\n  \"explain\": \"Please explain the key concepts from all the course materials in detail. Break them down into understandable parts, use examples from the materials, and relate them to other concepts when relevant.\",\n};\n\nconst GENERATE_MODES = [\n  { id: \"practice-questions\" as const, label: \"Practice Questions\", icon: FileQuestion },\n  { id: \"summary\" as const, label: \"Summary\", icon: BookOpen },\n  { id: \"key-concepts\" as const, label: \"Key Concepts\", icon: Lightbulb },\n  { id: \"study-guide\" as const, label: \"Study Guide\", icon: ListChecks },\n  { id: \"flashcards\" as const, label: \"Flashcards\", icon: Sparkles },\n  { id: \"explain\" as const, label: \"Explain Concept\", icon: HelpCircle },\n];\n\nconst convexSiteUrl = process.env.NEXT_PUBLIC_CONVEX_URL?.replace(\n  /.cloud$/,\n  \".site\"\n);\n\nexport function CourseAIChatBox({\n  courseName,\n  courseId,\n  generateMode,\n  onModeChange,\n}: CourseAIChatBoxProps) {\n  const token = useAuthToken();\n  const tokenRef = useRef(token);\n  tokenRef.current = token; // Keep ref in sync\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [input, setInput] = useState(\"\");\n  const hasLoadedRef = useRef(false);\n  const savedMessageIdsRef = useRef(new Set<string>());\n  const currentGenerateModeRef = useRef<GenerateMode>(null);\n  const modeSelectInProgressRef = useRef(false);\n\n  // Fetch chat history from Convex\n  const savedMessages = useQuery(\n    api.chatMessages.getChatMessages,\n    courseId ? { courseId } : \"skip\"\n  );\n  \n  const saveChatMessage = useMutation(api.chatMessages.saveChatMessage);\n  const clearHistory = useMutation(api.chatMessages.clearChatHistory);\n\n  // Memoize the fetch function to prevent transport recreation\n  // Use refs for courseId and generateMode to avoid recreating on every change\n  const courseIdRef = useRef(courseId);\n  courseIdRef.current = courseId;\n  \n  const customFetch = useCallback(async (input: URL | RequestInfo, init?: RequestInit) => {\n    // Intercept and modify the request body to include courseId and generateMode\n    const options = init || {};\n    \n    if (options.body) {\n      try {\n        const body = JSON.parse(options.body as string);\n        body.courseId = courseIdRef.current;\n        // Use ref value (always up-to-date)\n        body.generateMode = currentGenerateModeRef.current;\n        options.body = JSON.stringify(body);\n      } catch (e) {\n        console.error(\"Failed to modify request body:\", e);\n      }\n    }\n    \n    try {\n      const response = await fetch(input, options);\n      \n      // Check if response is ok\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        console.error(\"Fetch error:\", response.status, errorData);\n        throw new Error(errorData.error || `Request failed with status ${response.status}`);\n      }\n      \n      return response;\n    } catch (fetchError) {\n      console.error(\"Network error:\", fetchError);\n      throw fetchError;\n    }\n  }, []); // Empty deps - we use refs for all values\n\n  // Memoize the transport to prevent useChat from resetting\n  // Use ref for token to prevent recreation on every token change\n  const transport = useMemo(() => {\n    const currentToken = tokenRef.current;\n    return new DefaultChatTransport({\n      api: `${convexSiteUrl}/api/chat`,\n      headers: {\n        Authorization: `Bearer ${currentToken}`,\n      },\n      fetch: customFetch,\n    });\n  }, [customFetch]); // Only recreate if customFetch changes (which it shouldn't)\n\n  const { messages, sendMessage, status, setMessages, error } = useChat({\n    transport,\n    onError: (err) => {\n      console.error(\"Chat error:\", err);\n    },\n  });\n\n  const isProcessing = status === \"submitted\" || status === \"streaming\";\n\n  // Load chat history once when data is available\n  const hasInitializedRef = useRef(false);\n  const isInitializingRef = useRef(false);\n  const savedMessagesSnapshotRef = useRef<any>(null);\n  \n  // Use a separate effect that runs on every render but only processes once\n  useEffect(() => {\n    // CRITICAL: Only process ONCE when data first becomes available\n    // After initialization, completely ignore savedMessages updates (they come from our own saves)\n    if (hasInitializedRef.current) {\n      // Already initialized - do nothing, ignore all future savedMessages updates\n      return;\n    }\n    \n    // Wait for data to be available\n    if (savedMessages === undefined) return;\n    \n    // Prevent concurrent initialization\n    if (isInitializingRef.current) return;\n    \n    // Check if this is the same data we already processed\n    if (savedMessagesSnapshotRef.current === savedMessages) return;\n    \n    // Mark as processing and initialized IMMEDIATELY to prevent re-runs\n    isInitializingRef.current = true;\n    hasInitializedRef.current = true;\n    hasLoadedRef.current = true;\n    savedMessagesSnapshotRef.current = savedMessages;\n    \n    if (Array.isArray(savedMessages) && savedMessages.length > 0) {\n      const formattedMessages = savedMessages.map((msg, idx) => ({\n        id: `${msg._id}-${idx}`,\n        role: msg.role as \"user\" | \"assistant\",\n        parts: [\n          {\n            type: \"text\" as const,\n            text: msg.content,\n          },\n        ],\n      }));\n      \n      // Track all loaded message IDs to prevent duplicates\n      savedMessages.forEach((msg) => {\n        const messageKey = `${msg.role}-${msg.content}`;\n        savedMessageIdsRef.current.add(messageKey);\n      });\n      \n      // Use setTimeout to defer setMessages and prevent immediate re-render loops\n      setTimeout(() => {\n        // Double-check we're still in initialization state\n        if (!hasInitializedRef.current || !isInitializingRef.current) {\n          isInitializingRef.current = false;\n          return;\n        }\n        setMessages(formattedMessages);\n        // Update prevMessagesLengthRef to match loaded messages\n        prevMessagesLengthRef.current = formattedMessages.length;\n        lastProcessedLengthRef.current = formattedMessages.length;\n        isInitializingRef.current = false;\n      }, 0);\n    } else {\n      isInitializingRef.current = false;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [savedMessages]); // Keep savedMessages in deps, but early return prevents re-processing\n\n  // Save new messages to Convex\n  const prevMessagesLengthRef = useRef(0);\n  const isSavingRef = useRef(false);\n  const messagesRef = useRef(messages);\n  const lastProcessedLengthRef = useRef(0);\n  const saveTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  \n  // CRITICAL: Track if we're in the initial load phase to prevent save loop\n  // After initialization, we ignore savedMessages updates (they come from our own saves)\n  \n  // Keep messages ref in sync without triggering effects\n  messagesRef.current = messages;\n  \n  useEffect(() => {\n    // Only process if we've loaded initial messages and have a courseId\n    if (!hasLoadedRef.current || !courseId) return;\n    if (isInitializingRef.current) return; // Don't save during initialization\n    if (isSavingRef.current) return; // Prevent concurrent saves\n    if (modeSelectInProgressRef.current) return; // Don't save immediately after mode select\n    \n    // CRITICAL: During streaming, messages update continuously causing infinite loops\n    // COMPLETELY DISABLE saving during streaming - we'll save everything when ready\n    const isStreaming = status === \"submitted\" || status === \"streaming\";\n    \n    if (isStreaming) {\n      // During streaming, DO NOTHING - completely skip all processing\n      // This prevents infinite loops from continuous message updates\n      return;\n    }\n    \n    // Only process when status is \"ready\" (streaming complete)\n    if (status !== \"ready\") return;\n    \n    const currentMessages = messagesRef.current;\n    const currentLength = currentMessages.length;\n    const prevLength = prevMessagesLengthRef.current;\n    \n    // Only process if there are new messages and we haven't processed this length yet\n    if (currentLength <= prevLength || currentLength === lastProcessedLengthRef.current) {\n      return;\n    }\n    \n    // Get all new messages since last save\n    const newMessages = currentMessages.slice(prevLength);\n    \n    if (newMessages.length === 0) {\n      lastProcessedLengthRef.current = currentLength;\n      return;\n    }\n    \n    // Mark this length as being processed immediately\n    lastProcessedLengthRef.current = currentLength;\n    \n    // Save all new messages when streaming is complete\n    const saveAllMessages = async () => {\n      if (isSavingRef.current) return;\n      isSavingRef.current = true;\n      \n      try {\n        for (const message of newMessages) {\n          const lastPart = message.parts[message.parts.length - 1];\n          \n          if (lastPart?.type === \"text\" && message.role) {\n            const messageKey = `${message.role}-${lastPart.text}`;\n            \n            if (!savedMessageIdsRef.current.has(messageKey)) {\n              savedMessageIdsRef.current.add(messageKey);\n              \n              try {\n                await saveChatMessage({\n                  courseId,\n                  role: message.role as \"user\" | \"assistant\",\n                  content: lastPart.text,\n                });\n              } catch (error) {\n                console.error(\"Failed to save message:\", error);\n              }\n            }\n          }\n        }\n\n        // Update the counter when complete\n        prevMessagesLengthRef.current = currentLength;\n      } finally {\n        isSavingRef.current = false;\n      }\n    };\n    \n    // Save immediately when ready (not streaming)\n    saveAllMessages();\n  }, [messages.length, status, courseId, saveChatMessage]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const handleSend = (e?: React.FormEvent) => {\n    if (e) e.preventDefault();\n    \n    if (!input.trim() || isProcessing) return;\n\n    let messageToSend = input.trim();\n\n    if (generateMode) {\n      const modePrompt = MODE_PROMPTS[generateMode];\n      messageToSend = `${modePrompt}: ${messageToSend}`;\n      currentGenerateModeRef.current = generateMode;\n    } else {\n      currentGenerateModeRef.current = null;\n    }\n    \n    if (generateMode) {\n      onModeChange(null);\n    }\n\n    sendMessage({ text: messageToSend });\n    setInput(\"\");\n  };\n\n  const handleModeSelect = useCallback((mode: GenerateMode) => {\n    if (!mode || isProcessing || modeSelectInProgressRef.current) return;\n    \n    modeSelectInProgressRef.current = true;\n    \n    // Set the mode in ref first (before any state updates)\n    currentGenerateModeRef.current = mode;\n    \n    // Automatically send a message to generate the content\n    const autoPrompt = AUTO_GENERATE_PROMPTS[mode];\n    \n    // Send the message immediately - the fetch interceptor will read from the ref\n    sendMessage({ text: autoPrompt });\n    \n    // Update parent state after a brief delay to avoid immediate re-render\n    setTimeout(() => {\n      onModeChange(mode);\n      \n      // Clear the mode after fetch has captured it\n      setTimeout(() => {\n        currentGenerateModeRef.current = null;\n        onModeChange(null);\n        modeSelectInProgressRef.current = false;\n      }, 1500); // Increased delay to ensure fetch has completed\n    }, 100);\n  }, [isProcessing, sendMessage, onModeChange]);\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleClearHistory = async () => {\n    if (!courseId) return;\n    \n    try {\n      await clearHistory({ courseId });\n      setMessages([]);\n      savedMessageIdsRef.current.clear();\n      prevMessagesLengthRef.current = 0;\n    } catch (error) {\n      console.error(\"Failed to clear history:\", error);\n    }\n  };\n\n  const lastMessageIsUser = messages.length > 0 && messages[messages.length - 1].role === \"user\";\n\n  if (!hasLoadedRef.current && savedMessages === undefined) {\n    return (\n      <div className=\"h-full w-full flex items-center justify-center\">\n        <div className=\"flex flex-col items-center gap-3\">\n          <Bot className=\"h-8 w-8 text-primary animate-pulse\" />\n          <p className=\"text-sm text-muted-foreground\">Loading chat history...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full w-full flex flex-col bg-background\" style={{ minHeight: 0, maxHeight: \"100%\" }}>\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 sm:p-6 space-y-4\" style={{ minHeight: 0, maxHeight: \"100%\" }}>\n        {messages.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center h-full text-center space-y-4 max-w-lg mx-auto\">\n            <div className=\"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center\">\n              <Bot className=\"h-7 w-7 text-primary\" />\n            </div>\n            <div className=\"space-y-1.5\">\n              <h3 className=\"font-semibold text-base\">{courseName}</h3>\n              <p className=\"text-sm text-muted-foreground leading-relaxed px-4\">\n                {generateMode\n                  ? `I'll help you ${GENERATE_MODES.find(m => m.id === generateMode)?.label.toLowerCase()}. Ask me anything about your course materials.`\n                  : \"Ask me anything about your course materials, or use the Generate button to create study resources.\"}\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-5\">\n            {messages.map((msg) => {\n              const currentStep = msg.parts[msg.parts.length - 1];\n              \n              return (\n                <div\n                  key={msg.id}\n                  className={`flex ${msg.role === \"user\" ? \"justify-end\" : \"justify-start\"} animate-in fade-in slide-in-from-bottom-2`}\n                >\n                  <div className=\"flex gap-3 max-w-[85%] sm:max-w-[80%]\">\n                    {msg.role === \"assistant\" && (\n                      <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 self-start mt-1\">\n                        <Bot className=\"h-4 w-4 text-primary\" />\n                      </div>\n                    )}\n                    <div\n                      className={`rounded-2xl break-words ${\n                        msg.role === \"user\"\n                          ? \"bg-primary text-primary-foreground px-5 py-4 shadow-sm\"\n                          : \"bg-muted/80 backdrop-blur-sm px-7 py-6 shadow-sm border border-border/30\"\n                      }`}\n                    >\n                      {currentStep?.type === \"text\" && (\n                        msg.role === \"assistant\" ? (\n                          <div className=\"text-foreground break-words\">\n                            <Markdown>{currentStep.text}</Markdown>\n                          </div>\n                        ) : (\n                          <p className=\"text-sm sm:text-base whitespace-pre-wrap leading-7 break-words\">{currentStep.text}</p>\n                        )\n                      )}\n                    </div>\n                    {msg.role === \"user\" && (\n                      <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0 self-start mt-1\">\n                        <span className=\"text-xs font-semibold text-primary\">U</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              );\n            })}\n            {status === \"submitted\" && lastMessageIsUser && (\n              <div className=\"flex justify-start\">\n                <div className=\"flex gap-3 max-w-[85%] sm:max-w-[80%]\">\n                  <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 self-start mt-1\">\n                    <Bot className=\"h-4 w-4 text-primary animate-pulse\" />\n                  </div>\n                  <div className=\"rounded-2xl px-6 py-5 bg-muted/80 backdrop-blur-sm shadow-sm border border-border/30\">\n                    <div className=\"flex gap-1.5\">\n                      <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }} />\n                      <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }} />\n                      <div className=\"w-2 h-2 bg-primary rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }} />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n            {status === \"error\" && (\n              <div className=\"flex justify-start\">\n                <div className=\"flex gap-3 max-w-[80%]\">\n                  <div className=\"w-8 h-8 rounded-lg bg-destructive/10 flex items-center justify-center flex-shrink-0\">\n                    <Bot className=\"h-4 w-4 text-destructive\" />\n                  </div>\n                  <div className=\"rounded-2xl p-4 bg-destructive/10 border border-destructive/20\">\n                    <p className=\"text-sm text-destructive\">\n                      {error?.message || \"Something went wrong while generating the response. This might be due to a timeout or network issue. Please try again.\"}\n                    </p>\n                    {error && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => {\n                          // Retry the last message if possible\n                          const lastUserMessage = messages.filter(m => m.role === \"user\").slice(-1)[0];\n                          if (lastUserMessage) {\n                            const lastPart = lastUserMessage.parts[lastUserMessage.parts.length - 1];\n                            if (lastPart?.type === \"text\") {\n                              sendMessage({ text: lastPart.text });\n                            }\n                          }\n                        }}\n                        className=\"mt-2 text-xs h-7\"\n                      >\n                        Retry\n                      </Button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n            <div ref={messagesEndRef} />\n          </div>\n        )}\n      </div>\n\n      {/* Input - Sticky at bottom */}\n      <div className=\"border-t bg-background p-3 sm:p-4 flex-shrink-0\">\n        {generateMode && (\n          <div className=\"mb-2 sm:mb-3 flex items-center gap-2 px-2 sm:px-3 py-1.5 bg-primary/10 rounded-md border border-primary/20 max-w-fit\">\n            <Sparkles className=\"h-3.5 w-3.5 text-primary flex-shrink-0\" />\n            <span className=\"text-xs font-medium text-primary truncate\">\n              {GENERATE_MODES.find(m => m.id === generateMode)?.label}\n            </span>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-5 w-5 ml-1 hover:bg-primary/20 flex-shrink-0\"\n              onClick={() => onModeChange(null)}\n            >\n              √ó\n            </Button>\n          </div>\n        )}\n        <div className=\"flex gap-2 items-center mb-2\">\n          {messages.length > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleClearHistory}\n              className=\"gap-1.5 text-xs h-8\"\n            >\n              <Trash className=\"h-3.5 w-3.5\" />\n              Clear History\n            </Button>\n          )}\n        </div>\n        <form onSubmit={handleSend} className=\"flex gap-2 items-end\">\n          <div className=\"flex-1 relative min-w-0\">\n            <Input\n              placeholder={\n                generateMode\n                  ? `Ask about ${GENERATE_MODES.find(m => m.id === generateMode)?.label.toLowerCase()}...`\n                  : \"Type your question here...\"\n              }\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              onKeyPress={handleKeyPress}\n              disabled={isProcessing}\n              className=\"w-full h-auto min-h-[44px] sm:min-h-[48px] py-2.5 sm:py-3 px-3 sm:px-4 rounded-xl border-2 focus:border-primary/50 text-sm sm:text-base\"\n            />\n          </div>\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"icon\"\n                disabled={isProcessing}\n                className=\"h-11 w-11 sm:h-12 sm:w-12 rounded-xl flex-shrink-0 border-2\"\n                title=\"Generate content\"\n              >\n                <Sparkles className=\"h-4 w-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\" className=\"w-56\">\n              {GENERATE_MODES.map((mode) => {\n                const Icon = mode.icon;\n                return (\n                  <DropdownMenuItem\n                    key={mode.id}\n                    onClick={() => handleModeSelect(mode.id)}\n                    className=\"gap-2\"\n                    disabled={isProcessing}\n                  >\n                    <Icon className=\"h-4 w-4\" />\n                    {mode.label}\n                  </DropdownMenuItem>\n                );\n              })}\n            </DropdownMenuContent>\n          </DropdownMenu>\n          <Button \n            type=\"submit\"\n            size=\"icon\" \n            disabled={!input.trim() || isProcessing}\n            className=\"h-11 w-11 sm:h-12 sm:w-12 bg-primary hover:bg-primary/90 rounded-xl flex-shrink-0\"\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3298, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,iKAAA,CAAA,OAAmB;QAClB,aAAU;QACV,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 3326, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/flashcards-view.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport * as React from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { useQuery, useMutation, useAction } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\nimport { toast } from \"sonner\";\nimport { Sparkles, RotateCw, Trash2, Check, X, Plus, Loader2 } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\n\ninterface FlashcardsViewProps {\n  courseId: Id<\"courses\">;\n}\n\ntype FilterType = \"all\" | \"easy\" | \"medium\" | \"hard\";\n\nexport function FlashcardsView({ courseId }: FlashcardsViewProps) {\n  const [isFlipped, setIsFlipped] = useState(false);\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [topic, setTopic] = useState(\"\");\n  const [count, setCount] = useState(10);\n  const [generating, setGenerating] = useState(false);\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [reviewAll, setReviewAll] = useState(false);\n  const [filter, setFilter] = useState<FilterType>(\"all\");\n\n  const flashcards = useQuery(\n    api.flashcards.getFlashcards, \n    { courseId, includeReviewed: reviewAll }\n  );\n  const reviewFlashcard = useMutation(api.flashcards.reviewFlashcard);\n  const deleteFlashcard = useMutation(api.flashcards.deleteFlashcard);\n  const generateFlashcards = useAction(api.flashcards.generateFlashcards);\n  const saveFlashcards = useMutation(api.flashcards.saveFlashcards);\n\n  // Filter out empty flashcards and apply difficulty filter\n  // Difficulty is based on lastReviewQuality: 5=easy, 3=medium, 1=hard\n  const validFlashcards = flashcards?.filter((f) => {\n    if (!f.question?.trim() || !f.answer?.trim()) return false;\n    \n    // Apply difficulty filter based on last review quality\n    // If no review yet, only show in \"all\" filter\n    if (filter === \"all\") return true;\n    if (!f.lastReviewQuality) return false; // No review yet, only show in \"all\"\n    \n    // Map review quality to difficulty: 5=easy, 4=easy, 3=medium, 2=hard, 1=hard\n    if (filter === \"easy\" && f.lastReviewQuality >= 4) return true;\n    if (filter === \"medium\" && f.lastReviewQuality === 3) return true;\n    if (filter === \"hard\" && f.lastReviewQuality <= 2) return true;\n    \n    return false;\n  }) || [];\n  \n  // Ensure currentIndex is within bounds\n  const safeIndex = validFlashcards.length > 0 \n    ? Math.min(currentIndex, Math.max(0, validFlashcards.length - 1))\n    : 0;\n  const currentFlashcard = validFlashcards.length > 0 ? validFlashcards[safeIndex] : null;\n  \n  // Update index if it's out of bounds\n  useEffect(() => {\n    if (validFlashcards.length > 0 && currentIndex >= validFlashcards.length) {\n      setCurrentIndex(Math.max(0, validFlashcards.length - 1));\n    } else if (validFlashcards.length > 0 && currentIndex < 0) {\n      setCurrentIndex(0);\n    }\n  }, [validFlashcards.length, currentIndex]);\n\n  const handleGenerate = async () => {\n    if (!topic.trim() && count < 1) {\n      toast.error(\"Please enter a topic or set a count\");\n      return;\n    }\n\n    setGenerating(true);\n    try {\n      const generated = await generateFlashcards({\n        courseId,\n        topic: topic.trim() || undefined,\n        count,\n      });\n\n      if (generated.length === 0) {\n        toast.error(\"No flashcards could be generated\");\n        return;\n      }\n\n      await saveFlashcards({\n        courseId,\n        flashcards: generated,\n      });\n\n      toast.success(`Generated ${generated.length} flashcards!`);\n      setDialogOpen(false);\n      setTopic(\"\");\n      setCount(10);\n      setIsFlipped(false);\n      setCurrentIndex(0);\n      \n      // Convex queries are reactive and will automatically update\n      // Reset index in case new flashcards appear\n      setTimeout(() => {\n        setCurrentIndex(0);\n      }, 500);\n    } catch (error) {\n      console.error(\"Generate error:\", error);\n      toast.error(\"Failed to generate flashcards\");\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleReview = async (quality: number) => {\n    if (!currentFlashcard) return;\n\n    try {\n      await reviewFlashcard({\n        flashcardId: currentFlashcard._id,\n        quality,\n      });\n\n      // Move to next flashcard or reset\n      const currentSafeIndex = validFlashcards.length > 0 \n        ? Math.min(currentIndex, Math.max(0, validFlashcards.length - 1))\n        : 0;\n      const nextIndex = currentSafeIndex + 1;\n      if (nextIndex < validFlashcards.length) {\n        setCurrentIndex(nextIndex);\n        setIsFlipped(false);\n      } else {\n        // All flashcards reviewed, reset\n        setCurrentIndex(0);\n        setIsFlipped(false);\n        toast.success(\"All flashcards reviewed! Great job!\");\n      }\n    } catch (error) {\n      console.error(\"Review error:\", error);\n      toast.error(\"Failed to save review\");\n    }\n  };\n\n  const handleDelete = async (flashcardId: Id<\"flashcards\">) => {\n    try {\n      await deleteFlashcard({ flashcardId });\n      toast.success(\"Flashcard deleted\");\n      // Adjust index if needed\n      const currentSafeIndex = validFlashcards.length > 0 \n        ? Math.min(currentIndex, Math.max(0, validFlashcards.length - 1))\n        : 0;\n      if (currentSafeIndex >= validFlashcards.length - 1 && currentSafeIndex > 0) {\n        setCurrentIndex(currentSafeIndex - 1);\n      } else if (validFlashcards.length === 1) {\n        setCurrentIndex(0);\n      }\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n      toast.error(\"Failed to delete flashcard\");\n    }\n  };\n\n  if (flashcards === undefined) {\n    return (\n      <div className=\"h-full flex items-center justify-center\">\n        <Loader2 className=\"h-6 w-6 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  if (validFlashcards.length === 0) {\n    const hasFlashcards = flashcards && flashcards.length > 0;\n    return (\n      <div className=\"h-full flex flex-col items-center justify-center p-6\">\n        <div className=\"w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center mb-4\">\n          <Sparkles className=\"h-8 w-8 text-primary\" />\n        </div>\n        <h3 className=\"text-lg font-semibold mb-2\">\n          {hasFlashcards \n            ? `No ${filter !== \"all\" ? filter : \"\"} flashcards ${reviewAll ? \"available\" : \"due for review\"}`\n            : \"No flashcards to review\"}\n        </h3>\n        <p className=\"text-sm text-muted-foreground mb-6 text-center max-w-md\">\n          {hasFlashcards && filter !== \"all\"\n            ? `Try selecting a different filter or enable \"Review All\" to see all flashcards.`\n            : \"Generate flashcards from your course materials to start practicing with spaced repetition.\"}\n        </p>\n        {hasFlashcards && (filter !== \"all\" || !reviewAll) && (\n          <div className=\"flex gap-2\">\n            {filter !== \"all\" && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setFilter(\"all\")}\n              >\n                Show All\n              </Button>\n            )}\n            {!reviewAll && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setReviewAll(true)}\n              >\n                Review All\n              </Button>\n            )}\n          </div>\n        )}\n        <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n          <DialogTrigger asChild>\n            <Button>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Generate Flashcards\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Generate Flashcards</DialogTitle>\n              <DialogDescription>\n                Create flashcards from your course materials using AI. You can specify a topic or generate general flashcards.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"space-y-4 py-4\">\n              <div>\n                <Label htmlFor=\"topic\">Topic (optional)</Label>\n                <Input\n                  id=\"topic\"\n                  value={topic}\n                  onChange={(e) => setTopic(e.target.value)}\n                  placeholder=\"e.g., SQL basics, Economics principles\"\n                  className=\"mt-1\"\n                />\n              </div>\n              <div>\n                <Label htmlFor=\"count\">Number of flashcards</Label>\n                <Input\n                  id=\"count\"\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"50\"\n                  value={count}\n                  onChange={(e) => setCount(parseInt(e.target.value) || 10)}\n                  className=\"mt-1\"\n                />\n              </div>\n              <Button\n                onClick={handleGenerate}\n                disabled={generating}\n                className=\"w-full\"\n              >\n                {generating ? (\n                  <>\n                    <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Generating...\n                  </>\n                ) : (\n                  <>\n                    <Sparkles className=\"h-4 w-4 mr-2\" />\n                    Generate Flashcards\n                  </>\n                )}\n              </Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col p-6\">\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div>\n            <h2 className=\"text-lg font-semibold\">Flashcards</h2>\n            <p className=\"text-sm text-muted-foreground\">\n              {validFlashcards.length > 0 ? (Math.min(currentIndex, validFlashcards.length - 1) + 1) : 0} of {validFlashcards.length} {reviewAll ? \"total\" : \"due for review\"}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <Button\n              size=\"sm\"\n              variant={reviewAll ? \"default\" : \"outline\"}\n              onClick={() => {\n                setReviewAll(!reviewAll);\n                setCurrentIndex(0);\n              }}\n            >\n              Review All\n            </Button>\n            <Dialog open={dialogOpen} onOpenChange={setDialogOpen}>\n              <DialogTrigger asChild>\n                <Button size=\"sm\" variant=\"outline\">\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Generate More\n                </Button>\n              </DialogTrigger>\n              <DialogContent>\n                <DialogHeader>\n                  <DialogTitle>Generate Flashcards</DialogTitle>\n                  <DialogDescription>\n                    Create flashcards from your course materials using AI.\n                  </DialogDescription>\n                </DialogHeader>\n                <div className=\"space-y-4 py-4\">\n                  <div>\n                    <Label htmlFor=\"topic\">Topic (optional)</Label>\n                    <Input\n                      id=\"topic\"\n                      value={topic}\n                      onChange={(e) => setTopic(e.target.value)}\n                      placeholder=\"e.g., SQL basics, Economics principles\"\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <div>\n                    <Label htmlFor=\"count\">Number of flashcards</Label>\n                    <Input\n                      id=\"count\"\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"50\"\n                      value={count}\n                      onChange={(e) => setCount(parseInt(e.target.value) || 10)}\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  <Button\n                    onClick={handleGenerate}\n                    disabled={generating}\n                    className=\"w-full\"\n                  >\n                    {generating ? (\n                      <>\n                        <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                        Generating...\n                      </>\n                    ) : (\n                      <>\n                        <Sparkles className=\"h-4 w-4 mr-2\" />\n                        Generate Flashcards\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n        </div>\n        \n        {/* Filter buttons */}\n        <div className=\"flex items-center gap-3 mb-4\">\n          <span className=\"text-xs text-muted-foreground mr-1\">Filter:</span>\n          <Button\n            size=\"sm\"\n            variant={filter === \"all\" ? \"default\" : \"outline\"}\n            onClick={() => {\n              setFilter(\"all\");\n              setCurrentIndex(0);\n            }}\n            className=\"h-8 text-xs px-3\"\n          >\n            All\n          </Button>\n          <Button\n            size=\"sm\"\n            variant={filter === \"easy\" ? \"default\" : \"outline\"}\n            onClick={() => {\n              setFilter(\"easy\");\n              setCurrentIndex(0);\n            }}\n            className=\"h-8 text-xs px-3\"\n          >\n            Easy\n          </Button>\n          <Button\n            size=\"sm\"\n            variant={filter === \"medium\" ? \"default\" : \"outline\"}\n            onClick={() => {\n              setFilter(\"medium\");\n              setCurrentIndex(0);\n            }}\n            className=\"h-8 text-xs px-3\"\n          >\n            Medium\n          </Button>\n          <Button\n            size=\"sm\"\n            variant={filter === \"hard\" ? \"default\" : \"outline\"}\n            onClick={() => {\n              setFilter(\"hard\");\n              setCurrentIndex(0);\n            }}\n            className=\"h-8 text-xs px-3\"\n          >\n            Hard\n          </Button>\n        </div>\n        \n        {currentFlashcard && (\n          <div className=\"flex items-center gap-3 text-xs mb-4\">\n            {currentFlashcard.lastReviewQuality ? (\n              <span className={`px-2.5 py-1 rounded-md font-medium ${\n                currentFlashcard.lastReviewQuality >= 4\n                  ? \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\"\n                  : currentFlashcard.lastReviewQuality === 3\n                  ? \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400\"\n                  : \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\"\n              }`}>\n                {currentFlashcard.lastReviewQuality >= 4 ? \"Easy\" : currentFlashcard.lastReviewQuality === 3 ? \"Medium\" : \"Hard\"}\n              </span>\n            ) : (\n              <span className=\"px-2.5 py-1 rounded-md font-medium bg-gray-100 text-gray-700 dark:bg-gray-900/30 dark:text-gray-400\">\n                Not Reviewed\n              </span>\n            )}\n            <span className=\"text-muted-foreground\">\n              {currentFlashcard.repetitions} reviews\n            </span>\n          </div>\n        )}\n      </div>\n\n      <div className=\"flex-1 flex items-center justify-center\">\n        <Card\n          className=\"w-full max-w-2xl h-[400px] cursor-pointer relative overflow-hidden\"\n          onClick={() => setIsFlipped(!isFlipped)}\n        >\n          {!isFlipped ? (\n            <div className=\"absolute inset-0 p-8 flex flex-col\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">Question</span>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-7 w-7\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    if (currentFlashcard) {\n                      handleDelete(currentFlashcard._id);\n                    }\n                  }}\n                >\n                  <Trash2 className=\"h-4 w-4 text-destructive\" />\n                </Button>\n              </div>\n              <div className=\"flex-1 flex items-center justify-center px-4\">\n                <p className=\"text-xl font-medium text-center leading-relaxed\">{currentFlashcard?.question}</p>\n              </div>\n              <div className=\"text-center text-sm text-muted-foreground mt-6\">\n                Click to reveal answer\n              </div>\n            </div>\n          ) : (\n            <div className=\"absolute inset-0 p-8 flex flex-col\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">Answer</span>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"h-7 w-7\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    setIsFlipped(false);\n                  }}\n                >\n                  <RotateCw className=\"h-4 w-4\" />\n                </Button>\n              </div>\n              <div className=\"flex-1 flex items-center justify-center px-4\">\n                <p className=\"text-lg text-center leading-relaxed\">{currentFlashcard?.answer}</p>\n              </div>\n              <div className=\"flex gap-4 justify-center pt-4 mt-4\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleReview(1); // Hard\n                  }}\n                  className=\"gap-2 px-5\"\n                >\n                  <X className=\"h-4 w-4 text-red-500\" />\n                  Hard\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleReview(3); // Medium\n                  }}\n                  className=\"gap-2 px-5\"\n                >\n                  Medium\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleReview(5); // Easy\n                  }}\n                  className=\"gap-2 px-5\"\n                >\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                  Easy\n                </Button>\n              </div>\n            </div>\n          )}\n        </Card>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 4302, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/exam-generator-view.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport { useQuery, useAction, useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\nimport { toast } from \"sonner\";\nimport { FileQuestion, Loader2, Download, CheckCircle, XCircle, Clock, Trash2 } from \"lucide-react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\n\ninterface ExamGeneratorViewProps {\n  courseId: Id<\"courses\">;\n}\n\nexport function ExamGeneratorView({ courseId }: ExamGeneratorViewProps) {\n  const [questionCount, setQuestionCount] = useState(15);\n  const [difficulty, setDifficulty] = useState<\"easy\" | \"medium\" | \"hard\" | \"mixed\">(\"mixed\");\n  const [generating, setGenerating] = useState(false);\n  const [viewingWorkflowId, setViewingWorkflowId] = useState<Id<\"examWorkflows\"> | null>(null);\n\n  const workflows = useQuery(api.examGenerator.getWorkflowsByCourse, { courseId });\n  const generateExam = useAction(api.examGenerator.generatePracticeExam);\n  const exportExam = useAction(api.examGenerator.exportExamAsPDF);\n  const deleteWorkflow = useMutation(api.examGenerator.deleteWorkflow);\n\n  const handleGenerate = async () => {\n    setGenerating(true);\n    try {\n      const workflowId = await generateExam({\n        courseId,\n        questionCount,\n        difficulty,\n      });\n      toast.success(\"Exam generation started! This may take a few moments.\");\n    } catch (error) {\n      console.error(\"Generate error:\", error);\n      toast.error(error instanceof Error ? error.message : \"Failed to generate exam\");\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleExport = async (workflowId: Id<\"examWorkflows\">) => {\n    try {\n      const html = await exportExam({ workflowId });\n      \n      // Create a blob and download\n      const blob = new Blob([html], { type: \"text/html\" });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = `practice-exam-${Date.now()}.html`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      \n      toast.success(\"Exam exported! Open the HTML file and print to PDF.\");\n    } catch (error) {\n      console.error(\"Export error:\", error);\n      toast.error(\"Failed to export exam\");\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return <CheckCircle className=\"h-4 w-4 text-green-500\" />;\n      case \"failed\":\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return <Clock className=\"h-4 w-4 text-yellow-500 animate-spin\" />;\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case \"analyzing\":\n        return \"Analyzing course materials...\";\n      case \"identifying_topics\":\n        return \"Identifying key topics...\";\n      case \"generating_questions\":\n        return \"Generating questions...\";\n      case \"completed\":\n        return \"Completed\";\n      case \"failed\":\n        return \"Failed\";\n      default:\n        return status;\n    }\n  };\n\n  const handleDelete = async (workflowId: Id<\"examWorkflows\">) => {\n    if (!confirm(\"Are you sure you want to delete this practice exam? This action cannot be undone.\")) {\n      return;\n    }\n\n    try {\n      await deleteWorkflow({ workflowId });\n      toast.success(\"Practice exam deleted\");\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n      toast.error(\"Failed to delete practice exam\");\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col p-6\">\n      <div className=\"mb-6\">\n        <h2 className=\"text-lg font-semibold mb-2\">Practice Exam Generator</h2>\n        <p className=\"text-sm text-muted-foreground\">\n          Generate practice exams from your course materials using AI. The system will analyze your content, identify key topics, and create exam questions.\n        </p>\n      </div>\n\n      <Card className=\"p-6 mb-6\">\n        <h3 className=\"font-semibold mb-4\">Generate New Exam</h3>\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"questionCount\">Number of Questions</Label>\n              <Input\n                id=\"questionCount\"\n                type=\"number\"\n                min=\"5\"\n                max=\"50\"\n                value={questionCount}\n                onChange={(e) => {\n                  const val = e.target.value;\n                  if (val === \"\") {\n                    setQuestionCount(15);\n                  } else {\n                    const num = parseInt(val, 10);\n                    if (!isNaN(num) && num >= 5 && num <= 50) {\n                      setQuestionCount(num);\n                    }\n                  }\n                }}\n                className=\"mt-1\"\n              />\n          </div>\n          <div>\n            <Label htmlFor=\"difficulty\">Difficulty</Label>\n            <select\n              id=\"difficulty\"\n              value={difficulty}\n              onChange={(e) => setDifficulty(e.target.value as any)}\n              className=\"mt-1 flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n            >\n              <option value=\"mixed\">Mixed (Recommended)</option>\n              <option value=\"easy\">Easy</option>\n              <option value=\"medium\">Medium</option>\n              <option value=\"hard\">Hard</option>\n            </select>\n          </div>\n          <Button\n            onClick={handleGenerate}\n            disabled={generating}\n            className=\"w-full\"\n          >\n            {generating ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Generating Exam...\n              </>\n            ) : (\n              <>\n                <FileQuestion className=\"h-4 w-4 mr-2\" />\n                Generate Practice Exam\n              </>\n            )}\n          </Button>\n        </div>\n      </Card>\n\n      {workflows && workflows.length > 0 && (\n        <div>\n          <h3 className=\"font-semibold mb-4\">Generated Exams</h3>\n          <div className=\"space-y-3\">\n            {workflows.map((workflow) => (\n              <Card \n                key={workflow._id} \n                className={`p-4 ${workflow.status === \"completed\" ? \"cursor-pointer hover:bg-muted/50 transition-colors\" : \"\"}`}\n                onClick={() => workflow.status === \"completed\" && setViewingWorkflowId(workflow._id)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3 flex-1\">\n                    {getStatusIcon(workflow.status)}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <p className=\"font-medium\">\n                          {workflow.questions?.length || 0} Questions\n                        </p>\n                        {workflow.difficulty && (\n                          <span className={`text-xs px-2 py-0.5 rounded ${\n                            workflow.difficulty === \"easy\"\n                              ? \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\"\n                              : workflow.difficulty === \"medium\"\n                              ? \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400\"\n                              : workflow.difficulty === \"hard\"\n                              ? \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\"\n                              : \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400\"\n                          }`}>\n                            {workflow.difficulty.toUpperCase()}\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {getStatusText(workflow.status)} ‚Ä¢ {new Date(workflow.createdAt).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\" onClick={(e) => e.stopPropagation()}>\n                    {workflow.status === \"completed\" && (\n                      <>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => setViewingWorkflowId(workflow._id)}\n                        >\n                          View\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          onClick={() => handleExport(workflow._id)}\n                        >\n                          <Download className=\"h-4 w-4 mr-2\" />\n                          Export\n                        </Button>\n                      </>\n                    )}\n                    <Button\n                      size=\"sm\"\n                      variant=\"outline\"\n                      onClick={() => handleDelete(workflow._id)}\n                      className=\"text-destructive hover:text-destructive\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n                {workflow.identifiedTopics && workflow.identifiedTopics.length > 0 && (\n                  <div className=\"mt-3\">\n                    <p className=\"text-xs text-muted-foreground mb-1\">Topics:</p>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {workflow.identifiedTopics.slice(0, 5).map((topic, idx) => (\n                        <span\n                          key={idx}\n                          className=\"text-xs px-2 py-1 bg-muted rounded-md\"\n                        >\n                          {topic}\n                        </span>\n                      ))}\n                      {workflow.identifiedTopics.length > 5 && (\n                        <span className=\"text-xs px-2 py-1 text-muted-foreground\">\n                          +{workflow.identifiedTopics.length - 5} more\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                )}\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {/* Quiz Viewer */}\n      {viewingWorkflowId && (\n        <QuizViewer\n          workflowId={viewingWorkflowId}\n          onClose={() => setViewingWorkflowId(null)}\n        />\n      )}\n    </div>\n  );\n}\n\n// Quiz Viewer Component\nfunction QuizViewer({ \n  workflowId, \n  onClose \n}: { \n  workflowId: Id<\"examWorkflows\">; \n  onClose: () => void;\n}) {\n  const workflow = useQuery(api.examGenerator.getWorkflow, { workflowId });\n  const [showAnswers, setShowAnswers] = useState(false);\n\n  if (!workflow || workflow.status !== \"completed\" || !workflow.questions) {\n    return null;\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 flex items-center justify-center p-4\">\n      <div className=\"bg-background border rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\n        <div className=\"border-b p-4 flex items-center justify-between flex-shrink-0\">\n          <div>\n            <h2 className=\"text-xl font-semibold\">Practice Exam</h2>\n            <p className=\"text-sm text-muted-foreground\">\n              {workflow.questions.length} Questions ‚Ä¢ Generated {new Date(workflow.createdAt).toLocaleDateString()}\n            </p>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              onClick={() => setShowAnswers(!showAnswers)}\n            >\n              {showAnswers ? \"Hide\" : \"Show\"} Answers\n            </Button>\n            <Button\n              size=\"sm\"\n              variant=\"outline\"\n              onClick={onClose}\n            >\n              Close\n            </Button>\n          </div>\n        </div>\n        \n        <div className=\"flex-1 overflow-y-auto p-6\">\n          <div className=\"space-y-6\">\n            {workflow.questions.map((q, idx) => (\n              <Card key={idx} className=\"p-4\">\n                <div className=\"flex items-start justify-between mb-3\">\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"font-semibold\">Question {idx + 1}</span>\n                    <span className={`text-xs px-2 py-0.5 rounded ${\n                      q.difficulty === \"easy\" \n                        ? \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\"\n                        : q.difficulty === \"medium\"\n                        ? \"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400\"\n                        : \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\"\n                    }`}>\n                      {q.difficulty.toUpperCase()}\n                    </span>\n                  </div>\n                </div>\n                <p className=\"mb-4 text-base\">{q.question}</p>\n                \n                {q.type === \"multiple_choice\" && q.options && (\n                  <ol className=\"list-[upper-alpha] list-inside space-y-2 mb-4 ml-4\">\n                    {q.options.map((opt, optIdx) => (\n                      <li key={optIdx} className=\"text-sm\">{opt}</li>\n                    ))}\n                  </ol>\n                )}\n                \n                {showAnswers && (\n                  <div className=\"mt-4 p-3 bg-muted rounded-lg border-l-4 border-primary\">\n                    <p className=\"font-semibold text-sm mb-1\">Answer:</p>\n                    <p className=\"text-sm mb-2\">{q.correctAnswer}</p>\n                    {q.explanation && (\n                      <>\n                        <p className=\"font-semibold text-sm mb-1\">Explanation:</p>\n                        <p className=\"text-sm text-muted-foreground\">{q.explanation}</p>\n                      </>\n                    )}\n                  </div>\n                )}\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 5077, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/course-files-view.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowLeft, Upload, FileText, Trash2, Bot, ChevronDown, Sparkles, BookOpen, HelpCircle, Lightbulb, ListChecks, FileQuestion, ChevronLeft, ChevronRight, Layers, GraduationCap } from \"lucide-react\";\nimport { Course } from \"./courses-page\";\nimport { UploadFileDialog } from \"./upload-file-dialog\";\nimport { CourseAIChatBox } from \"./course-ai-chat-box\";\nimport { FlashcardsView } from \"./flashcards-view\";\nimport { ExamGeneratorView } from \"./exam-generator-view\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { toast } from \"sonner\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ConfirmDialog } from \"@/components/confirm-dialog\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface CourseFilesViewProps {\n  course: Course;\n  onBack: () => void;\n}\n\ntype GenerateMode = \"practice-questions\" | \"summary\" | \"key-concepts\" | \"study-guide\" | \"flashcards\" | \"explain\" | null;\ntype ViewMode = \"chat\" | \"flashcards\" | \"exam\";\n\nconst GENERATE_MODES = [\n  { id: \"practice-questions\" as const, label: \"Practice Questions\", icon: FileQuestion },\n  { id: \"summary\" as const, label: \"Summary\", icon: BookOpen },\n  { id: \"key-concepts\" as const, label: \"Key Concepts\", icon: Lightbulb },\n  { id: \"study-guide\" as const, label: \"Study Guide\", icon: ListChecks },\n  { id: \"flashcards\" as const, label: \"Flashcards\", icon: Sparkles },\n  { id: \"explain\" as const, label: \"Explain Concept\", icon: HelpCircle },\n];\n\nexport function CourseFilesView({ course, onBack }: CourseFilesViewProps) {\n  const files = useQuery(api.files.getFilesByCourse, { courseId: course._id as any });\n  const deleteFile = useMutation(api.files.deleteFile);\n  const [uploadDialogOpen, setUploadDialogOpen] = useState(false);\n  const [generateMode, setGenerateMode] = useState<GenerateMode>(null);\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [confirmDeleteOpen, setConfirmDeleteOpen] = useState(false);\n  const [fileToDelete, setFileToDelete] = useState<string | null>(null);\n  const [filesCollapsed, setFilesCollapsed] = useState(true);\n  const [viewMode, setViewMode] = useState<ViewMode>(\"chat\");\n\n  const handleDeleteClick = (fileId: string) => {\n    setFileToDelete(fileId);\n    setConfirmDeleteOpen(true);\n  };\n\n  const handleConfirmDelete = async () => {\n    if (!fileToDelete) return;\n\n    setDeletingId(fileToDelete);\n    setConfirmDeleteOpen(false);\n\n    try {\n      await deleteFile({ id: fileToDelete as any });\n      toast.success(\"File deleted successfully\");\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n      toast.error(\"Failed to delete file\");\n    } finally {\n      setDeletingId(null);\n      setFileToDelete(null);\n    }\n  };\n\n  const formatDate = (timestamp: number) => {\n    return new Date(timestamp).toLocaleDateString();\n  };\n\n  if (files === undefined) {\n    return <LoadingSkeleton onBack={onBack} course={course} />;\n  }\n\n  const courseColor = course.color || \"#3b82f6\";\n  const courseEmoji = course.emoji || \"üìö\";\n\n  return (\n    <div className=\"fixed inset-0 flex flex-col bg-background z-50\" style={{ height: \"100dvh\", width: \"100vw\" }}>\n      {/* Main Content - Two Column Layout */}\n      <div className=\"flex-1 flex\" style={{ minHeight: 0, overflow: \"hidden\" }}>\n        {/* Left Sidebar - Files */}\n        {!filesCollapsed && (\n          <div className=\"hidden md:flex w-[280px] overflow-y-auto border-r bg-muted/30 transition-all duration-300 relative flex flex-col flex-shrink-0\">\n            {/* Sidebar Header */}\n            <div className=\"p-3 sm:p-4 border-b bg-background flex-shrink-0\">\n              <div className=\"flex items-center justify-between gap-2 sm:gap-3 mb-3 sm:mb-4\">\n                <div className=\"flex items-center gap-2 sm:gap-3 flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 flex-1 min-w-0\">\n                    <span className=\"text-xl sm:text-2xl flex-shrink-0\">{courseEmoji}</span>\n                    <div className=\"flex-1 min-w-0\">\n                      <h2 \n                        className=\"font-semibold text-xs sm:text-sm truncate\"\n                        style={{ color: course.color ? courseColor : undefined }}\n                      >\n                        {course.name}\n                      </h2>\n                    </div>\n                  </div>\n                </div>\n                {/* Collapse Button */}\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  onClick={() => setFilesCollapsed(true)}\n                  className=\"h-7 w-7 bg-muted hover:bg-muted/80 flex-shrink-0\"\n                  title=\"Hide files\"\n                >\n                  <ChevronLeft className=\"h-3.5 w-3.5\" />\n                </Button>\n              </div>\n              \n              <div className=\"flex gap-1.5 sm:gap-2\">\n                <Button \n                  onClick={() => setUploadDialogOpen(true)} \n                  size=\"sm\"\n                  className=\"flex-1 gap-1.5 text-xs h-8\"\n                >\n                  <Upload className=\"h-3.5 w-3.5\" />\n                  <span>Upload</span>\n                </Button>\n              </div>\n              \n              {generateMode && (\n                <div className=\"mt-2 flex items-center gap-2 p-1.5 bg-primary/10 rounded-md border border-primary/20\">\n                  <Sparkles className=\"h-3 w-3 text-primary flex-shrink-0\" />\n                  <span className=\"text-xs font-medium flex-1 truncate\">\n                    {GENERATE_MODES.find(m => m.id === generateMode)?.label}\n                  </span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-5 w-5 flex-shrink-0\"\n                    onClick={() => setGenerateMode(null)}\n                  >\n                    √ó\n                  </Button>\n                </div>\n              )}\n            </div>\n\n            {/* Files List */}\n            <div className=\"flex-1 overflow-y-auto p-2\">\n              {files.length === 0 ? (\n                <div className=\"text-center py-12 px-4\">\n                  <div className=\"w-12 h-12 mx-auto mb-3 rounded-lg bg-primary/10 flex items-center justify-center\">\n                    <FileText className=\"h-6 w-6 text-primary/60\" />\n                  </div>\n                  <h3 className=\"text-sm font-semibold mb-1\">No files yet</h3>\n                  <p className=\"text-xs text-muted-foreground mb-3\">\n                    Upload your first PDF\n                  </p>\n                  <Button \n                    onClick={() => setUploadDialogOpen(true)} \n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"text-xs h-7\"\n                  >\n                    <Upload className=\"h-3 w-3 mr-1\" />\n                    Upload\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-1\">\n                  <div className=\"px-2 py-1.5\">\n                    <h2 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider\">\n                      Files ({files.length})\n                    </h2>\n                  </div>\n                  <div className=\"space-y-0.5\">\n                    {files.map((file) => (\n                      <button\n                        key={file._id}\n                        className=\"w-full group\"\n                        onClick={() => {}}\n                      >\n                        <div \n                          className=\"flex items-center gap-2 px-2 py-2 rounded-md hover:bg-muted transition-colors relative group/item\"\n                        >\n                          <div \n                            className=\"w-5 h-5 rounded flex items-center justify-center flex-shrink-0 transition-colors\"\n                            style={{\n                              backgroundColor: course.color ? `${courseColor}15` : undefined,\n                            }}\n                          >\n                            <FileText className=\"h-3 w-3\" style={{ color: course.color ? courseColor : undefined }} />\n                          </div>\n                          <div className=\"flex-1 min-w-0 text-left\">\n                            <p className=\"text-xs font-medium line-clamp-1 truncate\">\n                              {file.name}\n                            </p>\n                            <p className=\"text-[10px] text-muted-foreground mt-0.5\">\n                              {formatDate(file.uploadDate)}\n                            </p>\n                          </div>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleDeleteClick(file._id);\n                            }}\n                            className=\"h-6 w-6 hover:bg-destructive/10 opacity-0 group-hover/item:opacity-100 transition-opacity\"\n                            disabled={deletingId === file._id}\n                          >\n                            <Trash2 className=\"h-3 w-3 text-destructive\" />\n                          </Button>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Right Side - AI Panel */}\n        <div className=\"flex-1 flex flex-col relative bg-background min-w-0\">\n          {/* Top Bar */}\n          <div className=\"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4 sm:px-6 py-2.5 sm:py-3 flex items-center justify-between flex-shrink-0\">\n            <div className=\"flex items-center gap-2 sm:gap-3 min-w-0 flex-1\">\n              <div className=\"flex items-center gap-2\">\n                {filesCollapsed && (\n                  <>\n                    {/* Expand sidebar button - with distinct styling */}\n                    <Button\n                      variant=\"outline\"\n                      size=\"icon\"\n                      onClick={() => setFilesCollapsed(false)}\n                      className=\"h-8 w-8 flex-shrink-0\"\n                      title=\"Show files\"\n                    >\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                    {/* Back button with text - with different styling */}\n                    <Button \n                      variant=\"ghost\" \n                      onClick={onBack} \n                      className=\"h-8 gap-1.5 px-3 flex-shrink-0 hover:bg-muted\"\n                    >\n                      <ArrowLeft className=\"h-4 w-4\" />\n                      <span className=\"text-sm\">Back to Courses</span>\n                    </Button>\n                  </>\n                )}\n              </div>\n              <div className=\"flex items-center gap-2 min-w-0\">\n                <span className=\"text-lg sm:text-xl flex-shrink-0\">{courseEmoji}</span>\n                <div className=\"min-w-0\">\n                  <h1 \n                    className=\"text-sm sm:text-base font-semibold truncate\"\n                    style={{ color: course.color ? courseColor : undefined }}\n                  >\n                    {course.name}\n                  </h1>\n                  <p className=\"text-xs text-muted-foreground truncate hidden sm:block\">{course.description || \"No description\"}</p>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-1.5 sm:gap-2 flex-shrink-0\">\n              {filesCollapsed && (\n                <>\n                  <Button \n                    onClick={() => setUploadDialogOpen(true)} \n                    size=\"sm\"\n                    variant=\"outline\"\n                    className=\"gap-1.5 text-xs h-8 px-2 sm:px-3\"\n                  >\n                    <Upload className=\"h-3.5 w-3.5\" />\n                    <span className=\"hidden sm:inline\">Upload</span>\n                  </Button>\n                  {viewMode === \"chat\" && (\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button variant=\"outline\" size=\"sm\" className=\"gap-1.5 text-xs h-8 px-2\">\n                          <Sparkles className=\"h-3.5 w-3.5\" />\n                          <span className=\"hidden sm:inline\">Generate</span>\n                          <ChevronDown className=\"h-3 w-3\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\" className=\"w-56\">\n                        {GENERATE_MODES.map((mode) => {\n                          const Icon = mode.icon;\n                          return (\n                            <DropdownMenuItem\n                              key={mode.id}\n                              onClick={() => setGenerateMode(mode.id)}\n                              className=\"gap-2\"\n                            >\n                              <Icon className=\"h-4 w-4\" />\n                              {mode.label}\n                            </DropdownMenuItem>\n                          );\n                        })}\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  )}\n                </>\n              )}\n            </div>\n          </div>\n\n          {/* Tabs */}\n          <div className=\"border-b bg-background flex-shrink-0\">\n            <div className=\"flex gap-1 px-4\">\n              <Button\n                variant={viewMode === \"chat\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setViewMode(\"chat\")}\n                className=\"rounded-b-none\"\n              >\n                <Bot className=\"h-4 w-4 mr-2\" />\n                Chat\n              </Button>\n              <Button\n                variant={viewMode === \"flashcards\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setViewMode(\"flashcards\")}\n                className=\"rounded-b-none\"\n              >\n                <Layers className=\"h-4 w-4 mr-2\" />\n                Flashcards\n              </Button>\n              <Button\n                variant={viewMode === \"exam\" ? \"default\" : \"ghost\"}\n                size=\"sm\"\n                onClick={() => setViewMode(\"exam\")}\n                className=\"rounded-b-none\"\n              >\n                <GraduationCap className=\"h-4 w-4 mr-2\" />\n                Practice Exam\n              </Button>\n            </div>\n          </div>\n\n          {/* Content Area */}\n          <div className=\"flex-1 overflow-hidden min-h-0 flex flex-col\">\n            {viewMode === \"chat\" && (\n              <CourseAIChatBox\n                courseName={course.name}\n                courseId={course._id}\n                generateMode={generateMode}\n                onModeChange={setGenerateMode}\n              />\n            )}\n            {viewMode === \"flashcards\" && (\n              <FlashcardsView courseId={course._id} />\n            )}\n            {viewMode === \"exam\" && (\n              <ExamGeneratorView courseId={course._id} />\n            )}\n          </div>\n        </div>\n      </div>\n\n      <UploadFileDialog\n        open={uploadDialogOpen}\n        onOpenChange={setUploadDialogOpen}\n        courseName={course.name}\n        courseId={course._id as any}\n      />\n\n      <ConfirmDialog\n        open={confirmDeleteOpen}\n        onOpenChange={setConfirmDeleteOpen}\n        onConfirm={handleConfirmDelete}\n        title=\"Delete File\"\n        description=\"Are you sure you want to delete this file? This action cannot be undone.\"\n        confirmText=\"Delete File\"\n        cancelText=\"Cancel\"\n        destructive={true}\n      />\n    </div>\n  );\n}\n\nfunction LoadingSkeleton({\n  onBack,\n  course,\n}: {\n  onBack: () => void;\n  course: Course;\n}) {\n  const courseEmoji = course.emoji || \"üìö\";\n\n  return (\n    <div className=\"h-screen flex flex-col bg-background\">\n      <div className=\"flex-1 flex overflow-hidden\">\n        {/* Left Sidebar */}\n        <div className=\"w-[280px] border-r bg-muted/30 p-4\">\n          <Skeleton className=\"h-8 w-full mb-4\" />\n          <Skeleton className=\"h-6 w-20 mb-2\" />\n          <div className=\"space-y-1\">\n            {[...Array(3)].map((_, i) => (\n              <Skeleton key={i} className=\"h-12 w-full rounded-md\" />\n            ))}\n          </div>\n        </div>\n\n        {/* Right Side */}\n        <div className=\"flex-1 flex flex-col\">\n          <div className=\"border-b px-6 py-3\">\n            <Skeleton className=\"h-6 w-48\" />\n          </div>\n          <div className=\"flex-1 p-6\">\n            <Skeleton className=\"h-full w-full rounded-lg\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 6045, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/src/app/%28main%29/courses/courses-page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { CoursesList } from \"./courses-list\";\nimport { CourseFilesView } from \"./course-files-view\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\n\nexport type Course = {\n  _id: Id<\"courses\">;\n  name: string;\n  description: string;\n  fileCount: number;\n  userId: string;\n  createdAt: number;\n  emoji?: string;\n  color?: string;\n};\n\nexport type CourseFile = {\n  _id: Id<\"files\">;\n  name: string;\n  courseId: Id<\"courses\">;\n  uploadDate: number;\n  userId: string;\n  storageId: Id<\"_storage\">;\n};\n\nexport function CoursesPage() {\n  const [selectedCourse, setSelectedCourse] = useState<Course | null>(null);\n\n  if (!selectedCourse) {\n    return <CoursesList onSelectCourse={setSelectedCourse} />;\n  }\n\n  return (\n    <CourseFilesView\n      course={selectedCourse}\n      onBack={() => setSelectedCourse(null)}\n    />\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AA2BO,SAAS;IACd,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEpE,IAAI,CAAC,gBAAgB;QACnB,qBAAO,8OAAC,qJAAA,CAAA,cAAW;YAAC,gBAAgB;;;;;;IACtC;IAEA,qBACE,8OAAC,6JAAA,CAAA,kBAAe;QACd,QAAQ;QACR,QAAQ,IAAM,kBAAkB;;;;;;AAGtC","debugId":null}}]
}