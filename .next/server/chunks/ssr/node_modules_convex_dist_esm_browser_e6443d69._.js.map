{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/stream.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/constants.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/node-gyp-build%404.8.4/node_modules/node-gyp-build/node-gyp-build.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/node-gyp-build%404.8.4/node_modules/node-gyp-build/index.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/bufferutil%404.0.9/node_modules/bufferutil/fallback.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/bufferutil%404.0.9/node_modules/bufferutil/index.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/buffer-util.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/limiter.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/permessage-deflate.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/utf-8-validate%405.0.10/node_modules/utf-8-validate/fallback.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/utf-8-validate%405.0.10/node_modules/utf-8-validate/index.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/validation.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/receiver.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/sender.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/event-target.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/extension.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/websocket.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/subprotocol.js","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/lib/websocket-server.js","file:///Users/kirannew/StudyLens%20AI/node_modules/convex/src/browser/simple_client-node.ts","file:///Users/kirannew/StudyLens%20AI/node_modules/common/temp/node_modules/.pnpm/ws%408.18.0_bufferutil%404.0.9_utf-8-validate%405.0.10/node_modules/ws/wrapper.mjs"],"sourcesContent":["'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : (isNwjs() ? 'node-webkit' : 'node')\n\nvar arch = process.env.npm_config_arch || os.arch()\nvar platform = process.env.npm_config_platform || os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.resolve(dir))\n}\n\nload.resolve = load.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime && tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi && tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isNwjs () {\n  return !!(process.versions && process.versions.nw)\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","const runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\nif (typeof runtimeRequire.addon === 'function') { // if the platform supports native resolving prefer that\n  module.exports = runtimeRequire.addon.bind(runtimeRequire)\n} else { // else use the runtime version here\n  module.exports = require('./node-gyp-build.js')\n}\n","'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","import {\n  ConvexClient,\n  setDefaultWebSocketConstructor,\n} from \"./simple_client.js\";\n\n// This file is compiled with `bundle: true` with an exception for\n// `./simple_client.js` so this \"ws\" import will be inlined.\nimport ws from \"ws\";\nconst nodeWebSocket = ws as unknown as typeof WebSocket;\n\nsetDefaultWebSocketConstructor(nodeWebSocket);\n\nexport { ConvexClient };\n","import createWebSocketStream from './lib/stream.js';\nimport Receiver from './lib/receiver.js';\nimport Sender from './lib/sender.js';\nimport WebSocket from './lib/websocket.js';\nimport WebSocketServer from './lib/websocket-server.js';\n\nexport { createWebSocketStream, Receiver, Sender, WebSocket, WebSocketServer };\nexport default WebSocket;\n"],"names":["createWebSocketStream","err","dir","platform","arch","runtime","abi","require_node_gyp_build","mask","data","require_fallback","Receiver","Sender","Receiver","Sender","WebSocket","key","protocol","WebSocket","WebSocketServer","WebSocket"],"mappings":";;;;AmBAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AnBAA,IAAA,iBAAA,WAAA;IAAA,oHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,MAAA,CAAO,CAAA,GAAI,UAAQ,QAAQ;QAQnC,SAAS,UAAU,MAAA,EAAQ;YACzB,OAAO,IAAA,CAAK,OAAO;QACrB;QAOA,SAAS,cAAc;YACrB,IAAI,CAAC,IAAA,CAAK,SAAA,IAAa,IAAA,CAAK,cAAA,CAAe,QAAA,EAAU;gBACnD,IAAA,CAAK,OAAA,CAAQ;YACf;QACF;QAQA,SAAS,cAAc,GAAA,EAAK;YAC1B,IAAA,CAAK,cAAA,CAAe,SAAS,aAAa;YAC1C,IAAA,CAAK,OAAA,CAAQ;YACb,IAAI,IAAA,CAAK,aAAA,CAAc,OAAO,MAAM,GAAG;gBAErC,IAAA,CAAK,IAAA,CAAK,SAAS,GAAG;YACxB;QACF;QAUA,SAASA,uBAAsB,EAAA,EAAI,OAAA,EAAS;YAC1C,IAAI,qBAAqB;YAEzB,MAAM,SAAS,IAAI,OAAO;gBACxB,GAAG,OAAA;gBACH,aAAa;gBACb,WAAW;gBACX,YAAY;gBACZ,oBAAoB;YACtB,CAAC;YAED,GAAG,EAAA,CAAG,WAAW,SAAS,QAAQ,GAAA,EAAK,QAAA,EAAU;gBAC/C,MAAM,OACJ,CAAC,YAAY,OAAO,cAAA,CAAe,UAAA,GAAa,IAAI,QAAA,CAAS,IAAI;gBAEnE,IAAI,CAAC,OAAO,IAAA,CAAK,IAAI,EAAG,CAAA,GAAG,KAAA,CAAM;YACnC,CAAC;YAED,GAAG,IAAA,CAAK,SAAS,SAAS,MAAM,GAAA,EAAK;gBACnC,IAAI,OAAO,SAAA,CAAW,CAAA;gBAWtB,qBAAqB;gBACrB,OAAO,OAAA,CAAQ,GAAG;YACpB,CAAC;YAED,GAAG,IAAA,CAAK,SAAS,SAAS,QAAQ;gBAChC,IAAI,OAAO,SAAA,CAAW,CAAA;gBAEtB,OAAO,IAAA,CAAK,IAAI;YAClB,CAAC;YAED,OAAO,QAAA,GAAW,SAAU,GAAA,EAAK,QAAA,EAAU;gBACzC,IAAI,GAAG,UAAA,KAAe,GAAG,MAAA,EAAQ;oBAC/B,SAAS,GAAG;oBACZ,QAAQ,QAAA,CAAS,WAAW,MAAM;oBAClC;gBACF;gBAEA,IAAI,SAAS;gBAEb,GAAG,IAAA,CAAK,SAAS,SAAS,MAAMC,IAAAA,EAAK;oBACnC,SAAS;oBACT,SAASA,IAAG;gBACd,CAAC;gBAED,GAAG,IAAA,CAAK,SAAS,SAAS,QAAQ;oBAChC,IAAI,CAAC,OAAQ,CAAA,SAAS,GAAG;oBACzB,QAAQ,QAAA,CAAS,WAAW,MAAM;gBACpC,CAAC;gBAED,IAAI,mBAAoB,CAAA,GAAG,SAAA,CAAU;YACvC;YAEA,OAAO,MAAA,GAAS,SAAU,QAAA,EAAU;gBAClC,IAAI,GAAG,UAAA,KAAe,GAAG,UAAA,EAAY;oBACnC,GAAG,IAAA,CAAK,QAAQ,SAAS,OAAO;wBAC9B,OAAO,MAAA,CAAO,QAAQ;oBACxB,CAAC;oBACD;gBACF;gBAMA,IAAI,GAAG,OAAA,KAAY,KAAM,CAAA;gBAEzB,IAAI,GAAG,OAAA,CAAQ,cAAA,CAAe,QAAA,EAAU;oBACtC,SAAS;oBACT,IAAI,OAAO,cAAA,CAAe,UAAA,CAAY,CAAA,OAAO,OAAA,CAAQ;gBACvD,OAAO;oBACL,GAAG,OAAA,CAAQ,IAAA,CAAK,UAAU,SAAS,SAAS;wBAI1C,SAAS;oBACX,CAAC;oBACD,GAAG,KAAA,CAAM;gBACX;YACF;YAEA,OAAO,KAAA,GAAQ,WAAY;gBACzB,IAAI,GAAG,QAAA,CAAU,CAAA,GAAG,MAAA,CAAO;YAC7B;YAEA,OAAO,MAAA,GAAS,SAAU,KAAA,EAAO,QAAA,EAAU,QAAA,EAAU;gBACnD,IAAI,GAAG,UAAA,KAAe,GAAG,UAAA,EAAY;oBACnC,GAAG,IAAA,CAAK,QAAQ,SAAS,OAAO;wBAC9B,OAAO,MAAA,CAAO,OAAO,UAAU,QAAQ;oBACzC,CAAC;oBACD;gBACF;gBAEA,GAAG,IAAA,CAAK,OAAO,QAAQ;YACzB;YAEA,OAAO,EAAA,CAAG,OAAO,WAAW;YAC5B,OAAO,EAAA,CAAG,SAAS,aAAa;YAChC,OAAO;QACT;QAEA,OAAO,OAAA,GAAUD;IAAA;AAAA;;AC9JjB,IAAA,oBAAA,WAAA;IAAA,uHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,eAAe;YAAC;YAAc;YAAe,WAAW;SAAA;QAC9D,IAAM,UAAU,OAAO,SAAS;QAEhC,IAAI,QAAS,CAAA,aAAa,IAAA,CAAK,MAAM;QAErC,OAAO,OAAA,GAAU;YACf;YACA,cAAc,OAAO,KAAA,CAAM,CAAC;YAC5B,MAAM;YACN;YACA,sBAAsB,OAAO,wBAAwB;YACrD,WAAW,OAAO,WAAW;YAC7B,aAAa,OAAO,aAAa;YACjC,YAAY,OAAO,WAAW;YAC9B,MAAM,KAAO,CAAD;QACd;IAAA;AAAA;;ACjBA,IAAA,yBAAA,WAAA;IAAA,wGAAA,OAAA,EAAA,MAAA;QAAA,IAAI,KAAK,UAAQ,IAAI;QACrB,IAAI,OAAO,UAAQ,MAAM;QACzB,IAAI,KAAK,UAAQ,IAAI;QAGrB,IAAI,iBAAiB,OAAO,wBAAwB,aAAa,0BAA0B;QAE3F,IAAI,OAAQ,QAAQ,MAAA,IAAU,QAAQ,MAAA,CAAO,SAAA,IAAc,CAAC;QAC5D,IAAI,gBAAgB,CAAC,CAAC,QAAQ,GAAA,CAAI,cAAA;QAClC,IAAI,MAAM,QAAQ,QAAA,CAAS,OAAA;QAC3B,IAAI,UAAU,WAAW,IAAI,aAAc,OAAO,IAAI,gBAAgB;QAEtE,IAAI,OAAO,QAAQ,GAAA,CAAI,eAAA,IAAmB,GAAG,IAAA,CAAK;QAClD,IAAI,WAAW,QAAQ,GAAA,CAAI,mBAAA,IAAuB,GAAG,QAAA,CAAS;QAC9D,IAAI,OAAO,QAAQ,GAAA,CAAI,IAAA,IAAA,CAAS,SAAS,QAAQ,IAAI,SAAS,OAAA;QAC9D,IAAI,OAAO,QAAQ,GAAA,CAAI,WAAA,IAAA,CAAgB,SAAS,UAAU,MAAM,KAAK,WAAA,KAAgB;QACrF,IAAI,KAAA,CAAM,QAAQ,QAAA,CAAS,EAAA,IAAM,EAAA,EAAI,KAAA,CAAM,GAAG,CAAA,CAAE,CAAC,CAAA;QAEjD,OAAO,OAAA,GAAU;QAEjB,SAAS,KAAM,GAAA,EAAK;YAClB,OAAO,eAAe,KAAK,OAAA,CAAQ,GAAG,CAAC;QACzC;QAEA,KAAK,OAAA,GAAU,KAAK,IAAA,GAAO,SAAU,GAAA,EAAK;YACxC,MAAM,KAAK,OAAA,CAAQ,OAAO,GAAG;YAE7B,IAAI;gBACF,IAAI,OAAO,eAAe,KAAK,IAAA,CAAK,KAAK,cAAc,CAAC,EAAE,IAAA,CAAK,WAAA,CAAY,EAAE,OAAA,CAAQ,MAAM,GAAG;gBAC9F,IAAI,QAAQ,GAAA,CAAI,OAAO,WAAW,CAAA,CAAG,CAAA,MAAM,QAAQ,GAAA,CAAI,OAAO,WAAW,CAAA;YAC3E,EAAA,OAAS,KAAK,CAAC;YAEf,IAAI,CAAC,eAAe;gBAClB,IAAI,UAAU,SAAS,KAAK,IAAA,CAAK,KAAK,eAAe,GAAG,UAAU;gBAClE,IAAI,QAAS,CAAA,OAAO;gBAEpB,IAAI,QAAQ,SAAS,KAAK,IAAA,CAAK,KAAK,aAAa,GAAG,UAAU;gBAC9D,IAAI,MAAO,CAAA,OAAO;YACpB;YAEA,IAAI,WAAW,QAAQ,GAAG;YAC1B,IAAI,SAAU,CAAA,OAAO;YAErB,IAAI,SAAS,QAAQ,KAAK,OAAA,CAAQ,QAAQ,QAAQ,CAAC;YACnD,IAAI,OAAQ,CAAA,OAAO;YAEnB,IAAI,SAAS;gBACX,cAAc;gBACd,UAAU;gBACV,aAAa;gBACb,SAAS;gBACT,QAAQ;gBACR,OAAO,UAAU,OAAO;gBACxB,UAAU;gBACV,UAAU,QAAQ,QAAA,CAAS,IAAA;gBAC3B,QAAQ,QAAA,CAAS,QAAA,GAAW,cAAc,QAAQ,QAAA,CAAS,QAAA,GAAW;gBACtE,OAAO,wBAAwB,aAAa,iBAAiB;aAC/D,CAAE,MAAA,CAAO,OAAO,EAAE,IAAA,CAAK,GAAG;YAE1B,MAAM,IAAI,MAAM,mCAAmC,SAAS,wBAAwB,MAAM,IAAI;YAE9F,SAAS,QAASE,IAAAA,EAAK;gBAErB,IAAI,SAAS,YAAY,KAAK,IAAA,CAAKA,MAAK,WAAW,CAAC,EAAE,GAAA,CAAI,UAAU;gBACpE,IAAI,QAAQ,OAAO,MAAA,CAAO,WAAW,UAAU,IAAI,CAAC,EAAE,IAAA,CAAK,aAAa,CAAA,CAAE,CAAC,CAAA;gBAC3E,IAAI,CAAC,MAAO,CAAA;gBAGZ,IAAI,YAAY,KAAK,IAAA,CAAKA,MAAK,aAAa,MAAM,IAAI;gBACtD,IAAI,SAAS,YAAY,SAAS,EAAE,GAAA,CAAI,SAAS;gBACjD,IAAI,aAAa,OAAO,MAAA,CAAO,UAAU,SAAS,GAAG,CAAC;gBACtD,IAAI,SAAS,WAAW,IAAA,CAAK,YAAY,OAAO,CAAC,CAAA,CAAE,CAAC,CAAA;gBACpD,IAAI,OAAQ,CAAA,OAAO,KAAK,IAAA,CAAK,WAAW,OAAO,IAAI;YACrD;QACF;QAEA,SAAS,YAAa,GAAA,EAAK;YACzB,IAAI;gBACF,OAAO,GAAG,WAAA,CAAY,GAAG;YAC3B,EAAA,OAAS,KAAK;gBACZ,OAAO,CAAC,CAAA;YACV;QACF;QAEA,SAAS,SAAU,GAAA,EAAK,MAAA,EAAQ;YAC9B,IAAI,QAAQ,YAAY,GAAG,EAAE,MAAA,CAAO,MAAM;YAC1C,OAAO,KAAA,CAAM,CAAC,CAAA,IAAK,KAAK,IAAA,CAAK,KAAK,KAAA,CAAM,CAAC,CAAC;QAC5C;QAEA,SAAS,WAAY,IAAA,EAAM;YACzB,OAAO,UAAU,IAAA,CAAK,IAAI;QAC5B;QAEA,SAAS,WAAY,IAAA,EAAM;YAEzB,IAAI,MAAM,KAAK,KAAA,CAAM,GAAG;YACxB,IAAI,IAAI,MAAA,KAAW,EAAG,CAAA;YAEtB,IAAIC,YAAW,GAAA,CAAI,CAAC,CAAA;YACpB,IAAI,gBAAgB,GAAA,CAAI,CAAC,CAAA,CAAE,KAAA,CAAM,GAAG;YAEpC,IAAI,CAACA,UAAU,CAAA;YACf,IAAI,CAAC,cAAc,MAAA,CAAQ,CAAA;YAC3B,IAAI,CAAC,cAAc,KAAA,CAAM,OAAO,EAAG,CAAA;YAEnC,OAAO;gBAAE;gBAAM,UAAAA;gBAAU;YAAc;QACzC;QAEA,SAAS,WAAYA,SAAAA,EAAUC,KAAAA,EAAM;YACnC,OAAO,SAAU,KAAA,EAAO;gBACtB,IAAI,SAAS,KAAM,CAAA,OAAO;gBAC1B,IAAI,MAAM,QAAA,KAAaD,UAAU,CAAA,OAAO;gBACxC,OAAO,MAAM,aAAA,CAAc,QAAA,CAASC,KAAI;YAC1C;QACF;QAEA,SAAS,cAAe,CAAA,EAAG,CAAA,EAAG;YAE5B,OAAO,EAAE,aAAA,CAAc,MAAA,GAAS,EAAE,aAAA,CAAc,MAAA;QAClD;QAEA,SAAS,UAAW,IAAA,EAAM;YACxB,IAAI,MAAM,KAAK,KAAA,CAAM,GAAG;YACxB,IAAI,YAAY,IAAI,GAAA,CAAI;YACxB,IAAI,OAAO;gBAAE;gBAAY,aAAa;YAAE;YAExC,IAAI,cAAc,OAAQ,CAAA;YAE1B,IAAA,IAAS,IAAI,GAAG,IAAI,IAAI,MAAA,EAAQ,IAAK;gBACnC,IAAI,MAAM,GAAA,CAAI,CAAC,CAAA;gBAEf,IAAI,QAAQ,UAAU,QAAQ,cAAc,QAAQ,eAAe;oBACjE,KAAK,OAAA,GAAU;gBACjB,OAAA,IAAW,QAAQ,QAAQ;oBACzB,KAAK,IAAA,GAAO;gBACd,OAAA,IAAW,IAAI,KAAA,CAAM,GAAG,CAAC,MAAM,OAAO;oBACpC,KAAK,GAAA,GAAM,IAAI,KAAA,CAAM,CAAC;gBACxB,OAAA,IAAW,IAAI,KAAA,CAAM,GAAG,CAAC,MAAM,MAAM;oBACnC,KAAK,EAAA,GAAK,IAAI,KAAA,CAAM,CAAC;gBACvB,OAAA,IAAW,IAAI,KAAA,CAAM,GAAG,CAAC,MAAM,QAAQ;oBACrC,KAAK,IAAA,GAAO,IAAI,KAAA,CAAM,CAAC;gBACzB,OAAA,IAAW,QAAQ,WAAW,QAAQ,QAAQ;oBAC5C,KAAK,IAAA,GAAO;gBACd,OAAO;oBACL;gBACF;gBAEA,KAAK,WAAA;YACP;YAEA,OAAO;QACT;QAEA,SAAS,UAAWC,QAAAA,EAASC,IAAAA,EAAK;YAChC,OAAO,SAAU,IAAA,EAAM;gBACrB,IAAI,QAAQ,KAAM,CAAA,OAAO;gBACzB,IAAI,KAAK,OAAA,IAAW,KAAK,OAAA,KAAYD,YAAW,CAAC,gBAAgB,IAAI,EAAG,CAAA,OAAO;gBAC/E,IAAI,KAAK,GAAA,IAAO,KAAK,GAAA,KAAQC,QAAO,CAAC,KAAK,IAAA,CAAM,CAAA,OAAO;gBACvD,IAAI,KAAK,EAAA,IAAM,KAAK,EAAA,KAAO,GAAI,CAAA,OAAO;gBACtC,IAAI,KAAK,IAAA,IAAQ,KAAK,IAAA,KAAS,KAAM,CAAA,OAAO;gBAC5C,IAAI,KAAK,IAAA,IAAQ,KAAK,IAAA,KAAS,KAAM,CAAA,OAAO;gBAE5C,OAAO;YACT;QACF;QAEA,SAAS,gBAAiB,IAAA,EAAM;YAC9B,OAAO,KAAK,OAAA,KAAY,UAAU,KAAK,IAAA;QACzC;QAEA,SAAS,YAAaD,QAAAA,EAAS;YAE7B,OAAO,SAAU,CAAA,EAAG,CAAA,EAAG;gBACrB,IAAI,EAAE,OAAA,KAAY,EAAE,OAAA,EAAS;oBAC3B,OAAO,EAAE,OAAA,KAAYA,WAAU,CAAA,IAAK;gBACtC,OAAA,IAAW,EAAE,GAAA,KAAQ,EAAE,GAAA,EAAK;oBAC1B,OAAO,EAAE,GAAA,GAAM,CAAA,IAAK;gBACtB,OAAA,IAAW,EAAE,WAAA,KAAgB,EAAE,WAAA,EAAa;oBAC1C,OAAO,EAAE,WAAA,GAAc,EAAE,WAAA,GAAc,CAAA,IAAK;gBAC9C,OAAO;oBACL,OAAO;gBACT;YACF;QACF;QAEA,SAAS,SAAU;YACjB,OAAO,CAAC,CAAA,CAAE,QAAQ,QAAA,IAAY,QAAQ,QAAA,CAAS,EAAA;QACjD;QAEA,SAAS,aAAc;YACrB,IAAI,QAAQ,QAAA,IAAY,QAAQ,QAAA,CAAS,QAAA,CAAU,CAAA,OAAO;YAC1D,IAAI,QAAQ,GAAA,CAAI,oBAAA,CAAsB,CAAA,OAAO;YAC7C,OAAO,OAAO,WAAW,eAAe,OAAO,OAAA,IAAW,OAAO,OAAA,CAAQ,IAAA,KAAS;QACpF;QAEA,SAAS,SAAUF,SAAAA,EAAU;YAC3B,OAAOA,cAAa,WAAW,GAAG,UAAA,CAAW,qBAAqB;QACpE;QAIA,KAAK,SAAA,GAAY;QACjB,KAAK,SAAA,GAAY;QACjB,KAAK,WAAA,GAAc;QACnB,KAAK,UAAA,GAAa;QAClB,KAAK,UAAA,GAAa;QAClB,KAAK,aAAA,GAAgB;IAAA;AAAA;;AC9MrB,IAAAI,0BAAA,WAAA;IAAA,+FAAA,OAAA,EAAA,MAAA;QAAA,IAAM,iBAAiB,OAAO,wBAAwB,aAAa,0BAA0B;QAC7F,IAAI,OAAO,eAAe,KAAA,KAAU,YAAY;YAC9C,OAAO,OAAA,GAAU,eAAe,KAAA,CAAM,IAAA,CAAK,cAAc;QAC3D,OAAO;YACL,OAAO,OAAA,GAAU;QACnB;IAAA;AAAA;;ACLA,IAAA,mBAAA,WAAA;IAAA,0FAAA,OAAA,EAAA,MAAA;QAAA;QAYA,IAAM,OAAO,CAAC,QAAQC,OAAM,QAAQ,QAAQ,WAAW;YACrD,IAAA,IAAS,IAAI,GAAG,IAAI,QAAQ,IAAK;gBAC/B,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,MAAA,CAAO,CAAC,CAAA,GAAIA,KAAAA,CAAK,IAAI,CAAC,CAAA;YAC7C;QACF;QASA,IAAM,SAAS,CAAC,QAAQA,UAAS;YAE/B,MAAM,SAAS,OAAO,MAAA;YACtB,IAAA,IAAS,IAAI,GAAG,IAAI,QAAQ,IAAK;gBAC/B,MAAA,CAAO,CAAC,CAAA,IAAKA,KAAAA,CAAK,IAAI,CAAC,CAAA;YACzB;QACF;QAEA,OAAO,OAAA,GAAU;YAAE;YAAM;QAAO;IAAA;AAAA;;ACjChC,IAAA,qBAAA,WAAA;IAAA,uFAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAI;YACF,OAAO,OAAA,GAAU,0BAA0B,SAAS;QACtD,EAAA,OAAS,GAAG;YACV,OAAO,OAAA,GAAU;QACnB;IAAA;AAAA;;ACNA,IAAA,sBAAA,WAAA;IAAA,yHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,YAAA,CAAa,CAAA,GAAI;QAEzB,IAAM,aAAa,MAAA,CAAO,OAAO,OAAO,CAAA;QAUxC,SAAS,OAAO,IAAA,EAAM,WAAA,EAAa;YACjC,IAAI,KAAK,MAAA,KAAW,EAAG,CAAA,OAAO;YAC9B,IAAI,KAAK,MAAA,KAAW,EAAG,CAAA,OAAO,IAAA,CAAK,CAAC,CAAA;YAEpC,MAAM,SAAS,OAAO,WAAA,CAAY,WAAW;YAC7C,IAAI,SAAS;YAEb,IAAA,IAAS,IAAI,GAAG,IAAI,KAAK,MAAA,EAAQ,IAAK;gBACpC,MAAM,MAAM,IAAA,CAAK,CAAC,CAAA;gBAClB,OAAO,GAAA,CAAI,KAAK,MAAM;gBACtB,UAAU,IAAI,MAAA;YAChB;YAEA,IAAI,SAAS,aAAa;gBACxB,OAAO,IAAI,WAAW,OAAO,MAAA,EAAQ,OAAO,UAAA,EAAY,MAAM;YAChE;YAEA,OAAO;QACT;QAYA,SAAS,MAAM,MAAA,EAAQ,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,MAAA,EAAQ;YACnD,IAAA,IAAS,IAAI,GAAG,IAAI,QAAQ,IAAK;gBAC/B,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,MAAA,CAAO,CAAC,CAAA,GAAI,IAAA,CAAK,IAAI,CAAC,CAAA;YAC7C;QACF;QASA,SAAS,QAAQ,MAAA,EAAQ,IAAA,EAAM;YAC7B,IAAA,IAAS,IAAI,GAAG,IAAI,OAAO,MAAA,EAAQ,IAAK;gBACtC,MAAA,CAAO,CAAC,CAAA,IAAK,IAAA,CAAK,IAAI,CAAC,CAAA;YACzB;QACF;QASA,SAAS,cAAc,GAAA,EAAK;YAC1B,IAAI,IAAI,MAAA,KAAW,IAAI,MAAA,CAAO,UAAA,EAAY;gBACxC,OAAO,IAAI,MAAA;YACb;YAEA,OAAO,IAAI,MAAA,CAAO,KAAA,CAAM,IAAI,UAAA,EAAY,IAAI,UAAA,GAAa,IAAI,MAAM;QACrE;QAUA,SAAS,SAAS,IAAA,EAAM;YACtB,SAAS,QAAA,GAAW;YAEpB,IAAI,OAAO,QAAA,CAAS,IAAI,EAAG,CAAA,OAAO;YAElC,IAAI;YAEJ,IAAI,gBAAgB,aAAa;gBAC/B,MAAM,IAAI,WAAW,IAAI;YAC3B,OAAA,IAAW,YAAY,MAAA,CAAO,IAAI,GAAG;gBACnC,MAAM,IAAI,WAAW,KAAK,MAAA,EAAQ,KAAK,UAAA,EAAY,KAAK,UAAU;YACpE,OAAO;gBACL,MAAM,OAAO,IAAA,CAAK,IAAI;gBACtB,SAAS,QAAA,GAAW;YACtB;YAEA,OAAO;QACT;QAEA,OAAO,OAAA,GAAU;YACf;YACA,MAAM;YACN;YACA;YACA,QAAQ;QACV;QAGA,IAAI,CAAC,QAAQ,GAAA,CAAI,iBAAA,EAAmB;YAClC,IAAI;gBACF,MAAM,aAAa;gBAEnB,OAAO,OAAA,CAAQ,IAAA,GAAO,SAAU,MAAA,EAAQ,IAAA,EAAM,MAAA,EAAQ,MAAA,EAAQ,MAAA,EAAQ;oBACpE,IAAI,SAAS,GAAI,CAAA,MAAM,QAAQ,MAAM,QAAQ,QAAQ,MAAM;yBACtD,WAAW,IAAA,CAAK,QAAQ,MAAM,QAAQ,QAAQ,MAAM;gBAC3D;gBAEA,OAAO,OAAA,CAAQ,MAAA,GAAS,SAAU,MAAA,EAAQ,IAAA,EAAM;oBAC9C,IAAI,OAAO,MAAA,GAAS,GAAI,CAAA,QAAQ,QAAQ,IAAI;yBACvC,WAAW,MAAA,CAAO,QAAQ,IAAI;gBACrC;YACF,EAAA,OAAS,GAAG,CAEZ;QACF;IAAA;AAAA;;AClIA,IAAA,kBAAA,WAAA;IAAA,qHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,QAAQ,OAAO,OAAO;QAC5B,IAAM,OAAO,OAAO,MAAM;QAM1B,IAAM,UAAN,MAAc;YAAA;;;;;OAAA,GAOZ,YAAY,WAAA,CAAa;gBACvB,IAAA,CAAK,KAAK,CAAA,GAAI,MAAM;oBAClB,IAAA,CAAK,OAAA;oBACL,IAAA,CAAK,IAAI,CAAA,CAAE;gBACb;gBACA,IAAA,CAAK,WAAA,GAAc,eAAe;gBAClC,IAAA,CAAK,IAAA,GAAO,CAAC,CAAA;gBACb,IAAA,CAAK,OAAA,GAAU;YACjB;YAAA;;;;;OAAA,GAQA,IAAI,GAAA,EAAK;gBACP,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,GAAG;gBAClB,IAAA,CAAK,IAAI,CAAA,CAAE;YACb;YAAA;;;;OAAA,GAOA,CAAC,IAAI,CAAA,GAAI;gBACP,IAAI,IAAA,CAAK,OAAA,KAAY,IAAA,CAAK,WAAA,CAAa,CAAA;gBAEvC,IAAI,IAAA,CAAK,IAAA,CAAK,MAAA,EAAQ;oBACpB,MAAM,MAAM,IAAA,CAAK,IAAA,CAAK,KAAA,CAAM;oBAE5B,IAAA,CAAK,OAAA;oBACL,IAAI,IAAA,CAAK,KAAK,CAAC;gBACjB;YACF;QACF;QAEA,OAAO,OAAA,GAAU;IAAA;AAAA;;ACtDjB,IAAA,6BAAA,WAAA;IAAA,gIAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,OAAO,UAAQ,MAAM;QAE3B,IAAM,aAAa;QACnB,IAAM,UAAU;QAChB,IAAM,EAAE,WAAA,CAAY,CAAA,GAAI;QAExB,IAAM,aAAa,MAAA,CAAO,OAAO,OAAO,CAAA;QACxC,IAAM,UAAU,OAAO,IAAA,CAAK;YAAC;YAAM;YAAM;YAAM,GAAI;SAAC;QACpD,IAAM,qBAAqB,OAAO,oBAAoB;QACtD,IAAM,eAAe,OAAO,cAAc;QAC1C,IAAM,YAAY,OAAO,UAAU;QACnC,IAAM,WAAW,OAAO,SAAS;QACjC,IAAM,SAAS,OAAO,OAAO;QAS7B,IAAI;QAKJ,IAAM,oBAAN,MAAwB;YAAA;;;;;;;;;;;;;;;;;;;;;;;OAAA,GAyBtB,YAAY,OAAA,EAAS,QAAA,EAAU,UAAA,CAAY;gBACzC,IAAA,CAAK,WAAA,GAAc,aAAa;gBAChC,IAAA,CAAK,QAAA,GAAW,WAAW,CAAC;gBAC5B,IAAA,CAAK,UAAA,GACH,IAAA,CAAK,QAAA,CAAS,SAAA,KAAc,KAAA,IAAY,IAAA,CAAK,QAAA,CAAS,SAAA,GAAY;gBACpE,IAAA,CAAK,SAAA,GAAY,CAAC,CAAC;gBACnB,IAAA,CAAK,QAAA,GAAW;gBAChB,IAAA,CAAK,QAAA,GAAW;gBAEhB,IAAA,CAAK,MAAA,GAAS;gBAEd,IAAI,CAAC,aAAa;oBAChB,MAAM,cACJ,IAAA,CAAK,QAAA,CAAS,gBAAA,KAAqB,KAAA,IAC/B,IAAA,CAAK,QAAA,CAAS,gBAAA,GACd;oBACN,cAAc,IAAI,QAAQ,WAAW;gBACvC;YACF;YAAA;;OAAA,GAKA,WAAW,gBAAgB;gBACzB,OAAO;YACT;YAAA;;;;;OAAA,GAQA,QAAQ;gBACN,MAAM,SAAS,CAAC;gBAEhB,IAAI,IAAA,CAAK,QAAA,CAAS,uBAAA,EAAyB;oBACzC,OAAO,0BAAA,GAA6B;gBACtC;gBACA,IAAI,IAAA,CAAK,QAAA,CAAS,uBAAA,EAAyB;oBACzC,OAAO,0BAAA,GAA6B;gBACtC;gBACA,IAAI,IAAA,CAAK,QAAA,CAAS,mBAAA,EAAqB;oBACrC,OAAO,sBAAA,GAAyB,IAAA,CAAK,QAAA,CAAS,mBAAA;gBAChD;gBACA,IAAI,IAAA,CAAK,QAAA,CAAS,mBAAA,EAAqB;oBACrC,OAAO,sBAAA,GAAyB,IAAA,CAAK,QAAA,CAAS,mBAAA;gBAChD,OAAA,IAAW,IAAA,CAAK,QAAA,CAAS,mBAAA,IAAuB,MAAM;oBACpD,OAAO,sBAAA,GAAyB;gBAClC;gBAEA,OAAO;YACT;YAAA;;;;;;OAAA,GASA,OAAO,cAAA,EAAgB;gBACrB,iBAAiB,IAAA,CAAK,eAAA,CAAgB,cAAc;gBAEpD,IAAA,CAAK,MAAA,GAAS,IAAA,CAAK,SAAA,GACf,IAAA,CAAK,cAAA,CAAe,cAAc,IAClC,IAAA,CAAK,cAAA,CAAe,cAAc;gBAEtC,OAAO,IAAA,CAAK,MAAA;YACd;YAAA;;;;OAAA,GAOA,UAAU;gBACR,IAAI,IAAA,CAAK,QAAA,EAAU;oBACjB,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;oBACpB,IAAA,CAAK,QAAA,GAAW;gBAClB;gBAEA,IAAI,IAAA,CAAK,QAAA,EAAU;oBACjB,MAAM,WAAW,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA;oBAExC,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;oBACpB,IAAA,CAAK,QAAA,GAAW;oBAEhB,IAAI,UAAU;wBACZ,SACE,IAAI,MACF;oBAGN;gBACF;YACF;YAAA;;;;;;OAAA,GASA,eAAe,MAAA,EAAQ;gBACrB,MAAM,OAAO,IAAA,CAAK,QAAA;gBAClB,MAAM,WAAW,OAAO,IAAA,CAAK,CAAC,WAAW;oBACvC,IACG,KAAK,uBAAA,KAA4B,SAChC,OAAO,0BAAA,IACR,OAAO,sBAAA,IAAA,CACL,KAAK,mBAAA,KAAwB,SAC3B,OAAO,KAAK,mBAAA,KAAwB,YACnC,KAAK,mBAAA,GAAsB,OAAO,sBAAA,KACvC,OAAO,KAAK,mBAAA,KAAwB,YACnC,CAAC,OAAO,sBAAA,EACV;wBACA,OAAO;oBACT;oBAEA,OAAO;gBACT,CAAC;gBAED,IAAI,CAAC,UAAU;oBACb,MAAM,IAAI,MAAM,8CAA8C;gBAChE;gBAEA,IAAI,KAAK,uBAAA,EAAyB;oBAChC,SAAS,0BAAA,GAA6B;gBACxC;gBACA,IAAI,KAAK,uBAAA,EAAyB;oBAChC,SAAS,0BAAA,GAA6B;gBACxC;gBACA,IAAI,OAAO,KAAK,mBAAA,KAAwB,UAAU;oBAChD,SAAS,sBAAA,GAAyB,KAAK,mBAAA;gBACzC;gBACA,IAAI,OAAO,KAAK,mBAAA,KAAwB,UAAU;oBAChD,SAAS,sBAAA,GAAyB,KAAK,mBAAA;gBACzC,OAAA,IACE,SAAS,sBAAA,KAA2B,QACpC,KAAK,mBAAA,KAAwB,OAC7B;oBACA,OAAO,SAAS,sBAAA;gBAClB;gBAEA,OAAO;YACT;YAAA;;;;;;OAAA,GASA,eAAe,QAAA,EAAU;gBACvB,MAAM,SAAS,QAAA,CAAS,CAAC,CAAA;gBAEzB,IACE,IAAA,CAAK,QAAA,CAAS,uBAAA,KAA4B,SAC1C,OAAO,0BAAA,EACP;oBACA,MAAM,IAAI,MAAM,mDAAmD;gBACrE;gBAEA,IAAI,CAAC,OAAO,sBAAA,EAAwB;oBAClC,IAAI,OAAO,IAAA,CAAK,QAAA,CAAS,mBAAA,KAAwB,UAAU;wBACzD,OAAO,sBAAA,GAAyB,IAAA,CAAK,QAAA,CAAS,mBAAA;oBAChD;gBACF,OAAA,IACE,IAAA,CAAK,QAAA,CAAS,mBAAA,KAAwB,SACrC,OAAO,IAAA,CAAK,QAAA,CAAS,mBAAA,KAAwB,YAC5C,OAAO,sBAAA,GAAyB,IAAA,CAAK,QAAA,CAAS,mBAAA,EAChD;oBACA,MAAM,IAAI,MACR;gBAEJ;gBAEA,OAAO;YACT;YAAA;;;;;;OAAA,GASA,gBAAgB,cAAA,EAAgB;gBAC9B,eAAe,OAAA,CAAQ,CAAC,WAAW;oBACjC,OAAO,IAAA,CAAK,MAAM,EAAE,OAAA,CAAQ,CAAC,QAAQ;wBACnC,IAAI,QAAQ,MAAA,CAAO,GAAG,CAAA;wBAEtB,IAAI,MAAM,MAAA,GAAS,GAAG;4BACpB,MAAM,IAAI,MAAM,CAAA,WAAA,EAAc,GAAG,CAAA,+BAAA,CAAiC;wBACpE;wBAEA,QAAQ,KAAA,CAAM,CAAC,CAAA;wBAEf,IAAI,QAAQ,0BAA0B;4BACpC,IAAI,UAAU,MAAM;gCAClB,MAAM,MAAM,CAAC;gCACb,IAAI,CAAC,OAAO,SAAA,CAAU,GAAG,KAAK,MAAM,KAAK,MAAM,IAAI;oCACjD,MAAM,IAAI,UACR,CAAA,6BAAA,EAAgC,GAAG,CAAA,GAAA,EAAM,KAAK,EAAA;gCAElD;gCACA,QAAQ;4BACV,OAAA,IAAW,CAAC,IAAA,CAAK,SAAA,EAAW;gCAC1B,MAAM,IAAI,UACR,CAAA,6BAAA,EAAgC,GAAG,CAAA,GAAA,EAAM,KAAK,EAAA;4BAElD;wBACF,OAAA,IAAW,QAAQ,0BAA0B;4BAC3C,MAAM,MAAM,CAAC;4BACb,IAAI,CAAC,OAAO,SAAA,CAAU,GAAG,KAAK,MAAM,KAAK,MAAM,IAAI;gCACjD,MAAM,IAAI,UACR,CAAA,6BAAA,EAAgC,GAAG,CAAA,GAAA,EAAM,KAAK,EAAA;4BAElD;4BACA,QAAQ;wBACV,OAAA,IACE,QAAQ,gCACR,QAAQ,8BACR;4BACA,IAAI,UAAU,MAAM;gCAClB,MAAM,IAAI,UACR,CAAA,6BAAA,EAAgC,GAAG,CAAA,GAAA,EAAM,KAAK,EAAA;4BAElD;wBACF,OAAO;4BACL,MAAM,IAAI,MAAM,CAAA,mBAAA,EAAsB,GAAG,CAAA,CAAA,CAAG;wBAC9C;wBAEA,MAAA,CAAO,GAAG,CAAA,GAAI;oBAChB,CAAC;gBACH,CAAC;gBAED,OAAO;YACT;YAAA;;;;;;;OAAA,GAUA,WAAW,IAAA,EAAM,GAAA,EAAK,QAAA,EAAU;gBAC9B,YAAY,GAAA,CAAI,CAAC,SAAS;oBACxB,IAAA,CAAK,WAAA,CAAY,MAAM,KAAK,CAAC,KAAK,WAAW;wBAC3C,KAAK;wBACL,SAAS,KAAK,MAAM;oBACtB,CAAC;gBACH,CAAC;YACH;YAAA;;;;;;;OAAA,GAUA,SAAS,IAAA,EAAM,GAAA,EAAK,QAAA,EAAU;gBAC5B,YAAY,GAAA,CAAI,CAAC,SAAS;oBACxB,IAAA,CAAK,SAAA,CAAU,MAAM,KAAK,CAAC,KAAK,WAAW;wBACzC,KAAK;wBACL,SAAS,KAAK,MAAM;oBACtB,CAAC;gBACH,CAAC;YACH;YAAA;;;;;;;OAAA,GAUA,YAAY,IAAA,EAAM,GAAA,EAAK,QAAA,EAAU;gBAC/B,MAAM,WAAW,IAAA,CAAK,SAAA,GAAY,WAAW;gBAE7C,IAAI,CAAC,IAAA,CAAK,QAAA,EAAU;oBAClB,MAAM,MAAM,GAAG,QAAQ,CAAA,gBAAA,CAAA;oBACvB,MAAM,aACJ,OAAO,IAAA,CAAK,MAAA,CAAO,GAAG,CAAA,KAAM,WACxB,KAAK,oBAAA,GACL,IAAA,CAAK,MAAA,CAAO,GAAG,CAAA;oBAErB,IAAA,CAAK,QAAA,GAAW,KAAK,gBAAA,CAAiB;wBACpC,GAAG,IAAA,CAAK,QAAA,CAAS,kBAAA;wBACjB;oBACF,CAAC;oBACD,IAAA,CAAK,QAAA,CAAS,kBAAkB,CAAA,GAAI,IAAA;oBACpC,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA,GAAI;oBAC9B,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAC,CAAA;oBAC3B,IAAA,CAAK,QAAA,CAAS,EAAA,CAAG,SAAS,cAAc;oBACxC,IAAA,CAAK,QAAA,CAAS,EAAA,CAAG,QAAQ,aAAa;gBACxC;gBAEA,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,GAAI;gBAE3B,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,IAAI;gBACxB,IAAI,IAAK,CAAA,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,OAAO;gBAEpC,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,MAAM;oBACxB,MAAM,MAAM,IAAA,CAAK,QAAA,CAAS,MAAM,CAAA;oBAEhC,IAAI,KAAK;wBACP,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;wBACpB,IAAA,CAAK,QAAA,GAAW;wBAChB,SAAS,GAAG;wBACZ;oBACF;oBAEA,MAAMC,QAAO,WAAW,MAAA,CACtB,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,EACtB,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA;oBAG5B,IAAI,IAAA,CAAK,QAAA,CAAS,cAAA,CAAe,UAAA,EAAY;wBAC3C,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;wBACpB,IAAA,CAAK,QAAA,GAAW;oBAClB,OAAO;wBACL,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA,GAAI;wBAC9B,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAC,CAAA;wBAE3B,IAAI,OAAO,IAAA,CAAK,MAAA,CAAO,GAAG,QAAQ,CAAA,oBAAA,CAAsB,CAAA,EAAG;4BACzD,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;wBACtB;oBACF;oBAEA,SAAS,MAAMA,KAAI;gBACrB,CAAC;YACH;YAAA;;;;;;;OAAA,GAUA,UAAU,IAAA,EAAM,GAAA,EAAK,QAAA,EAAU;gBAC7B,MAAM,WAAW,IAAA,CAAK,SAAA,GAAY,WAAW;gBAE7C,IAAI,CAAC,IAAA,CAAK,QAAA,EAAU;oBAClB,MAAM,MAAM,GAAG,QAAQ,CAAA,gBAAA,CAAA;oBACvB,MAAM,aACJ,OAAO,IAAA,CAAK,MAAA,CAAO,GAAG,CAAA,KAAM,WACxB,KAAK,oBAAA,GACL,IAAA,CAAK,MAAA,CAAO,GAAG,CAAA;oBAErB,IAAA,CAAK,QAAA,GAAW,KAAK,gBAAA,CAAiB;wBACpC,GAAG,IAAA,CAAK,QAAA,CAAS,kBAAA;wBACjB;oBACF,CAAC;oBAED,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA,GAAI;oBAC9B,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAC,CAAA;oBAE3B,IAAA,CAAK,QAAA,CAAS,EAAA,CAAG,QAAQ,aAAa;gBACxC;gBAEA,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,GAAI;gBAE3B,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,IAAI;gBACxB,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,KAAK,YAAA,EAAc,MAAM;oBAC3C,IAAI,CAAC,IAAA,CAAK,QAAA,EAAU;wBAIlB;oBACF;oBAEA,IAAIA,QAAO,WAAW,MAAA,CACpB,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,EACtB,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA;oBAG5B,IAAI,KAAK;wBACPA,QAAO,IAAI,WAAWA,MAAK,MAAA,EAAQA,MAAK,UAAA,EAAYA,MAAK,MAAA,GAAS,CAAC;oBACrE;oBAMA,IAAA,CAAK,QAAA,CAAS,SAAS,CAAA,GAAI;oBAE3B,IAAA,CAAK,QAAA,CAAS,YAAY,CAAA,GAAI;oBAC9B,IAAA,CAAK,QAAA,CAAS,QAAQ,CAAA,GAAI,CAAC,CAAA;oBAE3B,IAAI,OAAO,IAAA,CAAK,MAAA,CAAO,GAAG,QAAQ,CAAA,oBAAA,CAAsB,CAAA,EAAG;wBACzD,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;oBACtB;oBAEA,SAAS,MAAMA,KAAI;gBACrB,CAAC;YACH;QACF;QAEA,OAAO,OAAA,GAAU;QAQjB,SAAS,cAAc,KAAA,EAAO;YAC5B,IAAA,CAAK,QAAQ,CAAA,CAAE,IAAA,CAAK,KAAK;YACzB,IAAA,CAAK,YAAY,CAAA,IAAK,MAAM,MAAA;QAC9B;QAQA,SAAS,cAAc,KAAA,EAAO;YAC5B,IAAA,CAAK,YAAY,CAAA,IAAK,MAAM,MAAA;YAE5B,IACE,IAAA,CAAK,kBAAkB,CAAA,CAAE,WAAA,GAAc,KACvC,IAAA,CAAK,YAAY,CAAA,IAAK,IAAA,CAAK,kBAAkB,CAAA,CAAE,WAAA,EAC/C;gBACA,IAAA,CAAK,QAAQ,CAAA,CAAE,IAAA,CAAK,KAAK;gBACzB;YACF;YAEA,IAAA,CAAK,MAAM,CAAA,GAAI,IAAI,WAAW,2BAA2B;YACzD,IAAA,CAAK,MAAM,CAAA,CAAE,IAAA,GAAO;YACpB,IAAA,CAAK,MAAM,CAAA,CAAE,WAAW,CAAA,GAAI;YAC5B,IAAA,CAAK,cAAA,CAAe,QAAQ,aAAa;YACzC,IAAA,CAAK,KAAA,CAAM;QACb;QAQA,SAAS,eAAe,GAAA,EAAK;YAK3B,IAAA,CAAK,kBAAkB,CAAA,CAAE,QAAA,GAAW;YACpC,GAAA,CAAI,WAAW,CAAA,GAAI;YACnB,IAAA,CAAK,SAAS,CAAA,CAAE,GAAG;QACrB;IAAA;AAAA;;ACjgBA,IAAAC,oBAAA,WAAA;IAAA,mGAAA,OAAA,EAAA,MAAA;QAAA;QAWA,SAAS,YAAY,GAAA,EAAK;YACxB,MAAM,MAAM,IAAI,MAAA;YAChB,IAAI,IAAI;YAER,MAAO,IAAI,IAAK;gBACd,IAAA,CAAK,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,GAAM;oBAC5B;gBACF,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBACnC,IACE,IAAI,MAAM,OAAA,CACT,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KACpB;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBACnC,IACE,IAAI,KAAK,OAAA,CACR,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OACxB,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,WAAA;oBAC3C,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAC3C;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBACnC,IACE,IAAI,KAAK,OAAA,CACR,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OACxB,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,WAAA;oBAC3C,GAAA,CAAI,CAAC,CAAA,KAAM,OAAQ,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,OAAQ,GAAA,CAAI,CAAC,CAAA,GAAI,KACjD;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAO;oBACL,OAAO;gBACT;YACF;YAEA,OAAO;QACT;QAEA,OAAO,OAAA,GAAU;IAAA;AAAA;;AC7DjB,IAAA,yBAAA,WAAA;IAAA,gGAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAI;YACF,OAAO,OAAA,GAAU,0BAA0B,SAAS;QACtD,EAAA,OAAS,GAAG;YACV,OAAO,OAAA,GAAU;QACnB;IAAA;AAAA;;ACNA,IAAA,qBAAA,WAAA;IAAA,wHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,MAAA,CAAO,CAAA,GAAI,UAAQ,QAAQ;QAEnC,IAAM,EAAE,OAAA,CAAQ,CAAA,GAAI;QAcpB,IAAM,aAAa;YACjB;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,SAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,UAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,UAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,UAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,UAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,UAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAA,WAAA;YAC7C;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;YAAG;SAC/C;QASA,SAAS,kBAAkB,IAAA,EAAM;YAC/B,OACG,QAAQ,OACP,QAAQ,QACR,SAAS,QACT,SAAS,QACT,SAAS,QACV,QAAQ,OAAQ,QAAQ;QAE7B;QAWA,SAAS,aAAa,GAAA,EAAK;YACzB,MAAM,MAAM,IAAI,MAAA;YAChB,IAAI,IAAI;YAER,MAAO,IAAI,IAAK;gBACd,IAAA,CAAK,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,GAAG;oBAEzB;gBACF,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBAEnC,IACE,IAAI,MAAM,OAAA,CACT,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KACpB;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBAEnC,IACE,IAAI,KAAK,OAAA,CACR,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OACvB,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,WAAA;oBAC3C,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAC5C;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAA,IAAA,CAAY,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU,KAAM;oBAEnC,IACE,IAAI,KAAK,OAAA,CACR,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,CACvB,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OACvB,GAAA,CAAI,CAAC,CAAA,KAAM,OAAA,CAAS,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,GAAA,MAAU,OAAA,WAAA;oBAC3C,GAAA,CAAI,CAAC,CAAA,KAAM,OAAQ,GAAA,CAAI,IAAI,CAAC,CAAA,GAAI,OACjC,GAAA,CAAI,CAAC,CAAA,GAAI,KACT;wBACA,OAAO;oBACT;oBAEA,KAAK;gBACP,OAAO;oBACL,OAAO;gBACT;YACF;YAEA,OAAO;QACT;QASA,SAAS,OAAO,KAAA,EAAO;YACrB,OACE,WACA,OAAO,UAAU,YACjB,OAAO,MAAM,WAAA,KAAgB,cAC7B,OAAO,MAAM,IAAA,KAAS,YACtB,OAAO,MAAM,MAAA,KAAW,cAAA,CACvB,KAAA,CAAM,OAAO,WAAW,CAAA,KAAM,UAC7B,KAAA,CAAM,OAAO,WAAW,CAAA,KAAM,MAAA;QAEpC;QAEA,OAAO,OAAA,GAAU;YACf;YACA;YACA,aAAa;YACb;QACF;QAEA,IAAI,QAAQ;YACV,OAAO,OAAA,CAAQ,WAAA,GAAc,SAAU,GAAA,EAAK;gBAC1C,OAAO,IAAI,MAAA,GAAS,KAAK,aAAa,GAAG,IAAI,OAAO,GAAG;YACzD;QACF,OAAA,IAAuC,CAAC,QAAQ,GAAA,CAAI,oBAAA,EAAsB;YACxE,IAAI;gBACF,MAAM,cAAc;gBAEpB,OAAO,OAAA,CAAQ,WAAA,GAAc,SAAU,GAAA,EAAK;oBAC1C,OAAO,IAAI,MAAA,GAAS,KAAK,aAAa,GAAG,IAAI,YAAY,GAAG;gBAC9D;YACF,EAAA,OAAS,GAAG,CAEZ;QACF;IAAA;AAAA;;ACvJA,IAAA,mBAAA,WAAA;IAAA,sHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,QAAA,CAAS,CAAA,GAAI,UAAQ,QAAQ;QAErC,IAAM,oBAAoB;QAC1B,IAAM,EACJ,YAAA,EACA,YAAA,EACA,WAAA,EACA,UAAA,EACF,GAAI;QACJ,IAAM,EAAE,MAAA,EAAQ,aAAA,EAAe,MAAA,CAAO,CAAA,GAAI;QAC1C,IAAM,EAAE,iBAAA,EAAmB,WAAA,CAAY,CAAA,GAAI;QAE3C,IAAM,aAAa,MAAA,CAAO,OAAO,OAAO,CAAA;QAExC,IAAM,WAAW;QACjB,IAAM,wBAAwB;QAC9B,IAAM,wBAAwB;QAC9B,IAAM,WAAW;QACjB,IAAM,WAAW;QACjB,IAAM,YAAY;QAClB,IAAM,cAAc;QAOpB,IAAMC,YAAN,cAAuB,SAAS;YAAA;;;;;;;;;;;;;;;OAAA,GAiB9B,YAAY,UAAU,CAAC,CAAA,CAAG;gBACxB,KAAA,CAAM;gBAEN,IAAA,CAAK,uBAAA,GACH,QAAQ,sBAAA,KAA2B,KAAA,IAC/B,QAAQ,sBAAA,GACR;gBACN,IAAA,CAAK,WAAA,GAAc,QAAQ,UAAA,IAAc,YAAA,CAAa,CAAC,CAAA;gBACvD,IAAA,CAAK,WAAA,GAAc,QAAQ,UAAA,IAAc,CAAC;gBAC1C,IAAA,CAAK,SAAA,GAAY,CAAC,CAAC,QAAQ,QAAA;gBAC3B,IAAA,CAAK,WAAA,GAAc,QAAQ,UAAA,GAAa;gBACxC,IAAA,CAAK,mBAAA,GAAsB,CAAC,CAAC,QAAQ,kBAAA;gBACrC,IAAA,CAAK,UAAU,CAAA,GAAI,KAAA;gBAEnB,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,QAAA,GAAW,CAAC,CAAA;gBAEjB,IAAA,CAAK,WAAA,GAAc;gBACnB,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,KAAA,GAAQ,KAAA;gBACb,IAAA,CAAK,WAAA,GAAc;gBACnB,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,IAAA,GAAO;gBACZ,IAAA,CAAK,OAAA,GAAU;gBAEf,IAAA,CAAK,mBAAA,GAAsB;gBAC3B,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,UAAA,GAAa,CAAC,CAAA;gBAEnB,IAAA,CAAK,QAAA,GAAW;gBAChB,IAAA,CAAK,KAAA,GAAQ;gBACb,IAAA,CAAK,MAAA,GAAS;YAChB;YAAA;;;;;;;OAAA,GAUA,OAAO,KAAA,EAAO,QAAA,EAAU,EAAA,EAAI;gBAC1B,IAAI,IAAA,CAAK,OAAA,KAAY,KAAQ,IAAA,CAAK,MAAA,IAAU,SAAU,CAAA,OAAO,GAAG;gBAEhE,IAAA,CAAK,cAAA,IAAkB,MAAM,MAAA;gBAC7B,IAAA,CAAK,QAAA,CAAS,IAAA,CAAK,KAAK;gBACxB,IAAA,CAAK,SAAA,CAAU,EAAE;YACnB;YAAA;;;;;;OAAA,GASA,QAAQ,CAAA,EAAG;gBACT,IAAA,CAAK,cAAA,IAAkB;gBAEvB,IAAI,MAAM,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA,CAAE,MAAA,CAAQ,CAAA,OAAO,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM;gBAE9D,IAAI,IAAI,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA,CAAE,MAAA,EAAQ;oBAC/B,MAAM,MAAM,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA;oBAC3B,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA,GAAI,IAAI,WACrB,IAAI,MAAA,EACJ,IAAI,UAAA,GAAa,GACjB,IAAI,MAAA,GAAS;oBAGf,OAAO,IAAI,WAAW,IAAI,MAAA,EAAQ,IAAI,UAAA,EAAY,CAAC;gBACrD;gBAEA,MAAM,MAAM,OAAO,WAAA,CAAY,CAAC;gBAEhC,GAAG;oBACD,MAAM,MAAM,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA;oBAC3B,MAAM,SAAS,IAAI,MAAA,GAAS;oBAE5B,IAAI,KAAK,IAAI,MAAA,EAAQ;wBACnB,IAAI,GAAA,CAAI,IAAA,CAAK,QAAA,CAAS,KAAA,CAAM,GAAG,MAAM;oBACvC,OAAO;wBACL,IAAI,GAAA,CAAI,IAAI,WAAW,IAAI,MAAA,EAAQ,IAAI,UAAA,EAAY,CAAC,GAAG,MAAM;wBAC7D,IAAA,CAAK,QAAA,CAAS,CAAC,CAAA,GAAI,IAAI,WACrB,IAAI,MAAA,EACJ,IAAI,UAAA,GAAa,GACjB,IAAI,MAAA,GAAS;oBAEjB;oBAEA,KAAK,IAAI,MAAA;gBACX,QAAS,IAAI,EAAA;gBAEb,OAAO;YACT;YAAA;;;;;OAAA,GAQA,UAAU,EAAA,EAAI;gBACZ,IAAA,CAAK,KAAA,GAAQ;gBAEb,GAAG;oBACD,OAAQ,IAAA,CAAK,MAAA,EAAQ;wBACnB,KAAK;4BACH,IAAA,CAAK,OAAA,CAAQ,EAAE;4BACf;wBACF,KAAK;4BACH,IAAA,CAAK,kBAAA,CAAmB,EAAE;4BAC1B;wBACF,KAAK;4BACH,IAAA,CAAK,kBAAA,CAAmB,EAAE;4BAC1B;wBACF,KAAK;4BACH,IAAA,CAAK,OAAA,CAAQ;4BACb;wBACF,KAAK;4BACH,IAAA,CAAK,OAAA,CAAQ,EAAE;4BACf;wBACF,KAAK;wBACL,KAAK;4BACH,IAAA,CAAK,KAAA,GAAQ;4BACb;oBACJ;gBACF,QAAS,IAAA,CAAK,KAAA,CAAA;gBAEd,IAAI,CAAC,IAAA,CAAK,QAAA,CAAU,CAAA,GAAG;YACzB;YAAA;;;;;OAAA,GAQA,QAAQ,EAAA,EAAI;gBACV,IAAI,IAAA,CAAK,cAAA,GAAiB,GAAG;oBAC3B,IAAA,CAAK,KAAA,GAAQ;oBACb;gBACF;gBAEA,MAAM,MAAM,IAAA,CAAK,OAAA,CAAQ,CAAC;gBAE1B,IAAA,CAAK,GAAA,CAAI,CAAC,CAAA,GAAI,EAAA,MAAU,GAAM;oBAC5B,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,+BACA,MACA,MACA;oBAGF,GAAG,KAAK;oBACR;gBACF;gBAEA,MAAM,aAAA,CAAc,GAAA,CAAI,CAAC,CAAA,GAAI,EAAA,MAAU;gBAEvC,IAAI,cAAc,CAAC,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA,EAAG;oBACpE,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,sBACA,MACA,MACA;oBAGF,GAAG,KAAK;oBACR;gBACF;gBAEA,IAAA,CAAK,IAAA,GAAA,CAAQ,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU;gBAChC,IAAA,CAAK,OAAA,GAAU,GAAA,CAAI,CAAC,CAAA,GAAI;gBACxB,IAAA,CAAK,cAAA,GAAiB,GAAA,CAAI,CAAC,CAAA,GAAI;gBAE/B,IAAI,IAAA,CAAK,OAAA,KAAY,GAAM;oBACzB,IAAI,YAAY;wBACd,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,sBACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IAAI,CAAC,IAAA,CAAK,WAAA,EAAa;wBACrB,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,oBACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IAAA,CAAK,OAAA,GAAU,IAAA,CAAK,WAAA;gBACtB,OAAA,IAAW,IAAA,CAAK,OAAA,KAAY,KAAQ,IAAA,CAAK,OAAA,KAAY,GAAM;oBACzD,IAAI,IAAA,CAAK,WAAA,EAAa;wBACpB,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,CAAA,eAAA,EAAkB,IAAA,CAAK,OAAO,EAAA,EAC9B,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IAAA,CAAK,WAAA,GAAc;gBACrB,OAAA,IAAW,IAAA,CAAK,OAAA,GAAU,KAAQ,IAAA,CAAK,OAAA,GAAU,IAAM;oBACrD,IAAI,CAAC,IAAA,CAAK,IAAA,EAAM;wBACd,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,mBACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IAAI,YAAY;wBACd,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,sBACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IACE,IAAA,CAAK,cAAA,GAAiB,OACrB,IAAA,CAAK,OAAA,KAAY,KAAQ,IAAA,CAAK,cAAA,KAAmB,GAClD;wBACA,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,CAAA,uBAAA,EAA0B,IAAA,CAAK,cAAc,EAAA,EAC7C,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;gBACF,OAAO;oBACL,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,CAAA,eAAA,EAAkB,IAAA,CAAK,OAAO,EAAA,EAC9B,MACA,MACA;oBAGF,GAAG,KAAK;oBACR;gBACF;gBAEA,IAAI,CAAC,IAAA,CAAK,IAAA,IAAQ,CAAC,IAAA,CAAK,WAAA,CAAa,CAAA,IAAA,CAAK,WAAA,GAAc,IAAA,CAAK,OAAA;gBAC7D,IAAA,CAAK,OAAA,GAAA,CAAW,GAAA,CAAI,CAAC,CAAA,GAAI,GAAA,MAAU;gBAEnC,IAAI,IAAA,CAAK,SAAA,EAAW;oBAClB,IAAI,CAAC,IAAA,CAAK,OAAA,EAAS;wBACjB,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,oBACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;gBACF,OAAA,IAAW,IAAA,CAAK,OAAA,EAAS;oBACvB,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,sBACA,MACA,MACA;oBAGF,GAAG,KAAK;oBACR;gBACF;gBAEA,IAAI,IAAA,CAAK,cAAA,KAAmB,IAAK,CAAA,IAAA,CAAK,MAAA,GAAS;qBAAA,IACtC,IAAA,CAAK,cAAA,KAAmB,IAAK,CAAA,IAAA,CAAK,MAAA,GAAS;qBAC/C,IAAA,CAAK,UAAA,CAAW,EAAE;YACzB;YAAA;;;;;OAAA,GAQA,mBAAmB,EAAA,EAAI;gBACrB,IAAI,IAAA,CAAK,cAAA,GAAiB,GAAG;oBAC3B,IAAA,CAAK,KAAA,GAAQ;oBACb;gBACF;gBAEA,IAAA,CAAK,cAAA,GAAiB,IAAA,CAAK,OAAA,CAAQ,CAAC,EAAE,YAAA,CAAa,CAAC;gBACpD,IAAA,CAAK,UAAA,CAAW,EAAE;YACpB;YAAA;;;;;OAAA,GAQA,mBAAmB,EAAA,EAAI;gBACrB,IAAI,IAAA,CAAK,cAAA,GAAiB,GAAG;oBAC3B,IAAA,CAAK,KAAA,GAAQ;oBACb;gBACF;gBAEA,MAAM,MAAM,IAAA,CAAK,OAAA,CAAQ,CAAC;gBAC1B,MAAM,MAAM,IAAI,YAAA,CAAa,CAAC;gBAM9B,IAAI,MAAM,KAAK,GAAA,CAAI,GAAG,KAAK,EAAE,IAAI,GAAG;oBAClC,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,0DACA,OACA,MACA;oBAGF,GAAG,KAAK;oBACR;gBACF;gBAEA,IAAA,CAAK,cAAA,GAAiB,MAAM,KAAK,GAAA,CAAI,GAAG,EAAE,IAAI,IAAI,YAAA,CAAa,CAAC;gBAChE,IAAA,CAAK,UAAA,CAAW,EAAE;YACpB;YAAA;;;;;OAAA,GAQA,WAAW,EAAA,EAAI;gBACb,IAAI,IAAA,CAAK,cAAA,IAAkB,IAAA,CAAK,OAAA,GAAU,GAAM;oBAC9C,IAAA,CAAK,mBAAA,IAAuB,IAAA,CAAK,cAAA;oBACjC,IAAI,IAAA,CAAK,mBAAA,GAAsB,IAAA,CAAK,WAAA,IAAe,IAAA,CAAK,WAAA,GAAc,GAAG;wBACvE,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,6BACA,OACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;gBACF;gBAEA,IAAI,IAAA,CAAK,OAAA,CAAS,CAAA,IAAA,CAAK,MAAA,GAAS;qBAC3B,IAAA,CAAK,MAAA,GAAS;YACrB;YAAA;;;;OAAA,GAOA,UAAU;gBACR,IAAI,IAAA,CAAK,cAAA,GAAiB,GAAG;oBAC3B,IAAA,CAAK,KAAA,GAAQ;oBACb;gBACF;gBAEA,IAAA,CAAK,KAAA,GAAQ,IAAA,CAAK,OAAA,CAAQ,CAAC;gBAC3B,IAAA,CAAK,MAAA,GAAS;YAChB;YAAA;;;;;OAAA,GAQA,QAAQ,EAAA,EAAI;gBACV,IAAI,OAAO;gBAEX,IAAI,IAAA,CAAK,cAAA,EAAgB;oBACvB,IAAI,IAAA,CAAK,cAAA,GAAiB,IAAA,CAAK,cAAA,EAAgB;wBAC7C,IAAA,CAAK,KAAA,GAAQ;wBACb;oBACF;oBAEA,OAAO,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,cAAc;oBAEvC,IACE,IAAA,CAAK,OAAA,IAAA,CACJ,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA,GAAI,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA,MAAO,GACpE;wBACA,OAAO,MAAM,IAAA,CAAK,KAAK;oBACzB;gBACF;gBAEA,IAAI,IAAA,CAAK,OAAA,GAAU,GAAM;oBACvB,IAAA,CAAK,cAAA,CAAe,MAAM,EAAE;oBAC5B;gBACF;gBAEA,IAAI,IAAA,CAAK,WAAA,EAAa;oBACpB,IAAA,CAAK,MAAA,GAAS;oBACd,IAAA,CAAK,UAAA,CAAW,MAAM,EAAE;oBACxB;gBACF;gBAEA,IAAI,KAAK,MAAA,EAAQ;oBAKf,IAAA,CAAK,cAAA,GAAiB,IAAA,CAAK,mBAAA;oBAC3B,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,IAAI;gBAC3B;gBAEA,IAAA,CAAK,WAAA,CAAY,EAAE;YACrB;YAAA;;;;;;OAAA,GASA,WAAW,IAAA,EAAM,EAAA,EAAI;gBACnB,MAAM,oBAAoB,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA;gBAE1E,kBAAkB,UAAA,CAAW,MAAM,IAAA,CAAK,IAAA,EAAM,CAAC,KAAK,QAAQ;oBAC1D,IAAI,IAAK,CAAA,OAAO,GAAG,GAAG;oBAEtB,IAAI,IAAI,MAAA,EAAQ;wBACd,IAAA,CAAK,cAAA,IAAkB,IAAI,MAAA;wBAC3B,IAAI,IAAA,CAAK,cAAA,GAAiB,IAAA,CAAK,WAAA,IAAe,IAAA,CAAK,WAAA,GAAc,GAAG;4BAClE,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,6BACA,OACA,MACA;4BAGF,GAAG,KAAK;4BACR;wBACF;wBAEA,IAAA,CAAK,UAAA,CAAW,IAAA,CAAK,GAAG;oBAC1B;oBAEA,IAAA,CAAK,WAAA,CAAY,EAAE;oBACnB,IAAI,IAAA,CAAK,MAAA,KAAW,SAAU,CAAA,IAAA,CAAK,SAAA,CAAU,EAAE;gBACjD,CAAC;YACH;YAAA;;;;;OAAA,GAQA,YAAY,EAAA,EAAI;gBACd,IAAI,CAAC,IAAA,CAAK,IAAA,EAAM;oBACd,IAAA,CAAK,MAAA,GAAS;oBACd;gBACF;gBAEA,MAAM,gBAAgB,IAAA,CAAK,cAAA;gBAC3B,MAAM,YAAY,IAAA,CAAK,UAAA;gBAEvB,IAAA,CAAK,mBAAA,GAAsB;gBAC3B,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,WAAA,GAAc;gBACnB,IAAA,CAAK,UAAA,GAAa,CAAC,CAAA;gBAEnB,IAAI,IAAA,CAAK,OAAA,KAAY,GAAG;oBACtB,IAAI;oBAEJ,IAAI,IAAA,CAAK,WAAA,KAAgB,cAAc;wBACrC,OAAO,OAAO,WAAW,aAAa;oBACxC,OAAA,IAAW,IAAA,CAAK,WAAA,KAAgB,eAAe;wBAC7C,OAAO,cAAc,OAAO,WAAW,aAAa,CAAC;oBACvD,OAAA,IAAW,IAAA,CAAK,WAAA,KAAgB,QAAQ;wBACtC,OAAO,IAAI,KAAK,SAAS;oBAC3B,OAAO;wBACL,OAAO;oBACT;oBAEA,IAAI,IAAA,CAAK,uBAAA,EAAyB;wBAChC,IAAA,CAAK,IAAA,CAAK,WAAW,MAAM,IAAI;wBAC/B,IAAA,CAAK,MAAA,GAAS;oBAChB,OAAO;wBACL,IAAA,CAAK,MAAA,GAAS;wBACd,aAAa,MAAM;4BACjB,IAAA,CAAK,IAAA,CAAK,WAAW,MAAM,IAAI;4BAC/B,IAAA,CAAK,MAAA,GAAS;4BACd,IAAA,CAAK,SAAA,CAAU,EAAE;wBACnB,CAAC;oBACH;gBACF,OAAO;oBACL,MAAM,MAAM,OAAO,WAAW,aAAa;oBAE3C,IAAI,CAAC,IAAA,CAAK,mBAAA,IAAuB,CAAC,YAAY,GAAG,GAAG;wBAClD,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,OACA,0BACA,MACA,MACA;wBAGF,GAAG,KAAK;wBACR;oBACF;oBAEA,IAAI,IAAA,CAAK,MAAA,KAAW,aAAa,IAAA,CAAK,uBAAA,EAAyB;wBAC7D,IAAA,CAAK,IAAA,CAAK,WAAW,KAAK,KAAK;wBAC/B,IAAA,CAAK,MAAA,GAAS;oBAChB,OAAO;wBACL,IAAA,CAAK,MAAA,GAAS;wBACd,aAAa,MAAM;4BACjB,IAAA,CAAK,IAAA,CAAK,WAAW,KAAK,KAAK;4BAC/B,IAAA,CAAK,MAAA,GAAS;4BACd,IAAA,CAAK,SAAA,CAAU,EAAE;wBACnB,CAAC;oBACH;gBACF;YACF;YAAA;;;;;;OAAA,GASA,eAAe,IAAA,EAAM,EAAA,EAAI;gBACvB,IAAI,IAAA,CAAK,OAAA,KAAY,GAAM;oBACzB,IAAI,KAAK,MAAA,KAAW,GAAG;wBACrB,IAAA,CAAK,KAAA,GAAQ;wBACb,IAAA,CAAK,IAAA,CAAK,YAAY,MAAM,YAAY;wBACxC,IAAA,CAAK,GAAA,CAAI;oBACX,OAAO;wBACL,MAAM,OAAO,KAAK,YAAA,CAAa,CAAC;wBAEhC,IAAI,CAAC,kBAAkB,IAAI,GAAG;4BAC5B,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,YACA,CAAA,oBAAA,EAAuB,IAAI,EAAA,EAC3B,MACA,MACA;4BAGF,GAAG,KAAK;4BACR;wBACF;wBAEA,MAAM,MAAM,IAAI,WACd,KAAK,MAAA,EACL,KAAK,UAAA,GAAa,GAClB,KAAK,MAAA,GAAS;wBAGhB,IAAI,CAAC,IAAA,CAAK,mBAAA,IAAuB,CAAC,YAAY,GAAG,GAAG;4BAClD,MAAM,QAAQ,IAAA,CAAK,WAAA,CACjB,OACA,0BACA,MACA,MACA;4BAGF,GAAG,KAAK;4BACR;wBACF;wBAEA,IAAA,CAAK,KAAA,GAAQ;wBACb,IAAA,CAAK,IAAA,CAAK,YAAY,MAAM,GAAG;wBAC/B,IAAA,CAAK,GAAA,CAAI;oBACX;oBAEA,IAAA,CAAK,MAAA,GAAS;oBACd;gBACF;gBAEA,IAAI,IAAA,CAAK,uBAAA,EAAyB;oBAChC,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,OAAA,KAAY,IAAO,SAAS,QAAQ,IAAI;oBACvD,IAAA,CAAK,MAAA,GAAS;gBAChB,OAAO;oBACL,IAAA,CAAK,MAAA,GAAS;oBACd,aAAa,MAAM;wBACjB,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,OAAA,KAAY,IAAO,SAAS,QAAQ,IAAI;wBACvD,IAAA,CAAK,MAAA,GAAS;wBACd,IAAA,CAAK,SAAA,CAAU,EAAE;oBACnB,CAAC;gBACH;YACF;YAAA;;;;;;;;;;;OAAA,GAcA,YAAY,SAAA,EAAW,OAAA,EAAS,MAAA,EAAQ,UAAA,EAAY,SAAA,EAAW;gBAC7D,IAAA,CAAK,KAAA,GAAQ;gBACb,IAAA,CAAK,QAAA,GAAW;gBAEhB,MAAM,MAAM,IAAI,UACd,SAAS,CAAA,yBAAA,EAA4B,OAAO,EAAA,GAAK;gBAGnD,MAAM,iBAAA,CAAkB,KAAK,IAAA,CAAK,WAAW;gBAC7C,IAAI,IAAA,GAAO;gBACX,GAAA,CAAI,WAAW,CAAA,GAAI;gBACnB,OAAO;YACT;QACF;QAEA,OAAO,OAAA,GAAUA;IAAA;AAAA;;ACjsBjB,IAAA,iBAAA,WAAA;IAAA,oHAAA,OAAA,EAAA,MAAA;QAAA;QAIA,IAAM,EAAE,MAAA,CAAO,CAAA,GAAI,UAAQ,QAAQ;QACnC,IAAM,EAAE,cAAA,CAAe,CAAA,GAAI,UAAQ,QAAQ;QAE3C,IAAM,oBAAoB;QAC1B,IAAM,EAAE,YAAA,EAAc,UAAA,EAAY,IAAA,CAAK,CAAA,GAAI;QAC3C,IAAM,EAAE,MAAA,EAAQ,iBAAA,CAAkB,CAAA,GAAI;QACtC,IAAM,EAAE,MAAM,SAAA,EAAW,QAAA,CAAS,CAAA,GAAI;QAEtC,IAAM,cAAc,OAAO,aAAa;QACxC,IAAM,aAAa,OAAO,KAAA,CAAM,CAAC;QACjC,IAAM,mBAAmB,IAAI;QAC7B,IAAI;QACJ,IAAI,oBAAoB;QAExB,IAAM,UAAU;QAChB,IAAM,YAAY;QAClB,IAAM,gBAAgB;QAKtB,IAAMC,UAAN,MAAM,QAAO;YAAA;;;;;;;OAAA,GASX,YAAY,MAAA,EAAQ,UAAA,EAAY,YAAA,CAAc;gBAC5C,IAAA,CAAK,WAAA,GAAc,cAAc,CAAC;gBAElC,IAAI,cAAc;oBAChB,IAAA,CAAK,aAAA,GAAgB;oBACrB,IAAA,CAAK,WAAA,GAAc,OAAO,KAAA,CAAM,CAAC;gBACnC;gBAEA,IAAA,CAAK,OAAA,GAAU;gBAEf,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,SAAA,GAAY;gBAEjB,IAAA,CAAK,cAAA,GAAiB;gBACtB,IAAA,CAAK,MAAA,GAAS,CAAC,CAAA;gBACf,IAAA,CAAK,MAAA,GAAS;gBACd,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,UAAU,CAAA,GAAI,KAAA;YACrB;YAAA;;;;;;;;;;;;;;;;;;;;OAAA,GAuBA,OAAO,MAAM,IAAA,EAAM,OAAA,EAAS;gBAC1B,IAAI;gBACJ,IAAI,QAAQ;gBACZ,IAAI,SAAS;gBACb,IAAI,cAAc;gBAElB,IAAI,QAAQ,IAAA,EAAM;oBAChB,OAAO,QAAQ,UAAA,IAAc;oBAE7B,IAAI,QAAQ,YAAA,EAAc;wBACxB,QAAQ,YAAA,CAAa,IAAI;oBAC3B,OAAO;wBACL,IAAI,sBAAsB,kBAAkB;4BAE1C,IAAI,eAAe,KAAA,GAAW;gCAK5B,aAAa,OAAO,KAAA,CAAM,gBAAgB;4BAC5C;4BAEA,eAAe,YAAY,GAAG,gBAAgB;4BAC9C,oBAAoB;wBACtB;wBAEA,IAAA,CAAK,CAAC,CAAA,GAAI,UAAA,CAAW,mBAAmB,CAAA;wBACxC,IAAA,CAAK,CAAC,CAAA,GAAI,UAAA,CAAW,mBAAmB,CAAA;wBACxC,IAAA,CAAK,CAAC,CAAA,GAAI,UAAA,CAAW,mBAAmB,CAAA;wBACxC,IAAA,CAAK,CAAC,CAAA,GAAI,UAAA,CAAW,mBAAmB,CAAA;oBAC1C;oBAEA,cAAA,CAAe,IAAA,CAAK,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA,MAAO;oBAC1D,SAAS;gBACX;gBAEA,IAAI;gBAEJ,IAAI,OAAO,SAAS,UAAU;oBAC5B,IAAA,CACG,CAAC,QAAQ,IAAA,IAAQ,WAAA,KAClB,OAAA,CAAQ,WAAW,CAAA,KAAM,KAAA,GACzB;wBACA,aAAa,OAAA,CAAQ,WAAW,CAAA;oBAClC,OAAO;wBACL,OAAO,OAAO,IAAA,CAAK,IAAI;wBACvB,aAAa,KAAK,MAAA;oBACpB;gBACF,OAAO;oBACL,aAAa,KAAK,MAAA;oBAClB,QAAQ,QAAQ,IAAA,IAAQ,QAAQ,QAAA,IAAY,CAAC;gBAC/C;gBAEA,IAAI,gBAAgB;gBAEpB,IAAI,cAAc,OAAO;oBACvB,UAAU;oBACV,gBAAgB;gBAClB,OAAA,IAAW,aAAa,KAAK;oBAC3B,UAAU;oBACV,gBAAgB;gBAClB;gBAEA,MAAM,SAAS,OAAO,WAAA,CAAY,QAAQ,aAAa,SAAS,MAAM;gBAEtE,MAAA,CAAO,CAAC,CAAA,GAAI,QAAQ,GAAA,GAAM,QAAQ,MAAA,GAAS,MAAO,QAAQ,MAAA;gBAC1D,IAAI,QAAQ,IAAA,CAAM,CAAA,MAAA,CAAO,CAAC,CAAA,IAAK;gBAE/B,MAAA,CAAO,CAAC,CAAA,GAAI;gBAEZ,IAAI,kBAAkB,KAAK;oBACzB,OAAO,aAAA,CAAc,YAAY,CAAC;gBACpC,OAAA,IAAW,kBAAkB,KAAK;oBAChC,MAAA,CAAO,CAAC,CAAA,GAAI,MAAA,CAAO,CAAC,CAAA,GAAI;oBACxB,OAAO,WAAA,CAAY,YAAY,GAAG,CAAC;gBACrC;gBAEA,IAAI,CAAC,QAAQ,IAAA,CAAM,CAAA,OAAO;oBAAC;oBAAQ,IAAI;iBAAA;gBAEvC,MAAA,CAAO,CAAC,CAAA,IAAK;gBACb,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA;gBAC3B,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA;gBAC3B,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA;gBAC3B,MAAA,CAAO,SAAS,CAAC,CAAA,GAAI,IAAA,CAAK,CAAC,CAAA;gBAE3B,IAAI,YAAa,CAAA,OAAO;oBAAC;oBAAQ,IAAI;iBAAA;gBAErC,IAAI,OAAO;oBACT,UAAU,MAAM,MAAM,QAAQ,QAAQ,UAAU;oBAChD,OAAO;wBAAC,MAAM;qBAAA;gBAChB;gBAEA,UAAU,MAAM,MAAM,MAAM,GAAG,UAAU;gBACzC,OAAO;oBAAC;oBAAQ,IAAI;iBAAA;YACtB;YAAA;;;;;;;;OAAA,GAWA,MAAM,IAAA,EAAM,IAAA,EAAM,IAAA,EAAM,EAAA,EAAI;gBAC1B,IAAI;gBAEJ,IAAI,SAAS,KAAA,GAAW;oBACtB,MAAM;gBACR,OAAA,IAAW,OAAO,SAAS,YAAY,CAAC,kBAAkB,IAAI,GAAG;oBAC/D,MAAM,IAAI,UAAU,kDAAkD;gBACxE,OAAA,IAAW,SAAS,KAAA,KAAa,CAAC,KAAK,MAAA,EAAQ;oBAC7C,MAAM,OAAO,WAAA,CAAY,CAAC;oBAC1B,IAAI,aAAA,CAAc,MAAM,CAAC;gBAC3B,OAAO;oBACL,MAAM,SAAS,OAAO,UAAA,CAAW,IAAI;oBAErC,IAAI,SAAS,KAAK;wBAChB,MAAM,IAAI,WAAW,gDAAgD;oBACvE;oBAEA,MAAM,OAAO,WAAA,CAAY,IAAI,MAAM;oBACnC,IAAI,aAAA,CAAc,MAAM,CAAC;oBAEzB,IAAI,OAAO,SAAS,UAAU;wBAC5B,IAAI,KAAA,CAAM,MAAM,CAAC;oBACnB,OAAO;wBACL,IAAI,GAAA,CAAI,MAAM,CAAC;oBACjB;gBACF;gBAEA,MAAM,UAAU;oBACd,CAAC,WAAW,CAAA,EAAG,IAAI,MAAA;oBACnB,KAAK;oBACL,cAAc,IAAA,CAAK,aAAA;oBACnB;oBACA,YAAY,IAAA,CAAK,WAAA;oBACjB,QAAQ;oBACR,UAAU;oBACV,MAAM;gBACR;gBAEA,IAAI,IAAA,CAAK,MAAA,KAAW,SAAS;oBAC3B,IAAA,CAAK,OAAA,CAAQ;wBAAC,IAAA,CAAK,QAAA;wBAAU;wBAAK;wBAAO;wBAAS,EAAE;qBAAC;gBACvD,OAAO;oBACL,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,KAAK,OAAO,GAAG,EAAE;gBAC/C;YACF;YAAA;;;;;;;OAAA,GAUA,KAAK,IAAA,EAAM,IAAA,EAAM,EAAA,EAAI;gBACnB,IAAI;gBACJ,IAAI;gBAEJ,IAAI,OAAO,SAAS,UAAU;oBAC5B,aAAa,OAAO,UAAA,CAAW,IAAI;oBACnC,WAAW;gBACb,OAAA,IAAW,OAAO,IAAI,GAAG;oBACvB,aAAa,KAAK,IAAA;oBAClB,WAAW;gBACb,OAAO;oBACL,OAAO,SAAS,IAAI;oBACpB,aAAa,KAAK,MAAA;oBAClB,WAAW,SAAS,QAAA;gBACtB;gBAEA,IAAI,aAAa,KAAK;oBACpB,MAAM,IAAI,WAAW,kDAAkD;gBACzE;gBAEA,MAAM,UAAU;oBACd,CAAC,WAAW,CAAA,EAAG;oBACf,KAAK;oBACL,cAAc,IAAA,CAAK,aAAA;oBACnB;oBACA,YAAY,IAAA,CAAK,WAAA;oBACjB,QAAQ;oBACR;oBACA,MAAM;gBACR;gBAEA,IAAI,OAAO,IAAI,GAAG;oBAChB,IAAI,IAAA,CAAK,MAAA,KAAW,SAAS;wBAC3B,IAAA,CAAK,OAAA,CAAQ;4BAAC,IAAA,CAAK,WAAA;4BAAa;4BAAM;4BAAO;4BAAS,EAAE;yBAAC;oBAC3D,OAAO;wBACL,IAAA,CAAK,WAAA,CAAY,MAAM,OAAO,SAAS,EAAE;oBAC3C;gBACF,OAAA,IAAW,IAAA,CAAK,MAAA,KAAW,SAAS;oBAClC,IAAA,CAAK,OAAA,CAAQ;wBAAC,IAAA,CAAK,QAAA;wBAAU;wBAAM;wBAAO;wBAAS,EAAE;qBAAC;gBACxD,OAAO;oBACL,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,MAAM,OAAO,GAAG,EAAE;gBAChD;YACF;YAAA;;;;;;;OAAA,GAUA,KAAK,IAAA,EAAM,IAAA,EAAM,EAAA,EAAI;gBACnB,IAAI;gBACJ,IAAI;gBAEJ,IAAI,OAAO,SAAS,UAAU;oBAC5B,aAAa,OAAO,UAAA,CAAW,IAAI;oBACnC,WAAW;gBACb,OAAA,IAAW,OAAO,IAAI,GAAG;oBACvB,aAAa,KAAK,IAAA;oBAClB,WAAW;gBACb,OAAO;oBACL,OAAO,SAAS,IAAI;oBACpB,aAAa,KAAK,MAAA;oBAClB,WAAW,SAAS,QAAA;gBACtB;gBAEA,IAAI,aAAa,KAAK;oBACpB,MAAM,IAAI,WAAW,kDAAkD;gBACzE;gBAEA,MAAM,UAAU;oBACd,CAAC,WAAW,CAAA,EAAG;oBACf,KAAK;oBACL,cAAc,IAAA,CAAK,aAAA;oBACnB;oBACA,YAAY,IAAA,CAAK,WAAA;oBACjB,QAAQ;oBACR;oBACA,MAAM;gBACR;gBAEA,IAAI,OAAO,IAAI,GAAG;oBAChB,IAAI,IAAA,CAAK,MAAA,KAAW,SAAS;wBAC3B,IAAA,CAAK,OAAA,CAAQ;4BAAC,IAAA,CAAK,WAAA;4BAAa;4BAAM;4BAAO;4BAAS,EAAE;yBAAC;oBAC3D,OAAO;wBACL,IAAA,CAAK,WAAA,CAAY,MAAM,OAAO,SAAS,EAAE;oBAC3C;gBACF,OAAA,IAAW,IAAA,CAAK,MAAA,KAAW,SAAS;oBAClC,IAAA,CAAK,OAAA,CAAQ;wBAAC,IAAA,CAAK,QAAA;wBAAU;wBAAM;wBAAO;wBAAS,EAAE;qBAAC;gBACxD,OAAO;oBACL,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,MAAM,OAAO,GAAG,EAAE;gBAChD;YACF;YAAA;;;;;;;;;;;;;;;OAAA,GAkBA,KAAK,IAAA,EAAM,OAAA,EAAS,EAAA,EAAI;gBACtB,MAAM,oBAAoB,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA;gBAC1E,IAAI,SAAS,QAAQ,MAAA,GAAS,IAAI;gBAClC,IAAI,OAAO,QAAQ,QAAA;gBAEnB,IAAI;gBACJ,IAAI;gBAEJ,IAAI,OAAO,SAAS,UAAU;oBAC5B,aAAa,OAAO,UAAA,CAAW,IAAI;oBACnC,WAAW;gBACb,OAAA,IAAW,OAAO,IAAI,GAAG;oBACvB,aAAa,KAAK,IAAA;oBAClB,WAAW;gBACb,OAAO;oBACL,OAAO,SAAS,IAAI;oBACpB,aAAa,KAAK,MAAA;oBAClB,WAAW,SAAS,QAAA;gBACtB;gBAEA,IAAI,IAAA,CAAK,cAAA,EAAgB;oBACvB,IAAA,CAAK,cAAA,GAAiB;oBACtB,IACE,QACA,qBACA,kBAAkB,MAAA,CAChB,kBAAkB,SAAA,GACd,+BACA,4BACN,CAAA,EACA;wBACA,OAAO,cAAc,kBAAkB,UAAA;oBACzC;oBACA,IAAA,CAAK,SAAA,GAAY;gBACnB,OAAO;oBACL,OAAO;oBACP,SAAS;gBACX;gBAEA,IAAI,QAAQ,GAAA,CAAK,CAAA,IAAA,CAAK,cAAA,GAAiB;gBAEvC,MAAM,OAAO;oBACX,CAAC,WAAW,CAAA,EAAG;oBACf,KAAK,QAAQ,GAAA;oBACb,cAAc,IAAA,CAAK,aAAA;oBACnB,MAAM,QAAQ,IAAA;oBACd,YAAY,IAAA,CAAK,WAAA;oBACjB;oBACA;oBACA;gBACF;gBAEA,IAAI,OAAO,IAAI,GAAG;oBAChB,IAAI,IAAA,CAAK,MAAA,KAAW,SAAS;wBAC3B,IAAA,CAAK,OAAA,CAAQ;4BAAC,IAAA,CAAK,WAAA;4BAAa;4BAAM,IAAA,CAAK,SAAA;4BAAW;4BAAM,EAAE;yBAAC;oBACjE,OAAO;wBACL,IAAA,CAAK,WAAA,CAAY,MAAM,IAAA,CAAK,SAAA,EAAW,MAAM,EAAE;oBACjD;gBACF,OAAA,IAAW,IAAA,CAAK,MAAA,KAAW,SAAS;oBAClC,IAAA,CAAK,OAAA,CAAQ;wBAAC,IAAA,CAAK,QAAA;wBAAU;wBAAM,IAAA,CAAK,SAAA;wBAAW;wBAAM,EAAE;qBAAC;gBAC9D,OAAO;oBACL,IAAA,CAAK,QAAA,CAAS,MAAM,IAAA,CAAK,SAAA,EAAW,MAAM,EAAE;gBAC9C;YACF;YAAA;;;;;;;;;;;;;;;;;;;;;;OAAA,GAyBA,YAAY,IAAA,EAAM,QAAA,EAAU,OAAA,EAAS,EAAA,EAAI;gBACvC,IAAA,CAAK,cAAA,IAAkB,OAAA,CAAQ,WAAW,CAAA;gBAC1C,IAAA,CAAK,MAAA,GAAS;gBAEd,KACG,WAAA,CAAY,EACZ,IAAA,CAAK,CAAC,gBAAgB;oBACrB,IAAI,IAAA,CAAK,OAAA,CAAQ,SAAA,EAAW;wBAC1B,MAAM,MAAM,IAAI,MACd;wBAQF,QAAQ,QAAA,CAAS,eAAe,IAAA,EAAM,KAAK,EAAE;wBAC7C;oBACF;oBAEA,IAAA,CAAK,cAAA,IAAkB,OAAA,CAAQ,WAAW,CAAA;oBAC1C,MAAM,OAAO,SAAS,WAAW;oBAEjC,IAAI,CAAC,UAAU;wBACb,IAAA,CAAK,MAAA,GAAS;wBACd,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,MAAM,OAAO,GAAG,EAAE;wBAC9C,IAAA,CAAK,OAAA,CAAQ;oBACf,OAAO;wBACL,IAAA,CAAK,QAAA,CAAS,MAAM,UAAU,SAAS,EAAE;oBAC3C;gBACF,CAAC,EACA,KAAA,CAAM,CAAC,QAAQ;oBAKd,QAAQ,QAAA,CAAS,SAAS,IAAA,EAAM,KAAK,EAAE;gBACzC,CAAC;YACL;YAAA;;;;;;;;;;;;;;;;;;;;;;OAAA,GAyBA,SAAS,IAAA,EAAM,QAAA,EAAU,OAAA,EAAS,EAAA,EAAI;gBACpC,IAAI,CAAC,UAAU;oBACb,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,MAAM,OAAO,GAAG,EAAE;oBAC9C;gBACF;gBAEA,MAAM,oBAAoB,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA;gBAE1E,IAAA,CAAK,cAAA,IAAkB,OAAA,CAAQ,WAAW,CAAA;gBAC1C,IAAA,CAAK,MAAA,GAAS;gBACd,kBAAkB,QAAA,CAAS,MAAM,QAAQ,GAAA,EAAK,CAAC,GAAG,QAAQ;oBACxD,IAAI,IAAA,CAAK,OAAA,CAAQ,SAAA,EAAW;wBAC1B,MAAM,MAAM,IAAI,MACd;wBAGF,cAAc,IAAA,EAAM,KAAK,EAAE;wBAC3B;oBACF;oBAEA,IAAA,CAAK,cAAA,IAAkB,OAAA,CAAQ,WAAW,CAAA;oBAC1C,IAAA,CAAK,MAAA,GAAS;oBACd,QAAQ,QAAA,GAAW;oBACnB,IAAA,CAAK,SAAA,CAAU,QAAO,KAAA,CAAM,KAAK,OAAO,GAAG,EAAE;oBAC7C,IAAA,CAAK,OAAA,CAAQ;gBACf,CAAC;YACH;YAAA;;;;OAAA,GAOA,UAAU;gBACR,MAAO,IAAA,CAAK,MAAA,KAAW,WAAW,IAAA,CAAK,MAAA,CAAO,MAAA,CAAQ;oBACpD,MAAM,SAAS,IAAA,CAAK,MAAA,CAAO,KAAA,CAAM;oBAEjC,IAAA,CAAK,cAAA,IAAkB,MAAA,CAAO,CAAC,CAAA,CAAE,WAAW,CAAA;oBAC5C,QAAQ,KAAA,CAAM,MAAA,CAAO,CAAC,CAAA,EAAG,IAAA,EAAM,OAAO,KAAA,CAAM,CAAC,CAAC;gBAChD;YACF;YAAA;;;;;OAAA,GAQA,QAAQ,MAAA,EAAQ;gBACd,IAAA,CAAK,cAAA,IAAkB,MAAA,CAAO,CAAC,CAAA,CAAE,WAAW,CAAA;gBAC5C,IAAA,CAAK,MAAA,CAAO,IAAA,CAAK,MAAM;YACzB;YAAA;;;;;;OAAA,GASA,UAAU,IAAA,EAAM,EAAA,EAAI;gBAClB,IAAI,KAAK,MAAA,KAAW,GAAG;oBACrB,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK;oBAClB,IAAA,CAAK,OAAA,CAAQ,KAAA,CAAM,IAAA,CAAK,CAAC,CAAC;oBAC1B,IAAA,CAAK,OAAA,CAAQ,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,EAAG,EAAE;oBAC9B,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO;gBACtB,OAAO;oBACL,IAAA,CAAK,OAAA,CAAQ,KAAA,CAAM,IAAA,CAAK,CAAC,CAAA,EAAG,EAAE;gBAChC;YACF;QACF;QAEA,OAAO,OAAA,GAAUA;QAUjB,SAAS,cAAc,MAAA,EAAQ,GAAA,EAAK,EAAA,EAAI;YACtC,IAAI,OAAO,OAAO,WAAY,CAAA,GAAG,GAAG;YAEpC,IAAA,IAAS,IAAI,GAAG,IAAI,OAAO,MAAA,CAAO,MAAA,EAAQ,IAAK;gBAC7C,MAAM,SAAS,OAAO,MAAA,CAAO,CAAC,CAAA;gBAC9B,MAAM,WAAW,MAAA,CAAO,OAAO,MAAA,GAAS,CAAC,CAAA;gBAEzC,IAAI,OAAO,aAAa,WAAY,CAAA,SAAS,GAAG;YAClD;QACF;QAUA,SAAS,QAAQ,MAAA,EAAQ,GAAA,EAAK,EAAA,EAAI;YAChC,cAAc,QAAQ,KAAK,EAAE;YAC7B,OAAO,OAAA,CAAQ,GAAG;QACpB;IAAA;AAAA;;ACzlBA,IAAA,uBAAA,WAAA;IAAA,0HAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,oBAAA,EAAsB,SAAA,CAAU,CAAA,GAAI;QAE5C,IAAM,QAAQ,OAAO,OAAO;QAC5B,IAAM,QAAQ,OAAO,OAAO;QAC5B,IAAM,SAAS,OAAO,QAAQ;QAC9B,IAAM,WAAW,OAAO,UAAU;QAClC,IAAM,UAAU,OAAO,SAAS;QAChC,IAAM,UAAU,OAAO,SAAS;QAChC,IAAM,QAAQ,OAAO,OAAO;QAC5B,IAAM,YAAY,OAAO,WAAW;QAKpC,IAAM,QAAN,MAAY;YAAA;;;;;OAAA,GAOV,YAAY,IAAA,CAAM;gBAChB,IAAA,CAAK,OAAO,CAAA,GAAI;gBAChB,IAAA,CAAK,KAAK,CAAA,GAAI;YAChB;YAAA;;OAAA,GAKA,IAAI,SAAS;gBACX,OAAO,IAAA,CAAK,OAAO,CAAA;YACrB;YAAA;;OAAA,GAKA,IAAI,OAAO;gBACT,OAAO,IAAA,CAAK,KAAK,CAAA;YACnB;QACF;QAEA,OAAO,cAAA,CAAe,MAAM,SAAA,EAAW,UAAU;YAAE,YAAY;QAAK,CAAC;QACrE,OAAO,cAAA,CAAe,MAAM,SAAA,EAAW,QAAQ;YAAE,YAAY;QAAK,CAAC;QAOnE,IAAM,aAAN,cAAyB,MAAM;YAAA;;;;;;;;;;;;OAAA,GAc7B,YAAY,IAAA,EAAM,UAAU,CAAC,CAAA,CAAG;gBAC9B,KAAA,CAAM,IAAI;gBAEV,IAAA,CAAK,KAAK,CAAA,GAAI,QAAQ,IAAA,KAAS,KAAA,IAAY,IAAI,QAAQ,IAAA;gBACvD,IAAA,CAAK,OAAO,CAAA,GAAI,QAAQ,MAAA,KAAW,KAAA,IAAY,KAAK,QAAQ,MAAA;gBAC5D,IAAA,CAAK,SAAS,CAAA,GAAI,QAAQ,QAAA,KAAa,KAAA,IAAY,QAAQ,QAAQ,QAAA;YACrE;YAAA;;OAAA,GAKA,IAAI,OAAO;gBACT,OAAO,IAAA,CAAK,KAAK,CAAA;YACnB;YAAA;;OAAA,GAKA,IAAI,SAAS;gBACX,OAAO,IAAA,CAAK,OAAO,CAAA;YACrB;YAAA;;OAAA,GAKA,IAAI,WAAW;gBACb,OAAO,IAAA,CAAK,SAAS,CAAA;YACvB;QACF;QAEA,OAAO,cAAA,CAAe,WAAW,SAAA,EAAW,QAAQ;YAAE,YAAY;QAAK,CAAC;QACxE,OAAO,cAAA,CAAe,WAAW,SAAA,EAAW,UAAU;YAAE,YAAY;QAAK,CAAC;QAC1E,OAAO,cAAA,CAAe,WAAW,SAAA,EAAW,YAAY;YAAE,YAAY;QAAK,CAAC;QAO5E,IAAM,aAAN,cAAyB,MAAM;YAAA;;;;;;;;OAAA,GAU7B,YAAY,IAAA,EAAM,UAAU,CAAC,CAAA,CAAG;gBAC9B,KAAA,CAAM,IAAI;gBAEV,IAAA,CAAK,MAAM,CAAA,GAAI,QAAQ,KAAA,KAAU,KAAA,IAAY,OAAO,QAAQ,KAAA;gBAC5D,IAAA,CAAK,QAAQ,CAAA,GAAI,QAAQ,OAAA,KAAY,KAAA,IAAY,KAAK,QAAQ,OAAA;YAChE;YAAA;;OAAA,GAKA,IAAI,QAAQ;gBACV,OAAO,IAAA,CAAK,MAAM,CAAA;YACpB;YAAA;;OAAA,GAKA,IAAI,UAAU;gBACZ,OAAO,IAAA,CAAK,QAAQ,CAAA;YACtB;QACF;QAEA,OAAO,cAAA,CAAe,WAAW,SAAA,EAAW,SAAS;YAAE,YAAY;QAAK,CAAC;QACzE,OAAO,cAAA,CAAe,WAAW,SAAA,EAAW,WAAW;YAAE,YAAY;QAAK,CAAC;QAO3E,IAAM,eAAN,cAA2B,MAAM;YAAA;;;;;;;OAAA,GAS/B,YAAY,IAAA,EAAM,UAAU,CAAC,CAAA,CAAG;gBAC9B,KAAA,CAAM,IAAI;gBAEV,IAAA,CAAK,KAAK,CAAA,GAAI,QAAQ,IAAA,KAAS,KAAA,IAAY,OAAO,QAAQ,IAAA;YAC5D;YAAA;;OAAA,GAKA,IAAI,OAAO;gBACT,OAAO,IAAA,CAAK,KAAK,CAAA;YACnB;QACF;QAEA,OAAO,cAAA,CAAe,aAAa,SAAA,EAAW,QAAQ;YAAE,YAAY;QAAK,CAAC;QAQ1E,IAAM,cAAc;YAAA;;;;;;;;;;;OAAA,GAalB,kBAAiB,IAAA,EAAM,OAAA,EAAS,UAAU,CAAC,CAAA,EAAG;gBAC5C,KAAA,MAAW,YAAY,IAAA,CAAK,SAAA,CAAU,IAAI,EAAG;oBAC3C,IACE,CAAC,OAAA,CAAQ,oBAAoB,CAAA,IAC7B,QAAA,CAAS,SAAS,CAAA,KAAM,WACxB,CAAC,QAAA,CAAS,oBAAoB,CAAA,EAC9B;wBACA;oBACF;gBACF;gBAEA,IAAI;gBAEJ,IAAI,SAAS,WAAW;oBACtB,UAAU,SAAS,UAAU,IAAA,EAAM,QAAA,EAAU;wBAC3C,MAAM,QAAQ,IAAI,aAAa,WAAW;4BACxC,MAAM,WAAW,OAAO,KAAK,QAAA,CAAS;wBACxC,CAAC;wBAED,KAAA,CAAM,OAAO,CAAA,GAAI,IAAA;wBACjB,aAAa,SAAS,IAAA,EAAM,KAAK;oBACnC;gBACF,OAAA,IAAW,SAAS,SAAS;oBAC3B,UAAU,SAAS,QAAQ,IAAA,EAAM,OAAA,EAAS;wBACxC,MAAM,QAAQ,IAAI,WAAW,SAAS;4BACpC;4BACA,QAAQ,QAAQ,QAAA,CAAS;4BACzB,UAAU,IAAA,CAAK,mBAAA,IAAuB,IAAA,CAAK,eAAA;wBAC7C,CAAC;wBAED,KAAA,CAAM,OAAO,CAAA,GAAI,IAAA;wBACjB,aAAa,SAAS,IAAA,EAAM,KAAK;oBACnC;gBACF,OAAA,IAAW,SAAS,SAAS;oBAC3B,UAAU,SAAS,QAAQ,KAAA,EAAO;wBAChC,MAAM,QAAQ,IAAI,WAAW,SAAS;4BACpC;4BACA,SAAS,MAAM,OAAA;wBACjB,CAAC;wBAED,KAAA,CAAM,OAAO,CAAA,GAAI,IAAA;wBACjB,aAAa,SAAS,IAAA,EAAM,KAAK;oBACnC;gBACF,OAAA,IAAW,SAAS,QAAQ;oBAC1B,UAAU,SAAS,SAAS;wBAC1B,MAAM,QAAQ,IAAI,MAAM,MAAM;wBAE9B,KAAA,CAAM,OAAO,CAAA,GAAI,IAAA;wBACjB,aAAa,SAAS,IAAA,EAAM,KAAK;oBACnC;gBACF,OAAO;oBACL;gBACF;gBAEA,OAAA,CAAQ,oBAAoB,CAAA,GAAI,CAAC,CAAC,OAAA,CAAQ,oBAAoB,CAAA;gBAC9D,OAAA,CAAQ,SAAS,CAAA,GAAI;gBAErB,IAAI,QAAQ,IAAA,EAAM;oBAChB,IAAA,CAAK,IAAA,CAAK,MAAM,OAAO;gBACzB,OAAO;oBACL,IAAA,CAAK,EAAA,CAAG,MAAM,OAAO;gBACvB;YACF;YAAA;;;;;;OAAA,GASA,qBAAoB,IAAA,EAAM,OAAA,EAAS;gBACjC,KAAA,MAAW,YAAY,IAAA,CAAK,SAAA,CAAU,IAAI,EAAG;oBAC3C,IAAI,QAAA,CAAS,SAAS,CAAA,KAAM,WAAW,CAAC,QAAA,CAAS,oBAAoB,CAAA,EAAG;wBACtE,IAAA,CAAK,cAAA,CAAe,MAAM,QAAQ;wBAClC;oBACF;gBACF;YACF;QACF;QAEA,OAAO,OAAA,GAAU;YACf;YACA;YACA;YACA;YACA;QACF;QAUA,SAAS,aAAa,QAAA,EAAU,OAAA,EAAS,KAAA,EAAO;YAC9C,IAAI,OAAO,aAAa,YAAY,SAAS,WAAA,EAAa;gBACxD,SAAS,WAAA,CAAY,IAAA,CAAK,UAAU,KAAK;YAC3C,OAAO;gBACL,SAAS,IAAA,CAAK,SAAS,KAAK;YAC9B;QACF;IAAA;AAAA;;ACnSA,IAAA,oBAAA,WAAA;IAAA,uHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,UAAA,CAAW,CAAA,GAAI;QAYvB,SAAS,KAAK,IAAA,EAAM,IAAA,EAAM,IAAA,EAAM;YAC9B,IAAI,IAAA,CAAK,IAAI,CAAA,KAAM,KAAA,EAAW,CAAA,IAAA,CAAK,IAAI,CAAA,GAAI;gBAAC,IAAI;aAAA;iBAC3C,IAAA,CAAK,IAAI,CAAA,CAAE,IAAA,CAAK,IAAI;QAC3B;QASA,SAAS,MAAM,MAAA,EAAQ;YACrB,MAAM,SAAS,aAAA,GAAA,OAAO,MAAA,CAAO,IAAI;YACjC,IAAI,SAAS,aAAA,GAAA,OAAO,MAAA,CAAO,IAAI;YAC/B,IAAI,eAAe;YACnB,IAAI,aAAa;YACjB,IAAI,WAAW;YACf,IAAI;YACJ,IAAI;YACJ,IAAI,QAAQ,CAAA;YACZ,IAAI,OAAO,CAAA;YACX,IAAI,MAAM,CAAA;YACV,IAAI,IAAI;YAER,MAAO,IAAI,OAAO,MAAA,EAAQ,IAAK;gBAC7B,OAAO,OAAO,UAAA,CAAW,CAAC;gBAE1B,IAAI,kBAAkB,KAAA,GAAW;oBAC/B,IAAI,QAAQ,CAAA,KAAM,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;wBACxC,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;oBAC5B,OAAA,IACE,MAAM,KAAA,CACL,SAAS,MAAkB,SAAS,CAAA,GACrC;wBACA,IAAI,QAAQ,CAAA,KAAM,UAAU,CAAA,EAAI,CAAA,MAAM;oBACxC,OAAA,IAAW,SAAS,MAAkB,SAAS,IAAgB;wBAC7D,IAAI,UAAU,CAAA,GAAI;4BAChB,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;wBAC5D;wBAEA,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;wBACtB,MAAM,OAAO,OAAO,KAAA,CAAM,OAAO,GAAG;wBACpC,IAAI,SAAS,IAAM;4BACjB,KAAK,QAAQ,MAAM,MAAM;4BACzB,SAAS,aAAA,GAAA,OAAO,MAAA,CAAO,IAAI;wBAC7B,OAAO;4BACL,gBAAgB;wBAClB;wBAEA,QAAQ,MAAM,CAAA;oBAChB,OAAO;wBACL,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;oBAC5D;gBACF,OAAA,IAAW,cAAc,KAAA,GAAW;oBAClC,IAAI,QAAQ,CAAA,KAAM,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;wBACxC,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;oBAC5B,OAAA,IAAW,SAAS,MAAQ,SAAS,GAAM;wBACzC,IAAI,QAAQ,CAAA,KAAM,UAAU,CAAA,EAAI,CAAA,MAAM;oBACxC,OAAA,IAAW,SAAS,MAAQ,SAAS,IAAM;wBACzC,IAAI,UAAU,CAAA,GAAI;4BAChB,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;wBAC5D;wBAEA,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;wBACtB,KAAK,QAAQ,OAAO,KAAA,CAAM,OAAO,GAAG,GAAG,IAAI;wBAC3C,IAAI,SAAS,IAAM;4BACjB,KAAK,QAAQ,eAAe,MAAM;4BAClC,SAAS,aAAA,GAAA,OAAO,MAAA,CAAO,IAAI;4BAC3B,gBAAgB,KAAA;wBAClB;wBAEA,QAAQ,MAAM,CAAA;oBAChB,OAAA,IAAW,SAAS,MAAkB,UAAU,CAAA,KAAM,QAAQ,CAAA,GAAI;wBAChE,YAAY,OAAO,KAAA,CAAM,OAAO,CAAC;wBACjC,QAAQ,MAAM,CAAA;oBAChB,OAAO;wBACL,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;oBAC5D;gBACF,OAAO;oBAML,IAAI,YAAY;wBACd,IAAI,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;4BAC1B,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;wBAC5D;wBACA,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;6BAAA,IACjB,CAAC,aAAc,CAAA,eAAe;wBACvC,aAAa;oBACf,OAAA,IAAW,UAAU;wBACnB,IAAI,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;4BAC1B,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;wBAC5B,OAAA,IAAW,SAAS,MAAkB,UAAU,CAAA,GAAI;4BAClD,WAAW;4BACX,MAAM;wBACR,OAAA,IAAW,SAAS,IAAgB;4BAClC,aAAa;wBACf,OAAO;4BACL,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;wBAC5D;oBACF,OAAA,IAAW,SAAS,MAAQ,OAAO,UAAA,CAAW,IAAI,CAAC,MAAM,IAAM;wBAC7D,WAAW;oBACb,OAAA,IAAW,QAAQ,CAAA,KAAM,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;wBAC/C,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;oBAC5B,OAAA,IAAW,UAAU,CAAA,KAAA,CAAO,SAAS,MAAQ,SAAS,CAAA,GAAO;wBAC3D,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;oBACxB,OAAA,IAAW,SAAS,MAAQ,SAAS,IAAM;wBACzC,IAAI,UAAU,CAAA,GAAI;4BAChB,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;wBAC5D;wBAEA,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;wBACtB,IAAI,QAAQ,OAAO,KAAA,CAAM,OAAO,GAAG;wBACnC,IAAI,cAAc;4BAChB,QAAQ,MAAM,OAAA,CAAQ,OAAO,EAAE;4BAC/B,eAAe;wBACjB;wBACA,KAAK,QAAQ,WAAW,KAAK;wBAC7B,IAAI,SAAS,IAAM;4BACjB,KAAK,QAAQ,eAAe,MAAM;4BAClC,SAAS,aAAA,GAAA,OAAO,MAAA,CAAO,IAAI;4BAC3B,gBAAgB,KAAA;wBAClB;wBAEA,YAAY,KAAA;wBACZ,QAAQ,MAAM,CAAA;oBAChB,OAAO;wBACL,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;oBAC5D;gBACF;YACF;YAEA,IAAI,UAAU,CAAA,KAAM,YAAY,SAAS,MAAQ,SAAS,GAAM;gBAC9D,MAAM,IAAI,YAAY,yBAAyB;YACjD;YAEA,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;YACtB,MAAM,QAAQ,OAAO,KAAA,CAAM,OAAO,GAAG;YACrC,IAAI,kBAAkB,KAAA,GAAW;gBAC/B,KAAK,QAAQ,OAAO,MAAM;YAC5B,OAAO;gBACL,IAAI,cAAc,KAAA,GAAW;oBAC3B,KAAK,QAAQ,OAAO,IAAI;gBAC1B,OAAA,IAAW,cAAc;oBACvB,KAAK,QAAQ,WAAW,MAAM,OAAA,CAAQ,OAAO,EAAE,CAAC;gBAClD,OAAO;oBACL,KAAK,QAAQ,WAAW,KAAK;gBAC/B;gBACA,KAAK,QAAQ,eAAe,MAAM;YACpC;YAEA,OAAO;QACT;QASA,SAAS,OAAO,UAAA,EAAY;YAC1B,OAAO,OAAO,IAAA,CAAK,UAAU,EAC1B,GAAA,CAAI,CAAC,cAAc;gBAClB,IAAI,iBAAiB,UAAA,CAAW,SAAS,CAAA;gBACzC,IAAI,CAAC,MAAM,OAAA,CAAQ,cAAc,EAAG,CAAA,iBAAiB;oBAAC,cAAc;iBAAA;gBACpE,OAAO,eACJ,GAAA,CAAI,CAAC,WAAW;oBACf,OAAO;wBAAC,SAAS;qBAAA,CACd,MAAA,CACC,OAAO,IAAA,CAAK,MAAM,EAAE,GAAA,CAAI,CAAC,MAAM;wBAC7B,IAAI,SAAS,MAAA,CAAO,CAAC,CAAA;wBACrB,IAAI,CAAC,MAAM,OAAA,CAAQ,MAAM,EAAG,CAAA,SAAS;4BAAC,MAAM;yBAAA;wBAC5C,OAAO,OACJ,GAAA,CAAI,CAAC,IAAO,MAAM,OAAO,IAAI,GAAG,CAAC,CAAA,CAAA,EAAI,CAAC,EAAG,EACzC,IAAA,CAAK,IAAI;oBACd,CAAC,GAEF,IAAA,CAAK,IAAI;gBACd,CAAC,EACA,IAAA,CAAK,IAAI;YACd,CAAC,EACA,IAAA,CAAK,IAAI;QACd;QAEA,OAAO,OAAA,GAAU;YAAE;YAAQ;QAAM;IAAA;AAAA;;AC1MjC,IAAA,oBAAA,WAAA;IAAA,uHAAA,OAAA,EAAA,MAAA;QAAA;QAIA,IAAM,eAAe,UAAQ,QAAQ;QACrC,IAAM,QAAQ,UAAQ,OAAO;QAC7B,IAAM,OAAO,UAAQ,MAAM;QAC3B,IAAM,MAAM,UAAQ,KAAK;QACzB,IAAM,MAAM,UAAQ,KAAK;QACzB,IAAM,EAAE,WAAA,EAAa,UAAA,CAAW,CAAA,GAAI,UAAQ,QAAQ;QACpD,IAAM,EAAE,MAAA,EAAQ,QAAA,CAAS,CAAA,GAAI,UAAQ,QAAQ;QAC7C,IAAM,EAAE,GAAA,CAAI,CAAA,GAAI,UAAQ,KAAK;QAE7B,IAAM,oBAAoB;QAC1B,IAAMC,YAAW;QACjB,IAAMC,UAAS;QACf,IAAM,EAAE,MAAA,CAAO,CAAA,GAAI;QAEnB,IAAM,EACJ,YAAA,EACA,YAAA,EACA,IAAA,EACA,oBAAA,EACA,SAAA,EACA,WAAA,EACA,UAAA,EACA,IAAA,EACF,GAAI;QACJ,IAAM,EACJ,aAAa,EAAE,gBAAA,EAAkB,mBAAA,CAAoB,CAAA,EACvD,GAAI;QACJ,IAAM,EAAE,MAAA,EAAQ,KAAA,CAAM,CAAA,GAAI;QAC1B,IAAM,EAAE,QAAA,CAAS,CAAA,GAAI;QAErB,IAAM,eAAe,KAAK;QAC1B,IAAM,WAAW,OAAO,UAAU;QAClC,IAAM,mBAAmB;YAAC;YAAG,EAAE;SAAA;QAC/B,IAAM,cAAc;YAAC;YAAc;YAAQ;YAAW,QAAQ;SAAA;QAC9D,IAAM,mBAAmB;QAOzB,IAAMC,aAAN,MAAM,mBAAkB,aAAa;YAAA;;;;;;OAAA,GAQnC,YAAY,OAAA,EAAS,SAAA,EAAW,OAAA,CAAS;gBACvC,KAAA,CAAM;gBAEN,IAAA,CAAK,WAAA,GAAc,YAAA,CAAa,CAAC,CAAA;gBACjC,IAAA,CAAK,UAAA,GAAa;gBAClB,IAAA,CAAK,mBAAA,GAAsB;gBAC3B,IAAA,CAAK,eAAA,GAAkB;gBACvB,IAAA,CAAK,aAAA,GAAgB;gBACrB,IAAA,CAAK,WAAA,GAAc;gBACnB,IAAA,CAAK,aAAA,GAAgB;gBACrB,IAAA,CAAK,WAAA,GAAc,CAAC;gBACpB,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,SAAA,GAAY;gBACjB,IAAA,CAAK,WAAA,GAAc,WAAU,UAAA;gBAC7B,IAAA,CAAK,SAAA,GAAY;gBACjB,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,OAAA,GAAU;gBAEf,IAAI,YAAY,MAAM;oBACpB,IAAA,CAAK,eAAA,GAAkB;oBACvB,IAAA,CAAK,SAAA,GAAY;oBACjB,IAAA,CAAK,UAAA,GAAa;oBAElB,IAAI,cAAc,KAAA,GAAW;wBAC3B,YAAY,CAAC,CAAA;oBACf,OAAA,IAAW,CAAC,MAAM,OAAA,CAAQ,SAAS,GAAG;wBACpC,IAAI,OAAO,cAAc,YAAY,cAAc,MAAM;4BACvD,UAAU;4BACV,YAAY,CAAC,CAAA;wBACf,OAAO;4BACL,YAAY;gCAAC,SAAS;6BAAA;wBACxB;oBACF;oBAEA,aAAa,IAAA,EAAM,SAAS,WAAW,OAAO;gBAChD,OAAO;oBACL,IAAA,CAAK,SAAA,GAAY,QAAQ,QAAA;oBACzB,IAAA,CAAK,SAAA,GAAY;gBACnB;YACF;YAAA;;;;;OAAA,GAQA,IAAI,aAAa;gBACf,OAAO,IAAA,CAAK,WAAA;YACd;YAEA,IAAI,WAAW,IAAA,EAAM;gBACnB,IAAI,CAAC,aAAa,QAAA,CAAS,IAAI,EAAG,CAAA;gBAElC,IAAA,CAAK,WAAA,GAAc;gBAKnB,IAAI,IAAA,CAAK,SAAA,CAAW,CAAA,IAAA,CAAK,SAAA,CAAU,WAAA,GAAc;YACnD;YAAA;;OAAA,GAKA,IAAI,iBAAiB;gBACnB,IAAI,CAAC,IAAA,CAAK,OAAA,CAAS,CAAA,OAAO,IAAA,CAAK,eAAA;gBAE/B,OAAO,IAAA,CAAK,OAAA,CAAQ,cAAA,CAAe,MAAA,GAAS,IAAA,CAAK,OAAA,CAAQ,cAAA;YAC3D;YAAA;;OAAA,GAKA,IAAI,aAAa;gBACf,OAAO,OAAO,IAAA,CAAK,IAAA,CAAK,WAAW,EAAE,IAAA,CAAK;YAC5C;YAAA;;OAAA,GAKA,IAAI,WAAW;gBACb,OAAO,IAAA,CAAK,OAAA;YACd;YAAA;;OAAA,GAAA,wBAAA,GAMA,IAAI,UAAU;gBACZ,OAAO;YACT;YAAA;;OAAA,GAAA,wBAAA,GAMA,IAAI,UAAU;gBACZ,OAAO;YACT;YAAA;;OAAA,GAAA,wBAAA,GAMA,IAAI,SAAS;gBACX,OAAO;YACT;YAAA;;OAAA,GAAA,wBAAA,GAMA,IAAI,YAAY;gBACd,OAAO;YACT;YAAA;;OAAA,GAKA,IAAI,WAAW;gBACb,OAAO,IAAA,CAAK,SAAA;YACd;YAAA;;OAAA,GAKA,IAAI,aAAa;gBACf,OAAO,IAAA,CAAK,WAAA;YACd;YAAA;;OAAA,GAKA,IAAI,MAAM;gBACR,OAAO,IAAA,CAAK,IAAA;YACd;YAAA;;;;;;;;;;;;;;;OAAA,GAkBA,UAAU,MAAA,EAAQ,IAAA,EAAM,OAAA,EAAS;gBAC/B,MAAM,WAAW,IAAIF,UAAS;oBAC5B,wBAAwB,QAAQ,sBAAA;oBAChC,YAAY,IAAA,CAAK,UAAA;oBACjB,YAAY,IAAA,CAAK,WAAA;oBACjB,UAAU,IAAA,CAAK,SAAA;oBACf,YAAY,QAAQ,UAAA;oBACpB,oBAAoB,QAAQ,kBAAA;gBAC9B,CAAC;gBAED,MAAM,SAAS,IAAIC,QAAO,QAAQ,IAAA,CAAK,WAAA,EAAa,QAAQ,YAAY;gBAExE,IAAA,CAAK,SAAA,GAAY;gBACjB,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,OAAA,GAAU;gBAEf,QAAA,CAAS,UAAU,CAAA,GAAI,IAAA;gBACvB,MAAA,CAAO,UAAU,CAAA,GAAI,IAAA;gBACrB,MAAA,CAAO,UAAU,CAAA,GAAI,IAAA;gBAErB,SAAS,EAAA,CAAG,YAAY,kBAAkB;gBAC1C,SAAS,EAAA,CAAG,SAAS,eAAe;gBACpC,SAAS,EAAA,CAAG,SAAS,eAAe;gBACpC,SAAS,EAAA,CAAG,WAAW,iBAAiB;gBACxC,SAAS,EAAA,CAAG,QAAQ,cAAc;gBAClC,SAAS,EAAA,CAAG,QAAQ,cAAc;gBAElC,OAAO,OAAA,GAAU;gBAKjB,IAAI,OAAO,UAAA,CAAY,CAAA,OAAO,UAAA,CAAW,CAAC;gBAC1C,IAAI,OAAO,UAAA,CAAY,CAAA,OAAO,UAAA,CAAW;gBAEzC,IAAI,KAAK,MAAA,GAAS,EAAG,CAAA,OAAO,OAAA,CAAQ,IAAI;gBAExC,OAAO,EAAA,CAAG,SAAS,aAAa;gBAChC,OAAO,EAAA,CAAG,QAAQ,YAAY;gBAC9B,OAAO,EAAA,CAAG,OAAO,WAAW;gBAC5B,OAAO,EAAA,CAAG,SAAS,aAAa;gBAEhC,IAAA,CAAK,WAAA,GAAc,WAAU,IAAA;gBAC7B,IAAA,CAAK,IAAA,CAAK,MAAM;YAClB;YAAA;;;;OAAA,GAOA,YAAY;gBACV,IAAI,CAAC,IAAA,CAAK,OAAA,EAAS;oBACjB,IAAA,CAAK,WAAA,GAAc,WAAU,MAAA;oBAC7B,IAAA,CAAK,IAAA,CAAK,SAAS,IAAA,CAAK,UAAA,EAAY,IAAA,CAAK,aAAa;oBACtD;gBACF;gBAEA,IAAI,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA,EAAG;oBACrD,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA,CAAE,OAAA,CAAQ;gBAC5D;gBAEA,IAAA,CAAK,SAAA,CAAU,kBAAA,CAAmB;gBAClC,IAAA,CAAK,WAAA,GAAc,WAAU,MAAA;gBAC7B,IAAA,CAAK,IAAA,CAAK,SAAS,IAAA,CAAK,UAAA,EAAY,IAAA,CAAK,aAAa;YACxD;YAAA;;;;;;;;;;;;;;;;;;;OAAA,GAsBA,MAAM,IAAA,EAAM,IAAA,EAAM;gBAChB,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,MAAA,CAAQ,CAAA;gBAC1C,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,EAAY;oBAC5C,MAAM,MAAM;oBACZ,eAAe,IAAA,EAAM,IAAA,CAAK,IAAA,EAAM,GAAG;oBACnC;gBACF;gBAEA,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,OAAA,EAAS;oBACzC,IACE,IAAA,CAAK,eAAA,IAAA,CACJ,IAAA,CAAK,mBAAA,IAAuB,IAAA,CAAK,SAAA,CAAU,cAAA,CAAe,YAAA,GAC3D;wBACA,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI;oBACnB;oBAEA;gBACF;gBAEA,IAAA,CAAK,WAAA,GAAc,WAAU,OAAA;gBAC7B,IAAA,CAAK,OAAA,CAAQ,KAAA,CAAM,MAAM,MAAM,CAAC,IAAA,CAAK,SAAA,EAAW,CAAC,QAAQ;oBAKvD,IAAI,IAAK,CAAA;oBAET,IAAA,CAAK,eAAA,GAAkB;oBAEvB,IACE,IAAA,CAAK,mBAAA,IACL,IAAA,CAAK,SAAA,CAAU,cAAA,CAAe,YAAA,EAC9B;wBACA,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI;oBACnB;gBACF,CAAC;gBAED,cAAc,IAAI;YACpB;YAAA;;;;OAAA,GAOA,QAAQ;gBACN,IACE,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,IAC9B,IAAA,CAAK,UAAA,KAAe,WAAU,MAAA,EAC9B;oBACA;gBACF;gBAEA,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,OAAA,CAAQ,KAAA,CAAM;YACrB;YAAA;;;;;;;OAAA,GAUA,KAAK,IAAA,EAAM,IAAA,EAAM,EAAA,EAAI;gBACnB,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,EAAY;oBAC5C,MAAM,IAAI,MAAM,kDAAkD;gBACpE;gBAEA,IAAI,OAAO,SAAS,YAAY;oBAC9B,KAAK;oBACL,OAAO,OAAO,KAAA;gBAChB,OAAA,IAAW,OAAO,SAAS,YAAY;oBACrC,KAAK;oBACL,OAAO,KAAA;gBACT;gBAEA,IAAI,OAAO,SAAS,SAAU,CAAA,OAAO,KAAK,QAAA,CAAS;gBAEnD,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,IAAA,EAAM;oBACtC,eAAe,IAAA,EAAM,MAAM,EAAE;oBAC7B;gBACF;gBAEA,IAAI,SAAS,KAAA,EAAW,CAAA,OAAO,CAAC,IAAA,CAAK,SAAA;gBACrC,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,QAAQ,cAAc,MAAM,EAAE;YAClD;YAAA;;;;;;;OAAA,GAUA,KAAK,IAAA,EAAM,IAAA,EAAM,EAAA,EAAI;gBACnB,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,EAAY;oBAC5C,MAAM,IAAI,MAAM,kDAAkD;gBACpE;gBAEA,IAAI,OAAO,SAAS,YAAY;oBAC9B,KAAK;oBACL,OAAO,OAAO,KAAA;gBAChB,OAAA,IAAW,OAAO,SAAS,YAAY;oBACrC,KAAK;oBACL,OAAO,KAAA;gBACT;gBAEA,IAAI,OAAO,SAAS,SAAU,CAAA,OAAO,KAAK,QAAA,CAAS;gBAEnD,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,IAAA,EAAM;oBACtC,eAAe,IAAA,EAAM,MAAM,EAAE;oBAC7B;gBACF;gBAEA,IAAI,SAAS,KAAA,EAAW,CAAA,OAAO,CAAC,IAAA,CAAK,SAAA;gBACrC,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,QAAQ,cAAc,MAAM,EAAE;YAClD;YAAA;;;;OAAA,GAOA,SAAS;gBACP,IACE,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,IAC9B,IAAA,CAAK,UAAA,KAAe,WAAU,MAAA,EAC9B;oBACA;gBACF;gBAEA,IAAA,CAAK,OAAA,GAAU;gBACf,IAAI,CAAC,IAAA,CAAK,SAAA,CAAU,cAAA,CAAe,SAAA,CAAW,CAAA,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO;YACpE;YAAA;;;;;;;;;;;;;;OAAA,GAiBA,KAAK,IAAA,EAAM,OAAA,EAAS,EAAA,EAAI;gBACtB,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,EAAY;oBAC5C,MAAM,IAAI,MAAM,kDAAkD;gBACpE;gBAEA,IAAI,OAAO,YAAY,YAAY;oBACjC,KAAK;oBACL,UAAU,CAAC;gBACb;gBAEA,IAAI,OAAO,SAAS,SAAU,CAAA,OAAO,KAAK,QAAA,CAAS;gBAEnD,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,IAAA,EAAM;oBACtC,eAAe,IAAA,EAAM,MAAM,EAAE;oBAC7B;gBACF;gBAEA,MAAM,OAAO;oBACX,QAAQ,OAAO,SAAS;oBACxB,MAAM,CAAC,IAAA,CAAK,SAAA;oBACZ,UAAU;oBACV,KAAK;oBACL,GAAG,OAAA;gBACL;gBAEA,IAAI,CAAC,IAAA,CAAK,WAAA,CAAY,kBAAkB,aAAa,CAAA,EAAG;oBACtD,KAAK,QAAA,GAAW;gBAClB;gBAEA,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAK,QAAQ,cAAc,MAAM,EAAE;YAClD;YAAA;;;;OAAA,GAOA,YAAY;gBACV,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,MAAA,CAAQ,CAAA;gBAC1C,IAAI,IAAA,CAAK,UAAA,KAAe,WAAU,UAAA,EAAY;oBAC5C,MAAM,MAAM;oBACZ,eAAe,IAAA,EAAM,IAAA,CAAK,IAAA,EAAM,GAAG;oBACnC;gBACF;gBAEA,IAAI,IAAA,CAAK,OAAA,EAAS;oBAChB,IAAA,CAAK,WAAA,GAAc,WAAU,OAAA;oBAC7B,IAAA,CAAK,OAAA,CAAQ,OAAA,CAAQ;gBACvB;YACF;QACF;QAMA,OAAO,cAAA,CAAeC,YAAW,cAAc;YAC7C,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,YAAY;QACzC,CAAC;QAMD,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,cAAc;YACvD,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,YAAY;QACzC,CAAC;QAMD,OAAO,cAAA,CAAeA,YAAW,QAAQ;YACvC,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,MAAM;QACnC,CAAC;QAMD,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,QAAQ;YACjD,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,MAAM;QACnC,CAAC;QAMD,OAAO,cAAA,CAAeA,YAAW,WAAW;YAC1C,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,SAAS;QACtC,CAAC;QAMD,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,WAAW;YACpD,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,SAAS;QACtC,CAAC;QAMD,OAAO,cAAA,CAAeA,YAAW,UAAU;YACzC,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,QAAQ;QACrC,CAAC;QAMD,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,UAAU;YACnD,YAAY;YACZ,OAAO,YAAY,OAAA,CAAQ,QAAQ;QACrC,CAAC;QAED;YACE;YACA;YACA;YACA;YACA;YACA;YACA;SACF,CAAE,OAAA,CAAQ,CAAC,aAAa;YACtB,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,UAAU;gBAAE,YAAY;YAAK,CAAC;QAC3E,CAAC;QAMD;YAAC;YAAQ;YAAS;YAAS,SAAS;SAAA,CAAE,OAAA,CAAQ,CAAC,WAAW;YACxD,OAAO,cAAA,CAAeA,WAAU,SAAA,EAAW,CAAA,EAAA,EAAK,MAAM,EAAA,EAAI;gBACxD,YAAY;gBACZ,MAAM;oBACJ,KAAA,MAAW,YAAY,IAAA,CAAK,SAAA,CAAU,MAAM,EAAG;wBAC7C,IAAI,QAAA,CAAS,oBAAoB,CAAA,CAAG,CAAA,OAAO,QAAA,CAAS,SAAS,CAAA;oBAC/D;oBAEA,OAAO;gBACT;gBACA,KAAI,OAAA,EAAS;oBACX,KAAA,MAAW,YAAY,IAAA,CAAK,SAAA,CAAU,MAAM,EAAG;wBAC7C,IAAI,QAAA,CAAS,oBAAoB,CAAA,EAAG;4BAClC,IAAA,CAAK,cAAA,CAAe,QAAQ,QAAQ;4BACpC;wBACF;oBACF;oBAEA,IAAI,OAAO,YAAY,WAAY,CAAA;oBAEnC,IAAA,CAAK,gBAAA,CAAiB,QAAQ,SAAS;wBACrC,CAAC,oBAAoB,CAAA,EAAG;oBAC1B,CAAC;gBACH;YACF,CAAC;QACH,CAAC;QAEDA,WAAU,SAAA,CAAU,gBAAA,GAAmB;QACvCA,WAAU,SAAA,CAAU,mBAAA,GAAsB;QAE1C,OAAO,OAAA,GAAUA;QAoCjB,SAAS,aAAa,SAAA,EAAW,OAAA,EAAS,SAAA,EAAW,OAAA,EAAS;YAC5D,MAAM,OAAO;gBACX,wBAAwB;gBACxB,UAAU;gBACV,iBAAiB,gBAAA,CAAiB,CAAC,CAAA;gBACnC,YAAY,MAAM,OAAO;gBACzB,oBAAoB;gBACpB,mBAAmB;gBACnB,iBAAiB;gBACjB,cAAc;gBACd,GAAG,OAAA;gBACH,YAAY,KAAA;gBACZ,UAAU,KAAA;gBACV,UAAU,KAAA;gBACV,SAAS,KAAA;gBACT,QAAQ;gBACR,MAAM,KAAA;gBACN,MAAM,KAAA;gBACN,MAAM,KAAA;YACR;YAEA,UAAU,SAAA,GAAY,KAAK,QAAA;YAE3B,IAAI,CAAC,iBAAiB,QAAA,CAAS,KAAK,eAAe,GAAG;gBACpD,MAAM,IAAI,WACR,CAAA,8BAAA,EAAiC,KAAK,eAAe,CAAA,sBAAA,EAC3B,iBAAiB,IAAA,CAAK,IAAI,CAAC,CAAA,CAAA,CAAA;YAEzD;YAEA,IAAI;YAEJ,IAAI,mBAAmB,KAAK;gBAC1B,YAAY;YACd,OAAO;gBACL,IAAI;oBACF,YAAY,IAAI,IAAI,OAAO;gBAC7B,EAAA,OAAS,GAAG;oBACV,MAAM,IAAI,YAAY,CAAA,aAAA,EAAgB,OAAO,EAAE;gBACjD;YACF;YAEA,IAAI,UAAU,QAAA,KAAa,SAAS;gBAClC,UAAU,QAAA,GAAW;YACvB,OAAA,IAAW,UAAU,QAAA,KAAa,UAAU;gBAC1C,UAAU,QAAA,GAAW;YACvB;YAEA,UAAU,IAAA,GAAO,UAAU,IAAA;YAE3B,MAAM,WAAW,UAAU,QAAA,KAAa;YACxC,MAAM,WAAW,UAAU,QAAA,KAAa;YACxC,IAAI;YAEJ,IAAI,UAAU,QAAA,KAAa,SAAS,CAAC,YAAY,CAAC,UAAU;gBAC1D,oBACE,CAAA,gFAAA,CAAA;YAEJ,OAAA,IAAW,YAAY,CAAC,UAAU,QAAA,EAAU;gBAC1C,oBAAoB;YACtB,OAAA,IAAW,UAAU,IAAA,EAAM;gBACzB,oBAAoB;YACtB;YAEA,IAAI,mBAAmB;gBACrB,MAAM,MAAM,IAAI,YAAY,iBAAiB;gBAE7C,IAAI,UAAU,UAAA,KAAe,GAAG;oBAC9B,MAAM;gBACR,OAAO;oBACL,kBAAkB,WAAW,GAAG;oBAChC;gBACF;YACF;YAEA,MAAM,cAAc,WAAW,MAAM;YACrC,MAAM,MAAM,YAAY,EAAE,EAAE,QAAA,CAAS,QAAQ;YAC7C,MAAM,UAAU,WAAW,MAAM,OAAA,GAAU,KAAK,OAAA;YAChD,MAAM,cAAc,aAAA,GAAA,IAAI,IAAI;YAC5B,IAAI;YAEJ,KAAK,gBAAA,GACH,KAAK,gBAAA,IAAA,CAAqB,WAAW,aAAa,UAAA;YACpD,KAAK,WAAA,GAAc,KAAK,WAAA,IAAe;YACvC,KAAK,IAAA,GAAO,UAAU,IAAA,IAAQ;YAC9B,KAAK,IAAA,GAAO,UAAU,QAAA,CAAS,UAAA,CAAW,GAAG,IACzC,UAAU,QAAA,CAAS,KAAA,CAAM,GAAG,CAAA,CAAE,IAC9B,UAAU,QAAA;YACd,KAAK,OAAA,GAAU;gBACb,GAAG,KAAK,OAAA;gBACR,yBAAyB,KAAK,eAAA;gBAC9B,qBAAqB;gBACrB,YAAY;gBACZ,SAAS;YACX;YACA,KAAK,IAAA,GAAO,UAAU,QAAA,GAAW,UAAU,MAAA;YAC3C,KAAK,OAAA,GAAU,KAAK,gBAAA;YAEpB,IAAI,KAAK,iBAAA,EAAmB;gBAC1B,oBAAoB,IAAI,kBACtB,KAAK,iBAAA,KAAsB,OAAO,KAAK,iBAAA,GAAoB,CAAC,GAC5D,OACA,KAAK,UAAA;gBAEP,KAAK,OAAA,CAAQ,0BAA0B,CAAA,GAAI,OAAO;oBAChD,CAAC,kBAAkB,aAAa,CAAA,EAAG,kBAAkB,KAAA,CAAM;gBAC7D,CAAC;YACH;YACA,IAAI,UAAU,MAAA,EAAQ;gBACpB,KAAA,MAAW,YAAY,UAAW;oBAChC,IACE,OAAO,aAAa,YACpB,CAAC,iBAAiB,IAAA,CAAK,QAAQ,KAC/B,YAAY,GAAA,CAAI,QAAQ,GACxB;wBACA,MAAM,IAAI,YACR;oBAEJ;oBAEA,YAAY,GAAA,CAAI,QAAQ;gBAC1B;gBAEA,KAAK,OAAA,CAAQ,wBAAwB,CAAA,GAAI,UAAU,IAAA,CAAK,GAAG;YAC7D;YACA,IAAI,KAAK,MAAA,EAAQ;gBACf,IAAI,KAAK,eAAA,GAAkB,IAAI;oBAC7B,KAAK,OAAA,CAAQ,sBAAsB,CAAA,GAAI,KAAK,MAAA;gBAC9C,OAAO;oBACL,KAAK,OAAA,CAAQ,MAAA,GAAS,KAAK,MAAA;gBAC7B;YACF;YACA,IAAI,UAAU,QAAA,IAAY,UAAU,QAAA,EAAU;gBAC5C,KAAK,IAAA,GAAO,GAAG,UAAU,QAAQ,CAAA,CAAA,EAAI,UAAU,QAAQ,EAAA;YACzD;YAEA,IAAI,UAAU;gBACZ,MAAM,QAAQ,KAAK,IAAA,CAAK,KAAA,CAAM,GAAG;gBAEjC,KAAK,UAAA,GAAa,KAAA,CAAM,CAAC,CAAA;gBACzB,KAAK,IAAA,GAAO,KAAA,CAAM,CAAC,CAAA;YACrB;YAEA,IAAI;YAEJ,IAAI,KAAK,eAAA,EAAiB;gBACxB,IAAI,UAAU,UAAA,KAAe,GAAG;oBAC9B,UAAU,YAAA,GAAe;oBACzB,UAAU,eAAA,GAAkB;oBAC5B,UAAU,yBAAA,GAA4B,WAClC,KAAK,UAAA,GACL,UAAU,IAAA;oBAEd,MAAM,UAAU,WAAW,QAAQ,OAAA;oBAMnC,UAAU;wBAAE,GAAG,OAAA;wBAAS,SAAS,CAAC;oBAAE;oBAEpC,IAAI,SAAS;wBACX,KAAA,MAAW,CAACC,MAAK,KAAK,CAAA,IAAK,OAAO,OAAA,CAAQ,OAAO,EAAG;4BAClD,QAAQ,OAAA,CAAQA,KAAI,WAAA,CAAY,CAAC,CAAA,GAAI;wBACvC;oBACF;gBACF,OAAA,IAAW,UAAU,aAAA,CAAc,UAAU,MAAM,GAAG;oBACpD,MAAM,aAAa,WACf,UAAU,YAAA,GACR,KAAK,UAAA,KAAe,UAAU,yBAAA,GAC9B,QACF,UAAU,YAAA,GACR,QACA,UAAU,IAAA,KAAS,UAAU,yBAAA;oBAEnC,IAAI,CAAC,cAAe,UAAU,eAAA,IAAmB,CAAC,UAAW;wBAK3D,OAAO,KAAK,OAAA,CAAQ,aAAA;wBACpB,OAAO,KAAK,OAAA,CAAQ,MAAA;wBAEpB,IAAI,CAAC,WAAY,CAAA,OAAO,KAAK,OAAA,CAAQ,IAAA;wBAErC,KAAK,IAAA,GAAO,KAAA;oBACd;gBACF;gBAOA,IAAI,KAAK,IAAA,IAAQ,CAAC,QAAQ,OAAA,CAAQ,aAAA,EAAe;oBAC/C,QAAQ,OAAA,CAAQ,aAAA,GACd,WAAW,OAAO,IAAA,CAAK,KAAK,IAAI,EAAE,QAAA,CAAS,QAAQ;gBACvD;gBAEA,MAAM,UAAU,IAAA,GAAO,QAAQ,IAAI;gBAEnC,IAAI,UAAU,UAAA,EAAY;oBAUxB,UAAU,IAAA,CAAK,YAAY,UAAU,GAAA,EAAK,GAAG;gBAC/C;YACF,OAAO;gBACL,MAAM,UAAU,IAAA,GAAO,QAAQ,IAAI;YACrC;YAEA,IAAI,KAAK,OAAA,EAAS;gBAChB,IAAI,EAAA,CAAG,WAAW,MAAM;oBACtB,eAAe,WAAW,KAAK,iCAAiC;gBAClE,CAAC;YACH;YAEA,IAAI,EAAA,CAAG,SAAS,CAAC,QAAQ;gBACvB,IAAI,QAAQ,QAAQ,GAAA,CAAI,QAAQ,CAAA,CAAG,CAAA;gBAEnC,MAAM,UAAU,IAAA,GAAO;gBACvB,kBAAkB,WAAW,GAAG;YAClC,CAAC;YAED,IAAI,EAAA,CAAG,YAAY,CAAC,QAAQ;gBAC1B,MAAM,WAAW,IAAI,OAAA,CAAQ,QAAA;gBAC7B,MAAM,aAAa,IAAI,UAAA;gBAEvB,IACE,YACA,KAAK,eAAA,IACL,cAAc,OACd,aAAa,KACb;oBACA,IAAI,EAAE,UAAU,UAAA,GAAa,KAAK,YAAA,EAAc;wBAC9C,eAAe,WAAW,KAAK,4BAA4B;wBAC3D;oBACF;oBAEA,IAAI,KAAA,CAAM;oBAEV,IAAI;oBAEJ,IAAI;wBACF,OAAO,IAAI,IAAI,UAAU,OAAO;oBAClC,EAAA,OAAS,GAAG;wBACV,MAAM,MAAM,IAAI,YAAY,CAAA,aAAA,EAAgB,QAAQ,EAAE;wBACtD,kBAAkB,WAAW,GAAG;wBAChC;oBACF;oBAEA,aAAa,WAAW,MAAM,WAAW,OAAO;gBAClD,OAAA,IAAW,CAAC,UAAU,IAAA,CAAK,uBAAuB,KAAK,GAAG,GAAG;oBAC3D,eACE,WACA,KACA,CAAA,4BAAA,EAA+B,IAAI,UAAU,EAAA;gBAEjD;YACF,CAAC;YAED,IAAI,EAAA,CAAG,WAAW,CAAC,KAAK,QAAQ,SAAS;gBACvC,UAAU,IAAA,CAAK,WAAW,GAAG;gBAM7B,IAAI,UAAU,UAAA,KAAeD,WAAU,UAAA,CAAY,CAAA;gBAEnD,MAAM,UAAU,IAAA,GAAO;gBAEvB,MAAM,UAAU,IAAI,OAAA,CAAQ,OAAA;gBAE5B,IAAI,YAAY,KAAA,KAAa,QAAQ,WAAA,CAAY,MAAM,aAAa;oBAClE,eAAe,WAAW,QAAQ,wBAAwB;oBAC1D;gBACF;gBAEA,MAAM,SAAS,WAAW,MAAM,EAC7B,MAAA,CAAO,MAAM,IAAI,EACjB,MAAA,CAAO,QAAQ;gBAElB,IAAI,IAAI,OAAA,CAAQ,sBAAsB,CAAA,KAAM,QAAQ;oBAClD,eAAe,WAAW,QAAQ,qCAAqC;oBACvE;gBACF;gBAEA,MAAM,aAAa,IAAI,OAAA,CAAQ,wBAAwB,CAAA;gBACvD,IAAI;gBAEJ,IAAI,eAAe,KAAA,GAAW;oBAC5B,IAAI,CAAC,YAAY,IAAA,EAAM;wBACrB,YAAY;oBACd,OAAA,IAAW,CAAC,YAAY,GAAA,CAAI,UAAU,GAAG;wBACvC,YAAY;oBACd;gBACF,OAAA,IAAW,YAAY,IAAA,EAAM;oBAC3B,YAAY;gBACd;gBAEA,IAAI,WAAW;oBACb,eAAe,WAAW,QAAQ,SAAS;oBAC3C;gBACF;gBAEA,IAAI,WAAY,CAAA,UAAU,SAAA,GAAY;gBAEtC,MAAM,yBAAyB,IAAI,OAAA,CAAQ,0BAA0B,CAAA;gBAErE,IAAI,2BAA2B,KAAA,GAAW;oBACxC,IAAI,CAAC,mBAAmB;wBACtB,MAAM,UACJ;wBAEF,eAAe,WAAW,QAAQ,OAAO;wBACzC;oBACF;oBAEA,IAAI;oBAEJ,IAAI;wBACF,aAAa,MAAM,sBAAsB;oBAC3C,EAAA,OAAS,KAAK;wBACZ,MAAM,UAAU;wBAChB,eAAe,WAAW,QAAQ,OAAO;wBACzC;oBACF;oBAEA,MAAM,iBAAiB,OAAO,IAAA,CAAK,UAAU;oBAE7C,IACE,eAAe,MAAA,KAAW,KAC1B,cAAA,CAAe,CAAC,CAAA,KAAM,kBAAkB,aAAA,EACxC;wBACA,MAAM,UAAU;wBAChB,eAAe,WAAW,QAAQ,OAAO;wBACzC;oBACF;oBAEA,IAAI;wBACF,kBAAkB,MAAA,CAAO,UAAA,CAAW,kBAAkB,aAAa,CAAC;oBACtE,EAAA,OAAS,KAAK;wBACZ,MAAM,UAAU;wBAChB,eAAe,WAAW,QAAQ,OAAO;wBACzC;oBACF;oBAEA,UAAU,WAAA,CAAY,kBAAkB,aAAa,CAAA,GACnD;gBACJ;gBAEA,UAAU,SAAA,CAAU,QAAQ,MAAM;oBAChC,wBAAwB,KAAK,sBAAA;oBAC7B,cAAc,KAAK,YAAA;oBACnB,YAAY,KAAK,UAAA;oBACjB,oBAAoB,KAAK,kBAAA;gBAC3B,CAAC;YACH,CAAC;YAED,IAAI,KAAK,aAAA,EAAe;gBACtB,KAAK,aAAA,CAAc,KAAK,SAAS;YACnC,OAAO;gBACL,IAAI,GAAA,CAAI;YACV;QACF;QASA,SAAS,kBAAkB,SAAA,EAAW,GAAA,EAAK;YACzC,UAAU,WAAA,GAAcA,WAAU,OAAA;YAKlC,UAAU,aAAA,GAAgB;YAC1B,UAAU,IAAA,CAAK,SAAS,GAAG;YAC3B,UAAU,SAAA,CAAU;QACtB;QASA,SAAS,WAAW,OAAA,EAAS;YAC3B,QAAQ,IAAA,GAAO,QAAQ,UAAA;YACvB,OAAO,IAAI,OAAA,CAAQ,OAAO;QAC5B;QASA,SAAS,WAAW,OAAA,EAAS;YAC3B,QAAQ,IAAA,GAAO,KAAA;YAEf,IAAI,CAAC,QAAQ,UAAA,IAAc,QAAQ,UAAA,KAAe,IAAI;gBACpD,QAAQ,UAAA,GAAa,IAAI,IAAA,CAAK,QAAQ,IAAI,IAAI,KAAK,QAAQ,IAAA;YAC7D;YAEA,OAAO,IAAI,OAAA,CAAQ,OAAO;QAC5B;QAWA,SAAS,eAAe,SAAA,EAAW,MAAA,EAAQ,OAAA,EAAS;YAClD,UAAU,WAAA,GAAcA,WAAU,OAAA;YAElC,MAAM,MAAM,IAAI,MAAM,OAAO;YAC7B,MAAM,iBAAA,CAAkB,KAAK,cAAc;YAE3C,IAAI,OAAO,SAAA,EAAW;gBACpB,MAAA,CAAO,QAAQ,CAAA,GAAI;gBACnB,OAAO,KAAA,CAAM;gBAEb,IAAI,OAAO,MAAA,IAAU,CAAC,OAAO,MAAA,CAAO,SAAA,EAAW;oBAM7C,OAAO,MAAA,CAAO,OAAA,CAAQ;gBACxB;gBAEA,QAAQ,QAAA,CAAS,mBAAmB,WAAW,GAAG;YACpD,OAAO;gBACL,OAAO,OAAA,CAAQ,GAAG;gBAClB,OAAO,IAAA,CAAK,SAAS,UAAU,IAAA,CAAK,IAAA,CAAK,WAAW,OAAO,CAAC;gBAC5D,OAAO,IAAA,CAAK,SAAS,UAAU,SAAA,CAAU,IAAA,CAAK,SAAS,CAAC;YAC1D;QACF;QAWA,SAAS,eAAe,SAAA,EAAW,IAAA,EAAM,EAAA,EAAI;YAC3C,IAAI,MAAM;gBACR,MAAM,SAAS,OAAO,IAAI,IAAI,KAAK,IAAA,GAAO,SAAS,IAAI,EAAE,MAAA;gBAQzD,IAAI,UAAU,OAAA,CAAS,CAAA,UAAU,OAAA,CAAQ,cAAA,IAAkB;qBACtD,UAAU,eAAA,IAAmB;YACpC;YAEA,IAAI,IAAI;gBACN,MAAM,MAAM,IAAI,MACd,CAAA,kCAAA,EAAqC,UAAU,UAAU,CAAA,EAAA,EACnD,WAAA,CAAY,UAAU,UAAU,CAAC,CAAA,CAAA,CAAA;gBAEzC,QAAQ,QAAA,CAAS,IAAI,GAAG;YAC1B;QACF;QASA,SAAS,mBAAmB,IAAA,EAAM,MAAA,EAAQ;YACxC,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,UAAU,mBAAA,GAAsB;YAChC,UAAU,aAAA,GAAgB;YAC1B,UAAU,UAAA,GAAa;YAEvB,IAAI,UAAU,OAAA,CAAQ,UAAU,CAAA,KAAM,KAAA,EAAW,CAAA;YAEjD,UAAU,OAAA,CAAQ,cAAA,CAAe,QAAQ,YAAY;YACrD,QAAQ,QAAA,CAAS,QAAQ,UAAU,OAAO;YAE1C,IAAI,SAAS,KAAM,CAAA,UAAU,KAAA,CAAM;iBAC9B,UAAU,KAAA,CAAM,MAAM,MAAM;QACnC;QAOA,SAAS,kBAAkB;YACzB,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAI,CAAC,UAAU,QAAA,CAAU,CAAA,UAAU,OAAA,CAAQ,MAAA,CAAO;QACpD;QAQA,SAAS,gBAAgB,GAAA,EAAK;YAC5B,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAI,UAAU,OAAA,CAAQ,UAAU,CAAA,KAAM,KAAA,GAAW;gBAC/C,UAAU,OAAA,CAAQ,cAAA,CAAe,QAAQ,YAAY;gBAMrD,QAAQ,QAAA,CAAS,QAAQ,UAAU,OAAO;gBAE1C,UAAU,KAAA,CAAM,GAAA,CAAI,WAAW,CAAC;YAClC;YAEA,IAAI,CAAC,UAAU,aAAA,EAAe;gBAC5B,UAAU,aAAA,GAAgB;gBAC1B,UAAU,IAAA,CAAK,SAAS,GAAG;YAC7B;QACF;QAOA,SAAS,mBAAmB;YAC1B,IAAA,CAAK,UAAU,CAAA,CAAE,SAAA,CAAU;QAC7B;QASA,SAAS,kBAAkB,IAAA,EAAM,QAAA,EAAU;YACzC,IAAA,CAAK,UAAU,CAAA,CAAE,IAAA,CAAK,WAAW,MAAM,QAAQ;QACjD;QAQA,SAAS,eAAe,IAAA,EAAM;YAC5B,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAI,UAAU,SAAA,CAAW,CAAA,UAAU,IAAA,CAAK,MAAM,CAAC,IAAA,CAAK,SAAA,EAAW,IAAI;YACnE,UAAU,IAAA,CAAK,QAAQ,IAAI;QAC7B;QAQA,SAAS,eAAe,IAAA,EAAM;YAC5B,IAAA,CAAK,UAAU,CAAA,CAAE,IAAA,CAAK,QAAQ,IAAI;QACpC;QAQA,SAAS,OAAO,MAAA,EAAQ;YACtB,OAAO,MAAA,CAAO;QAChB;QAQA,SAAS,cAAc,GAAA,EAAK;YAC1B,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAI,UAAU,UAAA,KAAeA,WAAU,MAAA,CAAQ,CAAA;YAC/C,IAAI,UAAU,UAAA,KAAeA,WAAU,IAAA,EAAM;gBAC3C,UAAU,WAAA,GAAcA,WAAU,OAAA;gBAClC,cAAc,SAAS;YACzB;YAOA,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI;YAEjB,IAAI,CAAC,UAAU,aAAA,EAAe;gBAC5B,UAAU,aAAA,GAAgB;gBAC1B,UAAU,IAAA,CAAK,SAAS,GAAG;YAC7B;QACF;QAQA,SAAS,cAAc,SAAA,EAAW;YAChC,UAAU,WAAA,GAAc,WACtB,UAAU,OAAA,CAAQ,OAAA,CAAQ,IAAA,CAAK,UAAU,OAAO,GAChD;QAEJ;QAOA,SAAS,gBAAgB;YACvB,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAA,CAAK,cAAA,CAAe,SAAS,aAAa;YAC1C,IAAA,CAAK,cAAA,CAAe,QAAQ,YAAY;YACxC,IAAA,CAAK,cAAA,CAAe,OAAO,WAAW;YAEtC,UAAU,WAAA,GAAcA,WAAU,OAAA;YAElC,IAAI;YAWJ,IACE,CAAC,IAAA,CAAK,cAAA,CAAe,UAAA,IACrB,CAAC,UAAU,mBAAA,IACX,CAAC,UAAU,SAAA,CAAU,cAAA,CAAe,YAAA,IAAA,CACnC,QAAQ,UAAU,OAAA,CAAQ,IAAA,CAAK,CAAA,MAAO,MACvC;gBACA,UAAU,SAAA,CAAU,KAAA,CAAM,KAAK;YACjC;YAEA,UAAU,SAAA,CAAU,GAAA,CAAI;YAExB,IAAA,CAAK,UAAU,CAAA,GAAI,KAAA;YAEnB,aAAa,UAAU,WAAW;YAElC,IACE,UAAU,SAAA,CAAU,cAAA,CAAe,QAAA,IACnC,UAAU,SAAA,CAAU,cAAA,CAAe,YAAA,EACnC;gBACA,UAAU,SAAA,CAAU;YACtB,OAAO;gBACL,UAAU,SAAA,CAAU,EAAA,CAAG,SAAS,gBAAgB;gBAChD,UAAU,SAAA,CAAU,EAAA,CAAG,UAAU,gBAAgB;YACnD;QACF;QAQA,SAAS,aAAa,KAAA,EAAO;YAC3B,IAAI,CAAC,IAAA,CAAK,UAAU,CAAA,CAAE,SAAA,CAAU,KAAA,CAAM,KAAK,GAAG;gBAC5C,IAAA,CAAK,KAAA,CAAM;YACb;QACF;QAOA,SAAS,cAAc;YACrB,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,UAAU,WAAA,GAAcA,WAAU,OAAA;YAClC,UAAU,SAAA,CAAU,GAAA,CAAI;YACxB,IAAA,CAAK,GAAA,CAAI;QACX;QAOA,SAAS,gBAAgB;YACvB,MAAM,YAAY,IAAA,CAAK,UAAU,CAAA;YAEjC,IAAA,CAAK,cAAA,CAAe,SAAS,aAAa;YAC1C,IAAA,CAAK,EAAA,CAAG,SAAS,IAAI;YAErB,IAAI,WAAW;gBACb,UAAU,WAAA,GAAcA,WAAU,OAAA;gBAClC,IAAA,CAAK,OAAA,CAAQ;YACf;QACF;IAAA;AAAA;;AC32CA,IAAA,sBAAA,WAAA;IAAA,yHAAA,OAAA,EAAA,MAAA;QAAA;QAEA,IAAM,EAAE,UAAA,CAAW,CAAA,GAAI;QASvB,SAAS,MAAM,MAAA,EAAQ;YACrB,MAAM,YAAY,aAAA,GAAA,IAAI,IAAI;YAC1B,IAAI,QAAQ,CAAA;YACZ,IAAI,MAAM,CAAA;YACV,IAAI,IAAI;YAER,IAAK,GAAG,IAAI,OAAO,MAAA,EAAQ,IAAK;gBAC9B,MAAM,OAAO,OAAO,UAAA,CAAW,CAAC;gBAEhC,IAAI,QAAQ,CAAA,KAAM,UAAA,CAAW,IAAI,CAAA,KAAM,GAAG;oBACxC,IAAI,UAAU,CAAA,EAAI,CAAA,QAAQ;gBAC5B,OAAA,IACE,MAAM,KAAA,CACL,SAAS,MAAkB,SAAS,CAAA,GACrC;oBACA,IAAI,QAAQ,CAAA,KAAM,UAAU,CAAA,EAAI,CAAA,MAAM;gBACxC,OAAA,IAAW,SAAS,IAAgB;oBAClC,IAAI,UAAU,CAAA,GAAI;wBAChB,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;oBAC5D;oBAEA,IAAI,QAAQ,CAAA,EAAI,CAAA,MAAM;oBAEtB,MAAME,YAAW,OAAO,KAAA,CAAM,OAAO,GAAG;oBAExC,IAAI,UAAU,GAAA,CAAIA,SAAQ,GAAG;wBAC3B,MAAM,IAAI,YAAY,CAAA,KAAA,EAAQA,SAAQ,CAAA,2BAAA,CAA6B;oBACrE;oBAEA,UAAU,GAAA,CAAIA,SAAQ;oBACtB,QAAQ,MAAM,CAAA;gBAChB,OAAO;oBACL,MAAM,IAAI,YAAY,CAAA,8BAAA,EAAiC,CAAC,EAAE;gBAC5D;YACF;YAEA,IAAI,UAAU,CAAA,KAAM,QAAQ,CAAA,GAAI;gBAC9B,MAAM,IAAI,YAAY,yBAAyB;YACjD;YAEA,MAAM,WAAW,OAAO,KAAA,CAAM,OAAO,CAAC;YAEtC,IAAI,UAAU,GAAA,CAAI,QAAQ,GAAG;gBAC3B,MAAM,IAAI,YAAY,CAAA,KAAA,EAAQ,QAAQ,CAAA,2BAAA,CAA6B;YACrE;YAEA,UAAU,GAAA,CAAI,QAAQ;YACtB,OAAO;QACT;QAEA,OAAO,OAAA,GAAU;YAAE;QAAM;IAAA;AAAA;;AC7DzB,IAAA,2BAAA,WAAA;IAAA,8HAAA,OAAA,EAAA,MAAA;QAAA;QAIA,IAAM,eAAe,UAAQ,QAAQ;QACrC,IAAM,OAAO,UAAQ,MAAM;QAC3B,IAAM,EAAE,MAAA,CAAO,CAAA,GAAI,UAAQ,QAAQ;QACnC,IAAM,EAAE,UAAA,CAAW,CAAA,GAAI,UAAQ,QAAQ;QAEvC,IAAM,YAAY;QAClB,IAAM,oBAAoB;QAC1B,IAAM,cAAc;QACpB,IAAMC,aAAY;QAClB,IAAM,EAAE,IAAA,EAAM,UAAA,CAAW,CAAA,GAAI;QAE7B,IAAM,WAAW;QAEjB,IAAM,UAAU;QAChB,IAAM,UAAU;QAChB,IAAM,SAAS;QAOf,IAAMC,mBAAN,cAA8B,aAAa;YAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAAA,GAgCzC,YAAY,OAAA,EAAS,QAAA,CAAU;gBAC7B,KAAA,CAAM;gBAEN,UAAU;oBACR,wBAAwB;oBACxB,UAAU;oBACV,YAAY,MAAM,OAAO;oBACzB,oBAAoB;oBACpB,mBAAmB;oBACnB,iBAAiB;oBACjB,gBAAgB;oBAChB,cAAc;oBACd,UAAU;oBACV,SAAS;oBAAA,6CAAA;oBACT,QAAQ;oBACR,MAAM;oBACN,MAAM;oBACN,MAAM;oBACN,WAAAD;oBACA,GAAG,OAAA;gBACL;gBAEA,IACG,QAAQ,IAAA,IAAQ,QAAQ,CAAC,QAAQ,MAAA,IAAU,CAAC,QAAQ,QAAA,IACpD,QAAQ,IAAA,IAAQ,QAAA,CAAS,QAAQ,MAAA,IAAU,QAAQ,QAAA,KACnD,QAAQ,MAAA,IAAU,QAAQ,QAAA,EAC3B;oBACA,MAAM,IAAI,UACR;gBAGJ;gBAEA,IAAI,QAAQ,IAAA,IAAQ,MAAM;oBACxB,IAAA,CAAK,OAAA,GAAU,KAAK,YAAA,CAAa,CAAC,KAAK,QAAQ;wBAC7C,MAAM,OAAO,KAAK,YAAA,CAAa,GAAG,CAAA;wBAElC,IAAI,SAAA,CAAU,KAAK;4BACjB,kBAAkB,KAAK,MAAA;4BACvB,gBAAgB;wBAClB,CAAC;wBACD,IAAI,GAAA,CAAI,IAAI;oBACd,CAAC;oBACD,IAAA,CAAK,OAAA,CAAQ,MAAA,CACX,QAAQ,IAAA,EACR,QAAQ,IAAA,EACR,QAAQ,OAAA,EACR;gBAEJ,OAAA,IAAW,QAAQ,MAAA,EAAQ;oBACzB,IAAA,CAAK,OAAA,GAAU,QAAQ,MAAA;gBACzB;gBAEA,IAAI,IAAA,CAAK,OAAA,EAAS;oBAChB,MAAM,iBAAiB,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,IAAA,EAAM,YAAY;oBAExD,IAAA,CAAK,gBAAA,GAAmB,aAAa,IAAA,CAAK,OAAA,EAAS;wBACjD,WAAW,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,IAAA,EAAM,WAAW;wBAC3C,OAAO,IAAA,CAAK,IAAA,CAAK,IAAA,CAAK,IAAA,EAAM,OAAO;wBACnC,SAAS,CAAC,KAAK,QAAQ,SAAS;4BAC9B,IAAA,CAAK,aAAA,CAAc,KAAK,QAAQ,MAAM,cAAc;wBACtD;oBACF,CAAC;gBACH;gBAEA,IAAI,QAAQ,iBAAA,KAAsB,KAAM,CAAA,QAAQ,iBAAA,GAAoB,CAAC;gBACrE,IAAI,QAAQ,cAAA,EAAgB;oBAC1B,IAAA,CAAK,OAAA,GAAU,aAAA,GAAA,IAAI,IAAI;oBACvB,IAAA,CAAK,gBAAA,GAAmB;gBAC1B;gBAEA,IAAA,CAAK,OAAA,GAAU;gBACf,IAAA,CAAK,MAAA,GAAS;YAChB;YAAA;;;;;;;;OAAA,GAWA,UAAU;gBACR,IAAI,IAAA,CAAK,OAAA,CAAQ,QAAA,EAAU;oBACzB,MAAM,IAAI,MAAM,4CAA4C;gBAC9D;gBAEA,IAAI,CAAC,IAAA,CAAK,OAAA,CAAS,CAAA,OAAO;gBAC1B,OAAO,IAAA,CAAK,OAAA,CAAQ,OAAA,CAAQ;YAC9B;YAAA;;;;;;OAAA,GASA,MAAM,EAAA,EAAI;gBACR,IAAI,IAAA,CAAK,MAAA,KAAW,QAAQ;oBAC1B,IAAI,IAAI;wBACN,IAAA,CAAK,IAAA,CAAK,SAAS,MAAM;4BACvB,GAAG,IAAI,MAAM,2BAA2B,CAAC;wBAC3C,CAAC;oBACH;oBAEA,QAAQ,QAAA,CAAS,WAAW,IAAI;oBAChC;gBACF;gBAEA,IAAI,GAAI,CAAA,IAAA,CAAK,IAAA,CAAK,SAAS,EAAE;gBAE7B,IAAI,IAAA,CAAK,MAAA,KAAW,QAAS,CAAA;gBAC7B,IAAA,CAAK,MAAA,GAAS;gBAEd,IAAI,IAAA,CAAK,OAAA,CAAQ,QAAA,IAAY,IAAA,CAAK,OAAA,CAAQ,MAAA,EAAQ;oBAChD,IAAI,IAAA,CAAK,OAAA,EAAS;wBAChB,IAAA,CAAK,gBAAA,CAAiB;wBACtB,IAAA,CAAK,gBAAA,GAAmB,IAAA,CAAK,OAAA,GAAU;oBACzC;oBAEA,IAAI,IAAA,CAAK,OAAA,EAAS;wBAChB,IAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,IAAA,EAAM;4BACtB,QAAQ,QAAA,CAAS,WAAW,IAAI;wBAClC,OAAO;4BACL,IAAA,CAAK,gBAAA,GAAmB;wBAC1B;oBACF,OAAO;wBACL,QAAQ,QAAA,CAAS,WAAW,IAAI;oBAClC;gBACF,OAAO;oBACL,MAAM,SAAS,IAAA,CAAK,OAAA;oBAEpB,IAAA,CAAK,gBAAA,CAAiB;oBACtB,IAAA,CAAK,gBAAA,GAAmB,IAAA,CAAK,OAAA,GAAU;oBAMvC,OAAO,KAAA,CAAM,MAAM;wBACjB,UAAU,IAAI;oBAChB,CAAC;gBACH;YACF;YAAA;;;;;;OAAA,GASA,aAAa,GAAA,EAAK;gBAChB,IAAI,IAAA,CAAK,OAAA,CAAQ,IAAA,EAAM;oBACrB,MAAM,QAAQ,IAAI,GAAA,CAAI,OAAA,CAAQ,GAAG;oBACjC,MAAM,WAAW,UAAU,CAAA,IAAK,IAAI,GAAA,CAAI,KAAA,CAAM,GAAG,KAAK,IAAI,IAAI,GAAA;oBAE9D,IAAI,aAAa,IAAA,CAAK,OAAA,CAAQ,IAAA,CAAM,CAAA,OAAO;gBAC7C;gBAEA,OAAO;YACT;YAAA;;;;;;;;OAAA,GAWA,cAAc,GAAA,EAAK,MAAA,EAAQ,IAAA,EAAM,EAAA,EAAI;gBACnC,OAAO,EAAA,CAAG,SAAS,aAAa;gBAEhC,MAAM,MAAM,IAAI,OAAA,CAAQ,mBAAmB,CAAA;gBAC3C,MAAM,UAAU,IAAI,OAAA,CAAQ,OAAA;gBAC5B,MAAM,UAAU,CAAC,IAAI,OAAA,CAAQ,uBAAuB,CAAA;gBAEpD,IAAI,IAAI,MAAA,KAAW,OAAO;oBACxB,MAAM,UAAU;oBAChB,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;oBACjE;gBACF;gBAEA,IAAI,YAAY,KAAA,KAAa,QAAQ,WAAA,CAAY,MAAM,aAAa;oBAClE,MAAM,UAAU;oBAChB,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;oBACjE;gBACF;gBAEA,IAAI,QAAQ,KAAA,KAAa,CAAC,SAAS,IAAA,CAAK,GAAG,GAAG;oBAC5C,MAAM,UAAU;oBAChB,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;oBACjE;gBACF;gBAEA,IAAI,YAAY,KAAK,YAAY,IAAI;oBACnC,MAAM,UAAU;oBAChB,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;oBACjE;gBACF;gBAEA,IAAI,CAAC,IAAA,CAAK,YAAA,CAAa,GAAG,GAAG;oBAC3B,eAAe,QAAQ,GAAG;oBAC1B;gBACF;gBAEA,MAAM,uBAAuB,IAAI,OAAA,CAAQ,wBAAwB,CAAA;gBACjE,IAAI,YAAY,aAAA,GAAA,IAAI,IAAI;gBAExB,IAAI,yBAAyB,KAAA,GAAW;oBACtC,IAAI;wBACF,YAAY,YAAY,KAAA,CAAM,oBAAoB;oBACpD,EAAA,OAAS,KAAK;wBACZ,MAAM,UAAU;wBAChB,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;wBACjE;oBACF;gBACF;gBAEA,MAAM,yBAAyB,IAAI,OAAA,CAAQ,0BAA0B,CAAA;gBACrE,MAAM,aAAa,CAAC;gBAEpB,IACE,IAAA,CAAK,OAAA,CAAQ,iBAAA,IACb,2BAA2B,KAAA,GAC3B;oBACA,MAAM,oBAAoB,IAAI,kBAC5B,IAAA,CAAK,OAAA,CAAQ,iBAAA,EACb,MACA,IAAA,CAAK,OAAA,CAAQ,UAAA;oBAGf,IAAI;wBACF,MAAM,SAAS,UAAU,KAAA,CAAM,sBAAsB;wBAErD,IAAI,MAAA,CAAO,kBAAkB,aAAa,CAAA,EAAG;4BAC3C,kBAAkB,MAAA,CAAO,MAAA,CAAO,kBAAkB,aAAa,CAAC;4BAChE,UAAA,CAAW,kBAAkB,aAAa,CAAA,GAAI;wBAChD;oBACF,EAAA,OAAS,KAAK;wBACZ,MAAM,UACJ;wBACF,kCAAkC,IAAA,EAAM,KAAK,QAAQ,KAAK,OAAO;wBACjE;oBACF;gBACF;gBAKA,IAAI,IAAA,CAAK,OAAA,CAAQ,YAAA,EAAc;oBAC7B,MAAM,OAAO;wBACX,QACE,IAAI,OAAA,CAAQ,GAAG,YAAY,IAAI,yBAAyB,QAAQ,EAAE,CAAA;wBACpE,QAAQ,CAAC,CAAA,CAAE,IAAI,MAAA,CAAO,UAAA,IAAc,IAAI,MAAA,CAAO,SAAA;wBAC/C;oBACF;oBAEA,IAAI,IAAA,CAAK,OAAA,CAAQ,YAAA,CAAa,MAAA,KAAW,GAAG;wBAC1C,IAAA,CAAK,OAAA,CAAQ,YAAA,CAAa,MAAM,CAAC,UAAU,MAAM,SAAS,YAAY;4BACpE,IAAI,CAAC,UAAU;gCACb,OAAO,eAAe,QAAQ,QAAQ,KAAK,SAAS,OAAO;4BAC7D;4BAEA,IAAA,CAAK,eAAA,CACH,YACA,KACA,WACA,KACA,QACA,MACA;wBAEJ,CAAC;wBACD;oBACF;oBAEA,IAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,YAAA,CAAa,IAAI,EAAG,CAAA,OAAO,eAAe,QAAQ,GAAG;gBACzE;gBAEA,IAAA,CAAK,eAAA,CAAgB,YAAY,KAAK,WAAW,KAAK,QAAQ,MAAM,EAAE;YACxE;YAAA;;;;;;;;;;;;OAAA,GAeA,gBAAgB,UAAA,EAAY,GAAA,EAAK,SAAA,EAAW,GAAA,EAAK,MAAA,EAAQ,IAAA,EAAM,EAAA,EAAI;gBAIjE,IAAI,CAAC,OAAO,QAAA,IAAY,CAAC,OAAO,QAAA,CAAU,CAAA,OAAO,OAAO,OAAA,CAAQ;gBAEhE,IAAI,MAAA,CAAO,UAAU,CAAA,EAAG;oBACtB,MAAM,IAAI,MACR;gBAGJ;gBAEA,IAAI,IAAA,CAAK,MAAA,GAAS,QAAS,CAAA,OAAO,eAAe,QAAQ,GAAG;gBAE5D,MAAM,SAAS,WAAW,MAAM,EAC7B,MAAA,CAAO,MAAM,IAAI,EACjB,MAAA,CAAO,QAAQ;gBAElB,MAAM,UAAU;oBACd;oBACA;oBACA;oBACA,CAAA,sBAAA,EAAyB,MAAM,EAAA;iBACjC;gBAEA,MAAM,KAAK,IAAI,IAAA,CAAK,OAAA,CAAQ,SAAA,CAAU,MAAM,KAAA,GAAW,IAAA,CAAK,OAAO;gBAEnE,IAAI,UAAU,IAAA,EAAM;oBAIlB,MAAM,WAAW,IAAA,CAAK,OAAA,CAAQ,eAAA,GAC1B,IAAA,CAAK,OAAA,CAAQ,eAAA,CAAgB,WAAW,GAAG,IAC3C,UAAU,MAAA,CAAO,EAAE,IAAA,CAAK,EAAE,KAAA;oBAE9B,IAAI,UAAU;wBACZ,QAAQ,IAAA,CAAK,CAAA,wBAAA,EAA2B,QAAQ,EAAE;wBAClD,GAAG,SAAA,GAAY;oBACjB;gBACF;gBAEA,IAAI,UAAA,CAAW,kBAAkB,aAAa,CAAA,EAAG;oBAC/C,MAAM,SAAS,UAAA,CAAW,kBAAkB,aAAa,CAAA,CAAE,MAAA;oBAC3D,MAAM,QAAQ,UAAU,MAAA,CAAO;wBAC7B,CAAC,kBAAkB,aAAa,CAAA,EAAG;4BAAC,MAAM;yBAAA;oBAC5C,CAAC;oBACD,QAAQ,IAAA,CAAK,CAAA,0BAAA,EAA6B,KAAK,EAAE;oBACjD,GAAG,WAAA,GAAc;gBACnB;gBAKA,IAAA,CAAK,IAAA,CAAK,WAAW,SAAS,GAAG;gBAEjC,OAAO,KAAA,CAAM,QAAQ,MAAA,CAAO,MAAM,EAAE,IAAA,CAAK,MAAM,CAAC;gBAChD,OAAO,cAAA,CAAe,SAAS,aAAa;gBAE5C,GAAG,SAAA,CAAU,QAAQ,MAAM;oBACzB,wBAAwB,IAAA,CAAK,OAAA,CAAQ,sBAAA;oBACrC,YAAY,IAAA,CAAK,OAAA,CAAQ,UAAA;oBACzB,oBAAoB,IAAA,CAAK,OAAA,CAAQ,kBAAA;gBACnC,CAAC;gBAED,IAAI,IAAA,CAAK,OAAA,EAAS;oBAChB,IAAA,CAAK,OAAA,CAAQ,GAAA,CAAI,EAAE;oBACnB,GAAG,EAAA,CAAG,SAAS,MAAM;wBACnB,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO,EAAE;wBAEtB,IAAI,IAAA,CAAK,gBAAA,IAAoB,CAAC,IAAA,CAAK,OAAA,CAAQ,IAAA,EAAM;4BAC/C,QAAQ,QAAA,CAAS,WAAW,IAAI;wBAClC;oBACF,CAAC;gBACH;gBAEA,GAAG,IAAI,GAAG;YACZ;QACF;QAEA,OAAO,OAAA,GAAUC;QAYjB,SAAS,aAAa,MAAA,EAAQ,GAAA,EAAK;YACjC,KAAA,MAAW,SAAS,OAAO,IAAA,CAAK,GAAG,EAAG,OAAO,EAAA,CAAG,OAAO,GAAA,CAAI,KAAK,CAAC;YAEjE,OAAO,SAAS,kBAAkB;gBAChC,KAAA,MAAW,SAAS,OAAO,IAAA,CAAK,GAAG,EAAG;oBACpC,OAAO,cAAA,CAAe,OAAO,GAAA,CAAI,KAAK,CAAC;gBACzC;YACF;QACF;QAQA,SAAS,UAAU,MAAA,EAAQ;YACzB,OAAO,MAAA,GAAS;YAChB,OAAO,IAAA,CAAK,OAAO;QACrB;QAOA,SAAS,gBAAgB;YACvB,IAAA,CAAK,OAAA,CAAQ;QACf;QAWA,SAAS,eAAe,MAAA,EAAQ,IAAA,EAAM,OAAA,EAAS,OAAA,EAAS;YAStD,UAAU,WAAW,KAAK,YAAA,CAAa,IAAI,CAAA;YAC3C,UAAU;gBACR,YAAY;gBACZ,gBAAgB;gBAChB,kBAAkB,OAAO,UAAA,CAAW,OAAO;gBAC3C,GAAG,OAAA;YACL;YAEA,OAAO,IAAA,CAAK,UAAU,OAAO,OAAO;YAEpC,OAAO,GAAA,CACL,CAAA,SAAA,EAAY,IAAI,CAAA,CAAA,EAAI,KAAK,YAAA,CAAa,IAAI,CAAC,CAAA;AAAA,CAAA,GACzC,OAAO,IAAA,CAAK,OAAO,EAChB,GAAA,CAAI,CAAC,IAAM,GAAG,CAAC,CAAA,EAAA,EAAK,OAAA,CAAQ,CAAC,CAAC,EAAE,EAChC,IAAA,CAAK,MAAM,IACd,aACA;QAEN;QAaA,SAAS,kCAAkC,MAAA,EAAQ,GAAA,EAAK,MAAA,EAAQ,IAAA,EAAM,OAAA,EAAS;YAC7E,IAAI,OAAO,aAAA,CAAc,eAAe,GAAG;gBACzC,MAAM,MAAM,IAAI,MAAM,OAAO;gBAC7B,MAAM,iBAAA,CAAkB,KAAK,iCAAiC;gBAE9D,OAAO,IAAA,CAAK,iBAAiB,KAAK,QAAQ,GAAG;YAC/C,OAAO;gBACL,eAAe,QAAQ,MAAM,OAAO;YACtC;QACF;IAAA;AAAA;;;AE3hBA,IAAA,gBAAkC,QAAA,kBAAA;AAClC,IAAA,kBAAqB,QAAA,oBAAA;AACrB,IAAA,gBAAmB,QAAA,kBAAA;AACnB,IAAA,mBAAsB,QAAA,qBAAA;AACtB,IAAA,0BAA4B,QAAA,4BAAA;AAG5B,IAAO,kBAAQ,iBAAAC,OAAAA;;ADCf,IAAM,gBAAgB;sKAEtB,iCAAA,EAA+B,aAAa","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],"debugId":null}},
    {"offset": {"line": 3756, "column": 0}, "map": {"version":3,"sources":["file:///Users/kirannew/StudyLens%20AI/node_modules/convex/src/browser/index.ts"],"sourcesContent":["/**\n * Tools for accessing Convex in the browser.\n *\n * **If you are using React, use the {@link react} module instead.**\n *\n * ## Usage\n *\n * Create a {@link ConvexHttpClient} to connect to the Convex Cloud.\n *\n * ```typescript\n * import { ConvexHttpClient } from \"convex/browser\";\n * // typically loaded from an environment variable\n * const address = \"https://small-mouse-123.convex.cloud\";\n * const convex = new ConvexHttpClient(address);\n * ```\n *\n * @module\n */\nexport { BaseConvexClient } from \"./sync/client.js\";\nexport type {\n  BaseConvexClientOptions,\n  MutationOptions,\n  SubscribeOptions,\n  ConnectionState,\n} from \"./sync/client.js\";\nexport type { ConvexClientOptions } from \"./simple_client.js\";\nexport { ConvexClient } from \"./simple_client.js\";\nexport type {\n  OptimisticUpdate,\n  OptimisticLocalStore,\n} from \"./sync/optimistic_updates.js\";\nexport type { QueryToken } from \"./sync/udf_path_utils.js\";\nexport { ConvexHttpClient } from \"./http_client.js\";\nexport type { QueryJournal } from \"./sync/protocol.js\";\n/** @internal */\nexport type { UserIdentityAttributes } from \"./sync/protocol.js\";\nexport type { FunctionResult } from \"./sync/function_result.js\";\n"],"names":[],"mappings":";AAkBA,SAAS,wBAAwB;AAQjC,SAAS,oBAAoB;AAM7B,SAAS,wBAAwB","ignoreList":[0],"debugId":null}}]
}